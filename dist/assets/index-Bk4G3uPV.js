function Nb(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ab(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q0={exports:{}},Mc={},Y0={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),Cb=Symbol.for("react.portal"),Rb=Symbol.for("react.fragment"),Pb=Symbol.for("react.strict_mode"),jb=Symbol.for("react.profiler"),Db=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),Lb=Symbol.for("react.forward_ref"),Vb=Symbol.for("react.suspense"),Mb=Symbol.for("react.memo"),Ub=Symbol.for("react.lazy"),Gp=Symbol.iterator;function Fb(t){return t===null||typeof t!="object"?null:(t=Gp&&t[Gp]||t["@@iterator"],typeof t=="function"?t:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J0=Object.assign,Z0={};function Vi(t,e,r){this.props=t,this.context=e,this.refs=Z0,this.updater=r||X0}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ev(){}ev.prototype=Vi.prototype;function Zh(t,e,r){this.props=t,this.context=e,this.refs=Z0,this.updater=r||X0}var ef=Zh.prototype=new ev;ef.constructor=Zh;J0(ef,Vi.prototype);ef.isPureReactComponent=!0;var Kp=Array.isArray,tv=Object.prototype.hasOwnProperty,tf={current:null},rv={key:!0,ref:!0,__self:!0,__source:!0};function nv(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)tv.call(e,n)&&!rv.hasOwnProperty(n)&&(s[n]=e[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:vo,type:t,key:i,ref:a,props:s,_owner:tf.current}}function $b(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function Bb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Qp=/\/+/g;function Wu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bb(""+t.key):e.toString(36)}function bl(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vo:case Cb:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Wu(a,0):n,Kp(s)?(r="",t!=null&&(r=t.replace(Qp,"$&/")+"/"),bl(s,e,r,"",function(d){return d})):s!=null&&(rf(s)&&(s=$b(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Qp,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Kp(t))for(var c=0;c<t.length;c++){i=t[c];var u=n+Wu(i,c);a+=bl(i,e,r,u,s)}else if(u=Fb(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=n+Wu(i,c++),a+=bl(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jo(t,e,r){if(t==null)return t;var n=[],s=0;return bl(t,n,"","",function(i){return e.call(r,i,s++)}),n}function zb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},kl={transition:null},qb={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:kl,ReactCurrentOwner:tf};function sv(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Jo,forEach:function(t,e,r){Jo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jo(t,function(){e++}),e},toArray:function(t){return Jo(t,function(e){return e})||[]},only:function(t){if(!rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Vi;ue.Fragment=Rb;ue.Profiler=jb;ue.PureComponent=Zh;ue.StrictMode=Pb;ue.Suspense=Vb;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;ue.act=sv;ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=J0({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=tf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)tv.call(e,u)&&!rv.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:vo,type:t.type,key:s,ref:i,props:n,_owner:a}};ue.createContext=function(t){return t={$$typeof:Ob,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Db,_context:t},t.Consumer=t};ue.createElement=nv;ue.createFactory=function(t){var e=nv.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:Lb,render:t}};ue.isValidElement=rf;ue.lazy=function(t){return{$$typeof:Ub,_payload:{_status:-1,_result:t},_init:zb}};ue.memo=function(t,e){return{$$typeof:Mb,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};ue.unstable_act=sv;ue.useCallback=function(t,e){return St.current.useCallback(t,e)};ue.useContext=function(t){return St.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ue.useEffect=function(t,e){return St.current.useEffect(t,e)};ue.useId=function(){return St.current.useId()};ue.useImperativeHandle=function(t,e,r){return St.current.useImperativeHandle(t,e,r)};ue.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return St.current.useMemo(t,e)};ue.useReducer=function(t,e,r){return St.current.useReducer(t,e,r)};ue.useRef=function(t){return St.current.useRef(t)};ue.useState=function(t){return St.current.useState(t)};ue.useSyncExternalStore=function(t,e,r){return St.current.useSyncExternalStore(t,e,r)};ue.useTransition=function(){return St.current.useTransition()};ue.version="18.3.1";Y0.exports=ue;var O=Y0.exports;const iv=Ab(O),Wb=Nb({__proto__:null,default:iv},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=O,Gb=Symbol.for("react.element"),Kb=Symbol.for("react.fragment"),Qb=Object.prototype.hasOwnProperty,Yb=Hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xb={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Qb.call(e,n)&&!Xb.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Gb,type:t,key:i,ref:a,props:s,_owner:Yb.current}}Mc.Fragment=Kb;Mc.jsx=av;Mc.jsxs=av;Q0.exports=Mc;var o=Q0.exports,ov={exports:{}},Ht={},lv={exports:{}},cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var H=$.length;$.push(K);e:for(;0<H;){var se=H-1>>>1,_e=$[se];if(0<s(_e,K))$[se]=K,$[H]=_e,H=se;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var K=$[0],H=$.pop();if(H!==K){$[0]=H;e:for(var se=0,_e=$.length,At=_e>>>1;se<At;){var Ae=2*(se+1)-1,rr=$[Ae],wt=Ae+1,Vt=$[wt];if(0>s(rr,H))wt<_e&&0>s(Vt,rr)?($[se]=Vt,$[wt]=H,se=wt):($[se]=rr,$[Ae]=H,se=Ae);else if(wt<_e&&0>s(Vt,H))$[se]=Vt,$[wt]=H,se=wt;else break e}}return K}function s($,K){var H=$.sortIndex-K.sortIndex;return H!==0?H:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,f=null,p=3,I=!1,j=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var K=r(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=$)n(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=r(d)}}function S($){if(_=!1,w($),!j)if(r(u)!==null)j=!0,G(D);else{var K=r(d);K!==null&&le(S,K.startTime-$)}}function D($,K){j=!1,_&&(_=!1,T(x),x=-1),I=!0;var H=p;try{for(w(K),f=r(u);f!==null&&(!(f.expirationTime>K)||$&&!C());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var _e=se(f.expirationTime<=K);K=t.unstable_now(),typeof _e=="function"?f.callback=_e:f===r(u)&&n(u),w(K)}else n(u);f=r(u)}if(f!==null)var At=!0;else{var Ae=r(d);Ae!==null&&le(S,Ae.startTime-K),At=!1}return At}finally{f=null,p=H,I=!1}}var N=!1,E=null,x=-1,v=5,b=-1;function C(){return!(t.unstable_now()-b<v)}function P(){if(E!==null){var $=t.unstable_now();b=$;var K=!0;try{K=E(!0,$)}finally{K?A():(N=!1,E=null)}}else N=!1}var A;if(typeof y=="function")A=function(){y(P)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=P,A=function(){z.postMessage(null)}}else A=function(){R(P,0)};function G($){E=$,N||(N=!0,A())}function le($,K){x=R(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){j||I||(j=!0,G(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var H=p;p=K;try{return $()}finally{p=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=p;p=$;try{return K()}finally{p=H}},t.unstable_scheduleCallback=function($,K,H){var se=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?se+H:se):H=se,$){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=H+_e,$={id:m++,callback:K,priorityLevel:$,startTime:H,expirationTime:_e,sortIndex:-1},H>se?($.sortIndex=H,e(d,$),r(u)===null&&$===r(d)&&(_?(T(x),x=-1):_=!0,le(S,H-se))):($.sortIndex=_e,e(u,$),j||I||(j=!0,G(D))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var K=p;return function(){var H=p;p=K;try{return $.apply(this,arguments)}finally{p=H}}}})(cv);lv.exports=cv;var Jb=lv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=O,Wt=Jb;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uv=new Set,qa={};function Cs(t,e){Ei(t,e),Ei(t+"Capture",e)}function Ei(t,e){for(qa[t]=e,t=0;t<e.length;t++)uv.add(e[t])}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=Object.prototype.hasOwnProperty,ek=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Xp={};function tk(t){return Rd.call(Xp,t)?!0:Rd.call(Yp,t)?!1:ek.test(t)?Xp[t]=!0:(Yp[t]=!0,!1)}function rk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nk(t,e,r,n){if(e===null||typeof e>"u"||rk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function sf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nf,sf);ut[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nf,sf);ut[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nf,sf);ut[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function af(t,e,r,n){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nk(e,r,s,n)&&(r=null),n||s===null?tk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var en=Zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zo=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),dv=Symbol.for("react.provider"),hv=Symbol.for("react.context"),lf=Symbol.for("react.forward_ref"),jd=Symbol.for("react.suspense"),Dd=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),fv=Symbol.for("react.offscreen"),Jp=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=Jp&&t[Jp]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Hu;function va(t){if(Hu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Hu=e&&e[1]||""}return`
`+Hu+t}var Gu=!1;function Ku(t,e){if(!t||Gu)return"";Gu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Gu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?va(t):""}function sk(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=Ku(t.type,!1),t;case 11:return t=Ku(t.type.render,!1),t;case 1:return t=Ku(t.type,!0),t;default:return""}}function Od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Js:return"Portal";case Pd:return"Profiler";case of:return"StrictMode";case jd:return"Suspense";case Dd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hv:return(t.displayName||"Context")+".Consumer";case dv:return(t._context.displayName||"Context")+".Provider";case lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cf:return e=t.displayName||null,e!==null?e:Od(t.type)||"Memo";case mn:e=t._payload,t=t._init;try{return Od(t(e))}catch{}}return null}function ik(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Od(e);case 8:return e===of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=mv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function el(t){t._valueTracker||(t._valueTracker=ak(t))}function pv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=mv(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ld(t,e){var r=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zp(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Fn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gv(t,e){e=e.checked,e!=null&&af(t,"checked",e,!1)}function Vd(t,e){gv(t,e);var r=Fn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Md(t,e.type,r):e.hasOwnProperty("defaultValue")&&Md(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Md(t,e,r){(e!=="number"||ql(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var xa=Array.isArray;function hi(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Fn(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(B(92));if(xa(r)){if(1<r.length)throw Error(B(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Fn(r)}}function yv(t,e){var r=Fn(e.value),n=Fn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tl,xv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tl=tl||document.createElement("div"),tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ok=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(t){ok.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Na[e]=Na[t]})});function _v(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Na.hasOwnProperty(t)&&Na[t]?(""+e).trim():e+"px"}function wv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=_v(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var lk=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $d(t,e){if(e){if(lk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=null;function uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qd=null,fi=null,mi=null;function ng(t){if(t=wo(t)){if(typeof qd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=zc(e),qd(t.stateNode,t.type,e))}}function Ev(t){fi?mi?mi.push(t):mi=[t]:fi=t}function bv(){if(fi){var t=fi,e=mi;if(mi=fi=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function kv(t,e){return t(e)}function Iv(){}var Qu=!1;function Tv(t,e,r){if(Qu)return t(e,r);Qu=!0;try{return kv(t,e,r)}finally{Qu=!1,(fi!==null||mi!==null)&&(Iv(),bv())}}function Ha(t,e){var r=t.stateNode;if(r===null)return null;var n=zc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(B(231,e,typeof r));return r}var Wd=!1;if(Wr)try{var da={};Object.defineProperty(da,"passive",{get:function(){Wd=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{Wd=!1}function ck(t,e,r,n,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(m){this.onError(m)}}var Aa=!1,Wl=null,Hl=!1,Hd=null,uk={onError:function(t){Aa=!0,Wl=t}};function dk(t,e,r,n,s,i,a,c,u){Aa=!1,Wl=null,ck.apply(uk,arguments)}function hk(t,e,r,n,s,i,a,c,u){if(dk.apply(this,arguments),Aa){if(Aa){var d=Wl;Aa=!1,Wl=null}else throw Error(B(198));Hl||(Hl=!0,Hd=d)}}function Rs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sg(t){if(Rs(t)!==t)throw Error(B(188))}function fk(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return sg(s),t;if(i===n)return sg(s),e;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,c=s.child;c;){if(c===r){a=!0,r=s,n=i;break}if(c===n){a=!0,n=s,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=s;break}if(c===n){a=!0,n=i,r=s;break}c=c.sibling}if(!a)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?t:e}function Nv(t){return t=fk(t),t!==null?Av(t):null}function Av(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Av(t);if(e!==null)return e;t=t.sibling}return null}var Cv=Wt.unstable_scheduleCallback,ig=Wt.unstable_cancelCallback,mk=Wt.unstable_shouldYield,pk=Wt.unstable_requestPaint,$e=Wt.unstable_now,gk=Wt.unstable_getCurrentPriorityLevel,df=Wt.unstable_ImmediatePriority,Rv=Wt.unstable_UserBlockingPriority,Gl=Wt.unstable_NormalPriority,yk=Wt.unstable_LowPriority,Pv=Wt.unstable_IdlePriority,Uc=null,br=null;function vk(t){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(Uc,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:wk,xk=Math.log,_k=Math.LN2;function wk(t){return t>>>=0,t===0?32:31-(xk(t)/_k|0)|0}var rl=64,nl=4194304;function _a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var c=a&~s;c!==0?n=_a(c):(i&=a,i!==0&&(n=_a(i)))}else a=r&~s,a!==0?n=_a(a):i!==0&&(n=_a(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-cr(e),s=1<<r,n|=t[r],e&=~s;return n}function Ek(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-cr(i),c=1<<a,u=s[a];u===-1?(!(c&r)||c&n)&&(s[a]=Ek(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jv(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function Yu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=r}function kk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-cr(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function hf(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-cr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var xe=0;function Dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ov,ff,Lv,Vv,Mv,Kd=!1,sl=[],Tn=null,Sn=null,Nn=null,Ga=new Map,Ka=new Map,gn=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ag(t,e){switch(t){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(e.pointerId)}}function ha(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wo(e),e!==null&&ff(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Tk(t,e,r,n,s){switch(e){case"focusin":return Tn=ha(Tn,t,e,r,n,s),!0;case"dragenter":return Sn=ha(Sn,t,e,r,n,s),!0;case"mouseover":return Nn=ha(Nn,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,ha(Ga.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,ha(Ka.get(i)||null,t,e,r,n,s)),!0}return!1}function Uv(t){var e=fs(t.target);if(e!==null){var r=Rs(e);if(r!==null){if(e=r.tag,e===13){if(e=Sv(r),e!==null){t.blockedOn=e,Mv(t.priority,function(){Lv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);zd=n,r.target.dispatchEvent(n),zd=null}else return e=wo(r),e!==null&&ff(e),t.blockedOn=r,!1;e.shift()}return!0}function og(t,e,r){Il(t)&&r.delete(e)}function Sk(){Kd=!1,Tn!==null&&Il(Tn)&&(Tn=null),Sn!==null&&Il(Sn)&&(Sn=null),Nn!==null&&Il(Nn)&&(Nn=null),Ga.forEach(og),Ka.forEach(og)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Kd||(Kd=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Sk)))}function Qa(t){function e(s){return fa(s,t)}if(0<sl.length){fa(sl[0],t);for(var r=1;r<sl.length;r++){var n=sl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Tn!==null&&fa(Tn,t),Sn!==null&&fa(Sn,t),Nn!==null&&fa(Nn,t),Ga.forEach(e),Ka.forEach(e),r=0;r<gn.length;r++)n=gn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<gn.length&&(r=gn[0],r.blockedOn===null);)Uv(r),r.blockedOn===null&&gn.shift()}var pi=en.ReactCurrentBatchConfig,Ql=!0;function Nk(t,e,r,n){var s=xe,i=pi.transition;pi.transition=null;try{xe=1,mf(t,e,r,n)}finally{xe=s,pi.transition=i}}function Ak(t,e,r,n){var s=xe,i=pi.transition;pi.transition=null;try{xe=4,mf(t,e,r,n)}finally{xe=s,pi.transition=i}}function mf(t,e,r,n){if(Ql){var s=Qd(t,e,r,n);if(s===null)ad(t,e,n,Yl,r),ag(t,n);else if(Tk(s,t,e,r,n))n.stopPropagation();else if(ag(t,n),e&4&&-1<Ik.indexOf(t)){for(;s!==null;){var i=wo(s);if(i!==null&&Ov(i),i=Qd(t,e,r,n),i===null&&ad(t,e,n,Yl,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ad(t,e,n,null,r)}}var Yl=null;function Qd(t,e,r,n){if(Yl=null,t=uf(n),t=fs(t),t!==null)if(e=Rs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Sv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yl=t,null}function Fv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gk()){case df:return 1;case Rv:return 4;case Gl:case yk:return 16;case Pv:return 536870912;default:return 16}default:return 16}}var En=null,pf=null,Tl=null;function $v(){if(Tl)return Tl;var t,e=pf,r=e.length,n,s="value"in En?En.value:En.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Tl=s.slice(t,1<n?1-n:void 0)}function Sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function il(){return!0}function lg(){return!1}function Gt(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?il:lg,this.isPropagationStopped=lg,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),e}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=Gt(Mi),_o=De({},Mi,{view:0,detail:0}),Ck=Gt(_o),Xu,Ju,ma,Fc=De({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Xu=t.screenX-ma.screenX,Ju=t.screenY-ma.screenY):Ju=Xu=0,ma=t),Xu)},movementY:function(t){return"movementY"in t?t.movementY:Ju}}),cg=Gt(Fc),Rk=De({},Fc,{dataTransfer:0}),Pk=Gt(Rk),jk=De({},_o,{relatedTarget:0}),Zu=Gt(jk),Dk=De({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ok=Gt(Dk),Lk=De({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vk=Gt(Lk),Mk=De({},Mi,{data:0}),ug=Gt(Mk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$k[t])?!!e[t]:!1}function yf(){return Bk}var zk=De({},_o,{key:function(t){if(t.key){var e=Uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yf,charCode:function(t){return t.type==="keypress"?Sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qk=Gt(zk),Wk=De({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dg=Gt(Wk),Hk=De({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yf}),Gk=Gt(Hk),Kk=De({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=Gt(Kk),Yk=De({},Fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xk=Gt(Yk),Jk=[9,13,27,32],vf=Wr&&"CompositionEvent"in window,Ca=null;Wr&&"documentMode"in document&&(Ca=document.documentMode);var Zk=Wr&&"TextEvent"in window&&!Ca,Bv=Wr&&(!vf||Ca&&8<Ca&&11>=Ca),hg=" ",fg=!1;function zv(t,e){switch(t){case"keyup":return Jk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function eI(t,e){switch(t){case"compositionend":return qv(e);case"keypress":return e.which!==32?null:(fg=!0,hg);case"textInput":return t=e.data,t===hg&&fg?null:t;default:return null}}function tI(t,e){if(ei)return t==="compositionend"||!vf&&zv(t,e)?(t=$v(),Tl=pf=En=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bv&&e.locale!=="ko"?null:e.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rI[t.type]:e==="textarea"}function Wv(t,e,r,n){Ev(n),e=Xl(e,"onChange"),0<e.length&&(r=new gf("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ra=null,Ya=null;function nI(t){rx(t,0)}function $c(t){var e=ni(t);if(pv(e))return t}function sI(t,e){if(t==="change")return e}var Hv=!1;if(Wr){var ed;if(Wr){var td="oninput"in document;if(!td){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),td=typeof pg.oninput=="function"}ed=td}else ed=!1;Hv=ed&&(!document.documentMode||9<document.documentMode)}function gg(){Ra&&(Ra.detachEvent("onpropertychange",Gv),Ya=Ra=null)}function Gv(t){if(t.propertyName==="value"&&$c(Ya)){var e=[];Wv(e,Ya,t,uf(t)),Tv(nI,e)}}function iI(t,e,r){t==="focusin"?(gg(),Ra=e,Ya=r,Ra.attachEvent("onpropertychange",Gv)):t==="focusout"&&gg()}function aI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(Ya)}function oI(t,e){if(t==="click")return $c(e)}function lI(t,e){if(t==="input"||t==="change")return $c(e)}function cI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:cI;function Xa(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rd.call(e,s)||!fr(t[s],e[s]))return!1}return!0}function yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var r=yg(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yg(r)}}function Kv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qv(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ql(t.document)}return e}function xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uI(t){var e=Qv(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Kv(r.ownerDocument.documentElement,r)){if(n!==null&&xf(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=vg(r,i);var a=vg(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dI=Wr&&"documentMode"in document&&11>=document.documentMode,ti=null,Yd=null,Pa=null,Xd=!1;function xg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xd||ti==null||ti!==ql(n)||(n=ti,"selectionStart"in n&&xf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pa&&Xa(Pa,n)||(Pa=n,n=Xl(Yd,"onSelect"),0<n.length&&(e=new gf("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ti)))}function al(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ri={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},rd={},Yv={};Wr&&(Yv=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Bc(t){if(rd[t])return rd[t];if(!ri[t])return t;var e=ri[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Yv)return rd[t]=e[r];return t}var Xv=Bc("animationend"),Jv=Bc("animationiteration"),Zv=Bc("animationstart"),ex=Bc("transitionend"),tx=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(t,e){tx.set(t,e),Cs(e,[t])}for(var nd=0;nd<_g.length;nd++){var sd=_g[nd],hI=sd.toLowerCase(),fI=sd[0].toUpperCase()+sd.slice(1);Yn(hI,"on"+fI)}Yn(Xv,"onAnimationEnd");Yn(Jv,"onAnimationIteration");Yn(Zv,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(ex,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function wg(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hk(n,e,void 0,t),t.currentTarget=null}function rx(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var c=n[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;wg(s,c,d),i=u}else for(a=0;a<n.length;a++){if(c=n[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;wg(s,c,d),i=u}}}if(Hl)throw t=Hd,Hl=!1,Hd=null,t}function Se(t,e){var r=e[rh];r===void 0&&(r=e[rh]=new Set);var n=t+"__bubble";r.has(n)||(nx(e,t,2,!1),r.add(n))}function id(t,e,r){var n=0;e&&(n|=4),nx(r,t,n,e)}var ol="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[ol]){t[ol]=!0,uv.forEach(function(r){r!=="selectionchange"&&(mI.has(r)||id(r,!1,t),id(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ol]||(e[ol]=!0,id("selectionchange",!1,e))}}function nx(t,e,r,n){switch(Fv(e)){case 1:var s=Nk;break;case 4:s=Ak;break;default:s=mf}r=s.bind(null,e,r,t),s=void 0,!Wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ad(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=fs(c),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}c=c.parentNode}}n=n.return}Tv(function(){var d=i,m=uf(r),f=[];e:{var p=tx.get(t);if(p!==void 0){var I=gf,j=t;switch(t){case"keypress":if(Sl(r)===0)break e;case"keydown":case"keyup":I=qk;break;case"focusin":j="focus",I=Zu;break;case"focusout":j="blur",I=Zu;break;case"beforeblur":case"afterblur":I=Zu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Pk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Gk;break;case Xv:case Jv:case Zv:I=Ok;break;case ex:I=Qk;break;case"scroll":I=Ck;break;case"wheel":I=Xk;break;case"copy":case"cut":case"paste":I=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=dg}var _=(e&4)!==0,R=!_&&t==="scroll",T=_?p!==null?p+"Capture":null:p;_=[];for(var y=d,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,T!==null&&(S=Ha(y,T),S!=null&&_.push(Za(y,S,w)))),R)break;y=y.return}0<_.length&&(p=new I(p,j,null,r,m),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",p&&r!==zd&&(j=r.relatedTarget||r.fromElement)&&(fs(j)||j[Hr]))break e;if((I||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,I?(j=r.relatedTarget||r.toElement,I=d,j=j?fs(j):null,j!==null&&(R=Rs(j),j!==R||j.tag!==5&&j.tag!==6)&&(j=null)):(I=null,j=d),I!==j)){if(_=cg,S="onMouseLeave",T="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=dg,S="onPointerLeave",T="onPointerEnter",y="pointer"),R=I==null?p:ni(I),w=j==null?p:ni(j),p=new _(S,y+"leave",I,r,m),p.target=R,p.relatedTarget=w,S=null,fs(m)===d&&(_=new _(T,y+"enter",j,r,m),_.target=w,_.relatedTarget=R,S=_),R=S,I&&j)t:{for(_=I,T=j,y=0,w=_;w;w=Gs(w))y++;for(w=0,S=T;S;S=Gs(S))w++;for(;0<y-w;)_=Gs(_),y--;for(;0<w-y;)T=Gs(T),w--;for(;y--;){if(_===T||T!==null&&_===T.alternate)break t;_=Gs(_),T=Gs(T)}_=null}else _=null;I!==null&&Eg(f,p,I,_,!1),j!==null&&R!==null&&Eg(f,R,j,_,!0)}}e:{if(p=d?ni(d):window,I=p.nodeName&&p.nodeName.toLowerCase(),I==="select"||I==="input"&&p.type==="file")var D=sI;else if(mg(p))if(Hv)D=lI;else{D=aI;var N=iI}else(I=p.nodeName)&&I.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=oI);if(D&&(D=D(t,d))){Wv(f,D,r,m);break e}N&&N(t,p,d),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Md(p,"number",p.value)}switch(N=d?ni(d):window,t){case"focusin":(mg(N)||N.contentEditable==="true")&&(ti=N,Yd=d,Pa=null);break;case"focusout":Pa=Yd=ti=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,xg(f,r,m);break;case"selectionchange":if(dI)break;case"keydown":case"keyup":xg(f,r,m)}var E;if(vf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ei?zv(t,r)&&(x="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(x="onCompositionStart");x&&(Bv&&r.locale!=="ko"&&(ei||x!=="onCompositionStart"?x==="onCompositionEnd"&&ei&&(E=$v()):(En=m,pf="value"in En?En.value:En.textContent,ei=!0)),N=Xl(d,x),0<N.length&&(x=new ug(x,t,null,r,m),f.push({event:x,listeners:N}),E?x.data=E:(E=qv(r),E!==null&&(x.data=E)))),(E=Zk?eI(t,r):tI(t,r))&&(d=Xl(d,"onBeforeInput"),0<d.length&&(m=new ug("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:d}),m.data=E))}rx(f,e)})}function Za(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Xl(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ha(t,r),i!=null&&n.unshift(Za(t,i,s)),i=Ha(t,e),i!=null&&n.push(Za(t,i,s))),t=t.return}return n}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var c=r,u=c.alternate,d=c.stateNode;if(u!==null&&u===n)break;c.tag===5&&d!==null&&(c=d,s?(u=Ha(r,i),u!=null&&a.unshift(Za(r,u,c))):s||(u=Ha(r,i),u!=null&&a.push(Za(r,u,c)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var pI=/\r\n?/g,gI=/\u0000|\uFFFD/g;function bg(t){return(typeof t=="string"?t:""+t).replace(pI,`
`).replace(gI,"")}function ll(t,e,r){if(e=bg(e),bg(t)!==e&&r)throw Error(B(425))}function Jl(){}var Jd=null,Zd=null;function eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,yI=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,vI=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(t){return kg.resolve(null).then(t).catch(xI)}:th;function xI(t){setTimeout(function(){throw t})}function od(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Qa(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qa(e)}function An(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ig(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),Er="__reactFiber$"+Ui,eo="__reactProps$"+Ui,Hr="__reactContainer$"+Ui,rh="__reactEvents$"+Ui,_I="__reactListeners$"+Ui,wI="__reactHandles$"+Ui;function fs(t){var e=t[Er];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Hr]||r[Er]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Ig(t);t!==null;){if(r=t[Er])return r;t=Ig(t)}return e}t=r,r=t.parentNode}return null}function wo(t){return t=t[Er]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function zc(t){return t[eo]||null}var nh=[],si=-1;function Xn(t){return{current:t}}function Ne(t){0>si||(t.current=nh[si],nh[si]=null,si--)}function Ie(t,e){si++,nh[si]=t.current,t.current=e}var $n={},xt=Xn($n),Dt=Xn(!1),xs=$n;function bi(t,e){var r=t.type.contextTypes;if(!r)return $n;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function Zl(){Ne(Dt),Ne(xt)}function Tg(t,e,r){if(xt.current!==$n)throw Error(B(168));Ie(xt,e),Ie(Dt,r)}function sx(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(B(108,ik(t)||"Unknown",s));return De({},r,n)}function ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,xs=xt.current,Ie(xt,t),Ie(Dt,Dt.current),!0}function Sg(t,e,r){var n=t.stateNode;if(!n)throw Error(B(169));r?(t=sx(t,e,xs),n.__reactInternalMemoizedMergedChildContext=t,Ne(Dt),Ne(xt),Ie(xt,t)):Ne(Dt),Ie(Dt,r)}var Lr=null,qc=!1,ld=!1;function ix(t){Lr===null?Lr=[t]:Lr.push(t)}function EI(t){qc=!0,ix(t)}function Jn(){if(!ld&&Lr!==null){ld=!0;var t=0,e=xe;try{var r=Lr;for(xe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Lr=null,qc=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),Cv(df,Jn),s}finally{xe=e,ld=!1}}return null}var ii=[],ai=0,tc=null,rc=0,Kt=[],Qt=0,_s=null,Vr=1,Mr="";function us(t,e){ii[ai++]=rc,ii[ai++]=tc,tc=t,rc=e}function ax(t,e,r){Kt[Qt++]=Vr,Kt[Qt++]=Mr,Kt[Qt++]=_s,_s=t;var n=Vr;t=Mr;var s=32-cr(n)-1;n&=~(1<<s),r+=1;var i=32-cr(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Vr=1<<32-cr(e)+s|r<<s|n,Mr=i+t}else Vr=1<<i|r<<s|n,Mr=t}function _f(t){t.return!==null&&(us(t,1),ax(t,1,0))}function wf(t){for(;t===tc;)tc=ii[--ai],ii[ai]=null,rc=ii[--ai],ii[ai]=null;for(;t===_s;)_s=Kt[--Qt],Kt[Qt]=null,Mr=Kt[--Qt],Kt[Qt]=null,Vr=Kt[--Qt],Kt[Qt]=null}var qt=null,Bt=null,Ce=!1,ar=null;function ox(t,e){var r=Yt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ng(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Bt=An(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=_s!==null?{id:Vr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,qt=t,Bt=null,!0):!1;default:return!1}}function sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ih(t){if(Ce){var e=Bt;if(e){var r=e;if(!Ng(t,e)){if(sh(t))throw Error(B(418));e=An(r.nextSibling);var n=qt;e&&Ng(t,e)?ox(n,r):(t.flags=t.flags&-4097|2,Ce=!1,qt=t)}}else{if(sh(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ce=!1,qt=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function cl(t){if(t!==qt)return!1;if(!Ce)return Ag(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eh(t.type,t.memoizedProps)),e&&(e=Bt)){if(sh(t))throw lx(),Error(B(418));for(;e;)ox(t,e),e=An(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bt=An(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=qt?An(t.stateNode.nextSibling):null;return!0}function lx(){for(var t=Bt;t;)t=An(t.nextSibling)}function ki(){Bt=qt=null,Ce=!1}function Ef(t){ar===null?ar=[t]:ar.push(t)}var bI=en.ReactCurrentBatchConfig;function pa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,t))}return t}function ul(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cg(t){var e=t._init;return e(t._payload)}function cx(t){function e(T,y){if(t){var w=T.deletions;w===null?(T.deletions=[y],T.flags|=16):w.push(y)}}function r(T,y){if(!t)return null;for(;y!==null;)e(T,y),y=y.sibling;return null}function n(T,y){for(T=new Map;y!==null;)y.key!==null?T.set(y.key,y):T.set(y.index,y),y=y.sibling;return T}function s(T,y){return T=jn(T,y),T.index=0,T.sibling=null,T}function i(T,y,w){return T.index=w,t?(w=T.alternate,w!==null?(w=w.index,w<y?(T.flags|=2,y):w):(T.flags|=2,y)):(T.flags|=1048576,y)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function c(T,y,w,S){return y===null||y.tag!==6?(y=pd(w,T.mode,S),y.return=T,y):(y=s(y,w),y.return=T,y)}function u(T,y,w,S){var D=w.type;return D===Zs?m(T,y,w.props.children,S,w.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===mn&&Cg(D)===y.type)?(S=s(y,w.props),S.ref=pa(T,y,w),S.return=T,S):(S=Dl(w.type,w.key,w.props,null,T.mode,S),S.ref=pa(T,y,w),S.return=T,S)}function d(T,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=gd(w,T.mode,S),y.return=T,y):(y=s(y,w.children||[]),y.return=T,y)}function m(T,y,w,S,D){return y===null||y.tag!==7?(y=vs(w,T.mode,S,D),y.return=T,y):(y=s(y,w),y.return=T,y)}function f(T,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=pd(""+y,T.mode,w),y.return=T,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zo:return w=Dl(y.type,y.key,y.props,null,T.mode,w),w.ref=pa(T,null,y),w.return=T,w;case Js:return y=gd(y,T.mode,w),y.return=T,y;case mn:var S=y._init;return f(T,S(y._payload),w)}if(xa(y)||ua(y))return y=vs(y,T.mode,w,null),y.return=T,y;ul(T,y)}return null}function p(T,y,w,S){var D=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:c(T,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zo:return w.key===D?u(T,y,w,S):null;case Js:return w.key===D?d(T,y,w,S):null;case mn:return D=w._init,p(T,y,D(w._payload),S)}if(xa(w)||ua(w))return D!==null?null:m(T,y,w,S,null);ul(T,w)}return null}function I(T,y,w,S,D){if(typeof S=="string"&&S!==""||typeof S=="number")return T=T.get(w)||null,c(y,T,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zo:return T=T.get(S.key===null?w:S.key)||null,u(y,T,S,D);case Js:return T=T.get(S.key===null?w:S.key)||null,d(y,T,S,D);case mn:var N=S._init;return I(T,y,w,N(S._payload),D)}if(xa(S)||ua(S))return T=T.get(w)||null,m(y,T,S,D,null);ul(y,S)}return null}function j(T,y,w,S){for(var D=null,N=null,E=y,x=y=0,v=null;E!==null&&x<w.length;x++){E.index>x?(v=E,E=null):v=E.sibling;var b=p(T,E,w[x],S);if(b===null){E===null&&(E=v);break}t&&E&&b.alternate===null&&e(T,E),y=i(b,y,x),N===null?D=b:N.sibling=b,N=b,E=v}if(x===w.length)return r(T,E),Ce&&us(T,x),D;if(E===null){for(;x<w.length;x++)E=f(T,w[x],S),E!==null&&(y=i(E,y,x),N===null?D=E:N.sibling=E,N=E);return Ce&&us(T,x),D}for(E=n(T,E);x<w.length;x++)v=I(E,T,x,w[x],S),v!==null&&(t&&v.alternate!==null&&E.delete(v.key===null?x:v.key),y=i(v,y,x),N===null?D=v:N.sibling=v,N=v);return t&&E.forEach(function(C){return e(T,C)}),Ce&&us(T,x),D}function _(T,y,w,S){var D=ua(w);if(typeof D!="function")throw Error(B(150));if(w=D.call(w),w==null)throw Error(B(151));for(var N=D=null,E=y,x=y=0,v=null,b=w.next();E!==null&&!b.done;x++,b=w.next()){E.index>x?(v=E,E=null):v=E.sibling;var C=p(T,E,b.value,S);if(C===null){E===null&&(E=v);break}t&&E&&C.alternate===null&&e(T,E),y=i(C,y,x),N===null?D=C:N.sibling=C,N=C,E=v}if(b.done)return r(T,E),Ce&&us(T,x),D;if(E===null){for(;!b.done;x++,b=w.next())b=f(T,b.value,S),b!==null&&(y=i(b,y,x),N===null?D=b:N.sibling=b,N=b);return Ce&&us(T,x),D}for(E=n(T,E);!b.done;x++,b=w.next())b=I(E,T,x,b.value,S),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?x:b.key),y=i(b,y,x),N===null?D=b:N.sibling=b,N=b);return t&&E.forEach(function(P){return e(T,P)}),Ce&&us(T,x),D}function R(T,y,w,S){if(typeof w=="object"&&w!==null&&w.type===Zs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zo:e:{for(var D=w.key,N=y;N!==null;){if(N.key===D){if(D=w.type,D===Zs){if(N.tag===7){r(T,N.sibling),y=s(N,w.props.children),y.return=T,T=y;break e}}else if(N.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===mn&&Cg(D)===N.type){r(T,N.sibling),y=s(N,w.props),y.ref=pa(T,N,w),y.return=T,T=y;break e}r(T,N);break}else e(T,N);N=N.sibling}w.type===Zs?(y=vs(w.props.children,T.mode,S,w.key),y.return=T,T=y):(S=Dl(w.type,w.key,w.props,null,T.mode,S),S.ref=pa(T,y,w),S.return=T,T=S)}return a(T);case Js:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(T,y.sibling),y=s(y,w.children||[]),y.return=T,T=y;break e}else{r(T,y);break}else e(T,y);y=y.sibling}y=gd(w,T.mode,S),y.return=T,T=y}return a(T);case mn:return N=w._init,R(T,y,N(w._payload),S)}if(xa(w))return j(T,y,w,S);if(ua(w))return _(T,y,w,S);ul(T,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(T,y.sibling),y=s(y,w),y.return=T,T=y):(r(T,y),y=pd(w,T.mode,S),y.return=T,T=y),a(T)):r(T,y)}return R}var Ii=cx(!0),ux=cx(!1),nc=Xn(null),sc=null,oi=null,bf=null;function kf(){bf=oi=sc=null}function If(t){var e=nc.current;Ne(nc),t._currentValue=e}function ah(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function gi(t,e){sc=t,bf=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(bf!==t)if(t={context:t,memoizedValue:e,next:null},oi===null){if(sc===null)throw Error(B(308));oi=t,sc.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return e}var ms=null;function Tf(t){ms===null?ms=[t]:ms.push(t)}function dx(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Tf(e)):(r.next=s.next,s.next=r),e.interleaved=r,Gr(t,n)}function Gr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var pn=!1;function Sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Gr(t,r)}return s=n.interleaved,s===null?(e.next=e,Tf(n)):(e.next=s.next,s.next=e),n.interleaved=e,Gr(t,r)}function Nl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hf(t,r)}}function Rg(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ic(t,e,r,n){var s=t.updateQueue;pn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;a=0,m=d=u=null,c=i;do{var p=c.lane,I=c.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=t,_=c;switch(p=e,I=r,_.tag){case 1:if(j=_.payload,typeof j=="function"){f=j.call(I,f,p);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=_.payload,p=typeof j=="function"?j.call(I,f,p):j,p==null)break e;f=De({},f,p);break e;case 2:pn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else I={eventTime:I,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=I,u=f):m=m.next=I,a|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Es|=a,t.lanes=a,t.memoizedState=f}}function Pg(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(B(191,s));s.call(n)}}}var Eo={},kr=Xn(Eo),to=Xn(Eo),ro=Xn(Eo);function ps(t){if(t===Eo)throw Error(B(174));return t}function Nf(t,e){switch(Ie(ro,e),Ie(to,t),Ie(kr,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fd(e,t)}Ne(kr),Ie(kr,e)}function Ti(){Ne(kr),Ne(to),Ne(ro)}function fx(t){ps(ro.current);var e=ps(kr.current),r=Fd(e,t.type);e!==r&&(Ie(to,t),Ie(kr,r))}function Af(t){to.current===t&&(Ne(kr),Ne(to))}var Re=Xn(0);function ac(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cd=[];function Cf(){for(var t=0;t<cd.length;t++)cd[t]._workInProgressVersionPrimary=null;cd.length=0}var Al=en.ReactCurrentDispatcher,ud=en.ReactCurrentBatchConfig,ws=0,je=null,Ye=null,rt=null,oc=!1,ja=!1,no=0,kI=0;function ht(){throw Error(B(321))}function Rf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fr(t[r],e[r]))return!1;return!0}function Pf(t,e,r,n,s,i){if(ws=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Al.current=t===null||t.memoizedState===null?NI:AI,t=r(n,s),ja){i=0;do{if(ja=!1,no=0,25<=i)throw Error(B(301));i+=1,rt=Ye=null,e.updateQueue=null,Al.current=CI,t=r(n,s)}while(ja)}if(Al.current=lc,e=Ye!==null&&Ye.next!==null,ws=0,rt=Ye=je=null,oc=!1,e)throw Error(B(300));return t}function jf(){var t=no!==0;return no=0,t}function _r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?je.memoizedState=rt=t:rt=rt.next=t,rt}function tr(){if(Ye===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=rt===null?je.memoizedState:rt.next;if(e!==null)rt=e,Ye=t;else{if(t===null)throw Error(B(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?je.memoizedState=rt=t:rt=rt.next=t}return rt}function so(t,e){return typeof e=="function"?e(t):e}function dd(t){var e=tr(),r=e.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=t;var n=Ye,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var c=a=null,u=null,d=i;do{var m=d.lane;if((ws&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,a=n):u=u.next=f,je.lanes|=m,Es|=m}d=d.next}while(d!==null&&d!==i);u===null?a=n:u.next=c,fr(n,e.memoizedState)||(jt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,Es|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function hd(t){var e=tr(),r=e.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);fr(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function mx(){}function px(t,e){var r=je,n=tr(),s=e(),i=!fr(n.memoizedState,s);if(i&&(n.memoizedState=s,jt=!0),n=n.queue,Df(vx.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(r.flags|=2048,io(9,yx.bind(null,r,n,s,e),void 0,null),st===null)throw Error(B(349));ws&30||gx(r,e,s)}return s}function gx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yx(t,e,r,n){e.value=r,e.getSnapshot=n,xx(e)&&_x(t)}function vx(t,e,r){return r(function(){xx(e)&&_x(t)})}function xx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fr(t,r)}catch{return!0}}function _x(t){var e=Gr(t,1);e!==null&&ur(e,t,1,-1)}function jg(t){var e=_r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:t},e.queue=t,t=t.dispatch=SI.bind(null,je,t),[e.memoizedState,t]}function io(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function wx(){return tr().memoizedState}function Cl(t,e,r,n){var s=_r();je.flags|=t,s.memoizedState=io(1|e,r,void 0,n===void 0?null:n)}function Wc(t,e,r,n){var s=tr();n=n===void 0?null:n;var i=void 0;if(Ye!==null){var a=Ye.memoizedState;if(i=a.destroy,n!==null&&Rf(n,a.deps)){s.memoizedState=io(e,r,i,n);return}}je.flags|=t,s.memoizedState=io(1|e,r,i,n)}function Dg(t,e){return Cl(8390656,8,t,e)}function Df(t,e){return Wc(2048,8,t,e)}function Ex(t,e){return Wc(4,2,t,e)}function bx(t,e){return Wc(4,4,t,e)}function kx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ix(t,e,r){return r=r!=null?r.concat([t]):null,Wc(4,4,kx.bind(null,e,t),r)}function Of(){}function Tx(t,e){var r=tr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rf(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Sx(t,e){var r=tr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rf(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Nx(t,e,r){return ws&21?(fr(r,e)||(r=jv(),je.lanes|=r,Es|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=r)}function II(t,e){var r=xe;xe=r!==0&&4>r?r:4,t(!0);var n=ud.transition;ud.transition={};try{t(!1),e()}finally{xe=r,ud.transition=n}}function Ax(){return tr().memoizedState}function TI(t,e,r){var n=Pn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Cx(t))Rx(e,r);else if(r=dx(t,e,r,n),r!==null){var s=It();ur(r,t,n,s),Px(r,e,n)}}function SI(t,e,r){var n=Pn(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cx(t))Rx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,r);if(s.hasEagerState=!0,s.eagerState=c,fr(c,a)){var u=e.interleaved;u===null?(s.next=s,Tf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=dx(t,e,s,n),r!==null&&(s=It(),ur(r,t,n,s),Px(r,e,n))}}function Cx(t){var e=t.alternate;return t===je||e!==null&&e===je}function Rx(t,e){ja=oc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Px(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hf(t,r)}}var lc={readContext:er,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},NI={readContext:er,useCallback:function(t,e){return _r().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Dg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Cl(4194308,4,kx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cl(4,2,t,e)},useMemo:function(t,e){var r=_r();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_r();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=TI.bind(null,je,t),[n.memoizedState,t]},useRef:function(t){var e=_r();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:Of,useDeferredValue:function(t){return _r().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=II.bind(null,t[1]),_r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=je,s=_r();if(Ce){if(r===void 0)throw Error(B(407));r=r()}else{if(r=e(),st===null)throw Error(B(349));ws&30||gx(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Dg(vx.bind(null,n,i,t),[t]),n.flags|=2048,io(9,yx.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=_r(),e=st.identifierPrefix;if(Ce){var r=Mr,n=Vr;r=(n&~(1<<32-cr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=no++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=kI++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AI={readContext:er,useCallback:Tx,useContext:er,useEffect:Df,useImperativeHandle:Ix,useInsertionEffect:Ex,useLayoutEffect:bx,useMemo:Sx,useReducer:dd,useRef:wx,useState:function(){return dd(so)},useDebugValue:Of,useDeferredValue:function(t){var e=tr();return Nx(e,Ye.memoizedState,t)},useTransition:function(){var t=dd(so)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mx,useSyncExternalStore:px,useId:Ax,unstable_isNewReconciler:!1},CI={readContext:er,useCallback:Tx,useContext:er,useEffect:Df,useImperativeHandle:Ix,useInsertionEffect:Ex,useLayoutEffect:bx,useMemo:Sx,useReducer:hd,useRef:wx,useState:function(){return hd(so)},useDebugValue:Of,useDeferredValue:function(t){var e=tr();return Ye===null?e.memoizedState=t:Nx(e,Ye.memoizedState,t)},useTransition:function(){var t=hd(so)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mx,useSyncExternalStore:px,useId:Ax,unstable_isNewReconciler:!1};function sr(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function oh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:De({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Hc={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=It(),s=Pn(t),i=$r(n,s);i.payload=e,r!=null&&(i.callback=r),e=Cn(t,i,s),e!==null&&(ur(e,t,s,n),Nl(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=It(),s=Pn(t),i=$r(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Cn(t,i,s),e!==null&&(ur(e,t,s,n),Nl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=It(),n=Pn(t),s=$r(r,n);s.tag=2,e!=null&&(s.callback=e),e=Cn(t,s,n),e!==null&&(ur(e,t,n,r),Nl(e,t,n))}};function Og(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Xa(r,n)||!Xa(s,i):!0}function jx(t,e,r){var n=!1,s=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=Ot(e)?xs:xt.current,n=e.contextTypes,i=(n=n!=null)?bi(t,s):$n),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Lg(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Hc.enqueueReplaceState(e,e.state,null)}function lh(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Sf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=Ot(e)?xs:xt.current,s.context=bi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oh(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hc.enqueueReplaceState(s,s.state,null),ic(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Si(t,e){try{var r="",n=e;do r+=sk(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ch(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var RI=typeof WeakMap=="function"?WeakMap:Map;function Dx(t,e,r){r=$r(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){uc||(uc=!0,xh=n),ch(t,e)},r}function Ox(t,e,r){r=$r(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){ch(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ch(t,e),typeof n!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Vg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new RI;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=WI.bind(null,t,e,r),e.then(t,t))}function Mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ug(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=$r(-1,1),e.tag=2,Cn(r,e,1))),r.lanes|=1),t)}var PI=en.ReactCurrentOwner,jt=!1;function kt(t,e,r,n){e.child=t===null?ux(e,null,r,n):Ii(e,t.child,r,n)}function Fg(t,e,r,n,s){r=r.render;var i=e.ref;return gi(e,s),n=Pf(t,e,r,n,i,s),r=jf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kr(t,e,s)):(Ce&&r&&_f(e),e.flags|=1,kt(t,e,n,s),e.child)}function $g(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!zf(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Lx(t,e,i,n,s)):(t=Dl(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xa,r(a,n)&&t.ref===e.ref)return Kr(t,e,s)}return e.flags|=1,t=jn(i,n),t.ref=e.ref,t.return=e,e.child=t}function Lx(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Xa(i,n)&&t.ref===e.ref)if(jt=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Kr(t,e,s)}return uh(t,e,r,n,s)}function Vx(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ci,Ut),Ut|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ci,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ie(ci,Ut),Ut|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Ie(ci,Ut),Ut|=n;return kt(t,e,s,r),e.child}function Mx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function uh(t,e,r,n,s){var i=Ot(r)?xs:xt.current;return i=bi(e,i),gi(e,s),r=Pf(t,e,r,n,i,s),n=jf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kr(t,e,s)):(Ce&&n&&_f(e),e.flags|=1,kt(t,e,r,s),e.child)}function Bg(t,e,r,n,s){if(Ot(r)){var i=!0;ec(e)}else i=!1;if(gi(e,s),e.stateNode===null)Rl(t,e),jx(e,r,n),lh(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=er(d):(d=Ot(r)?xs:xt.current,d=bi(e,d));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||u!==d)&&Lg(e,a,n,d),pn=!1;var p=e.memoizedState;a.state=p,ic(e,n,a,s),u=e.memoizedState,c!==n||p!==u||Dt.current||pn?(typeof m=="function"&&(oh(e,r,m,n),u=e.memoizedState),(c=pn||Og(e,r,c,n,p,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=d,n=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,hx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:sr(e.type,c),a.props=d,f=e.pendingProps,p=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=er(u):(u=Ot(r)?xs:xt.current,u=bi(e,u));var I=r.getDerivedStateFromProps;(m=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==f||p!==u)&&Lg(e,a,n,u),pn=!1,p=e.memoizedState,a.state=p,ic(e,n,a,s);var j=e.memoizedState;c!==f||p!==j||Dt.current||pn?(typeof I=="function"&&(oh(e,r,I,n),j=e.memoizedState),(d=pn||Og(e,r,d,n,p,j,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,j,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=j),a.props=n,a.state=j,a.context=u,n=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return dh(t,e,r,n,i,s)}function dh(t,e,r,n,s,i){Mx(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Sg(e,r,!1),Kr(t,e,i);n=e.stateNode,PI.current=e;var c=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ii(e,t.child,null,i),e.child=Ii(e,null,c,i)):kt(t,e,c,i),e.memoizedState=n.state,s&&Sg(e,r,!0),e.child}function Ux(t){var e=t.stateNode;e.pendingContext?Tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tg(t,e.context,!1),Nf(t,e.containerInfo)}function zg(t,e,r,n,s){return ki(),Ef(s),e.flags|=256,kt(t,e,r,n),e.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fx(t,e,r){var n=e.pendingProps,s=Re.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Re,s&1),t===null)return ih(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Qc(a,n,0,null),t=vs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fh(r),e.memoizedState=hh,t):Lf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return jI(t,e,a,n,c,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=jn(s,u),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=jn(c,i):(i=vs(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?fh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=hh,n}return i=t.child,t=i.sibling,n=jn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Lf(t,e){return e=Qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dl(t,e,r,n){return n!==null&&Ef(n),Ii(e,t.child,null,r),t=Lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jI(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=fd(Error(B(422))),dl(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Qc({mode:"visible",children:n.children},s,0,null),i=vs(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ii(e,t.child,null,a),e.child.memoizedState=fh(a),e.memoizedState=hh,i);if(!(e.mode&1))return dl(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(B(419)),n=fd(i,n,void 0),dl(t,e,a,n)}if(c=(a&t.childLanes)!==0,jt||c){if(n=st,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gr(t,s),ur(n,t,s,-1))}return Bf(),n=fd(Error(B(421))),dl(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=An(s.nextSibling),qt=e,Ce=!0,ar=null,t!==null&&(Kt[Qt++]=Vr,Kt[Qt++]=Mr,Kt[Qt++]=_s,Vr=t.id,Mr=t.overflow,_s=e),e=Lf(e,n.children),e.flags|=4096,e)}function qg(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ah(t.return,e,r)}function md(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function $x(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(kt(t,e,n.children,r),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,r,e);else if(t.tag===19)qg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ie(Re,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ac(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),md(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ac(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}md(e,!0,r,null,i);break;case"together":md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,r=jn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=jn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function DI(t,e,r){switch(e.tag){case 3:Ux(e),ki();break;case 5:fx(e);break;case 1:Ot(e.type)&&ec(e);break;case 4:Nf(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ie(nc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ie(Re,Re.current&1),e.flags|=128,null):r&e.child.childLanes?Fx(t,e,r):(Ie(Re,Re.current&1),t=Kr(t,e,r),t!==null?t.sibling:null);Ie(Re,Re.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return $x(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,Vx(t,e,r)}return Kr(t,e,r)}var Bx,mh,zx,qx;Bx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mh=function(){};zx=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ps(kr.current);var i=null;switch(r){case"input":s=Ld(t,s),n=Ld(t,n),i=[];break;case"select":s=De({},s,{value:void 0}),n=De({},n,{value:void 0}),i=[];break;case"textarea":s=Ud(t,s),n=Ud(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Jl)}$d(r,n);var a;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var u=n[d];if(c=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};qx=function(t,e,r,n){r!==n&&(e.flags|=4)};function ga(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function OI(t,e,r){var n=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Ot(e.type)&&Zl(),ft(e),null;case 3:return n=e.stateNode,Ti(),Ne(Dt),Ne(xt),Cf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(Eh(ar),ar=null))),mh(t,e),ft(e),null;case 5:Af(e);var s=ps(ro.current);if(r=e.type,t!==null&&e.stateNode!=null)zx(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(B(166));return ft(e),null}if(t=ps(kr.current),cl(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Er]=e,n[eo]=i,t=(e.mode&1)!==0,r){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(s=0;s<wa.length;s++)Se(wa[s],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":Zp(n,i),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Se("invalid",n);break;case"textarea":tg(n,i),Se("invalid",n)}$d(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&ll(n.textContent,c,t),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&ll(n.textContent,c,t),s=["children",""+c]):qa.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Se("scroll",n)}switch(r){case"input":el(n),eg(n,i,!0);break;case"textarea":el(n),rg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Jl)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Er]=e,t[eo]=n,Bx(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bd(r,n),r){case"dialog":Se("cancel",t),Se("close",t),s=n;break;case"iframe":case"object":case"embed":Se("load",t),s=n;break;case"video":case"audio":for(s=0;s<wa.length;s++)Se(wa[s],t);s=n;break;case"source":Se("error",t),s=n;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=n;break;case"details":Se("toggle",t),s=n;break;case"input":Zp(t,n),s=Ld(t,n),Se("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=De({},n,{value:void 0}),Se("invalid",t);break;case"textarea":tg(t,n),s=Ud(t,n),Se("invalid",t);break;default:s=n}$d(r,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?wv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xv(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Wa(t,u):typeof u=="number"&&Wa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",t):u!=null&&af(t,i,u,a))}switch(r){case"input":el(t),eg(t,n,!1);break;case"textarea":el(t),rg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Fn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?hi(t,!!n.multiple,i,!1):n.defaultValue!=null&&hi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)qx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(B(166));if(r=ps(ro.current),ps(kr.current),cl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Er]=e,(i=n.nodeValue!==r)&&(t=qt,t!==null))switch(t.tag){case 3:ll(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ll(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Er]=e,e.stateNode=n}return ft(e),null;case 13:if(Ne(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Bt!==null&&e.mode&1&&!(e.flags&128))lx(),ki(),e.flags|=98560,i=!1;else if(i=cl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Er]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else ar!==null&&(Eh(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Je===0&&(Je=3):Bf())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Ti(),mh(t,e),t===null&&Ja(e.stateNode.containerInfo),ft(e),null;case 10:return If(e.type._context),ft(e),null;case 17:return Ot(e.type)&&Zl(),ft(e),null;case 19:if(Ne(Re),i=e.memoizedState,i===null)return ft(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)ga(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ac(t),a!==null){for(e.flags|=128,ga(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ie(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>Ni&&(e.flags|=128,n=!0,ga(i,!1),e.lanes=4194304)}else{if(!n)if(t=ac(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ce)return ft(e),null}else 2*$e()-i.renderingStartTime>Ni&&r!==1073741824&&(e.flags|=128,n=!0,ga(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,r=Re.current,Ie(Re,n?r&1|2:r&1),e):(ft(e),null);case 22:case 23:return $f(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ut&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function LI(t,e){switch(wf(e),e.tag){case 1:return Ot(e.type)&&Zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),Ne(Dt),Ne(xt),Cf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Af(e),null;case 13:if(Ne(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Re),null;case 4:return Ti(),null;case 10:return If(e.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var hl=!1,gt=!1,VI=typeof WeakSet=="function"?WeakSet:Set,X=null;function li(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(t,e,n)}else r.current=null}function ph(t,e,r){try{r()}catch(n){Ve(t,e,n)}}var Wg=!1;function MI(t,e){if(Jd=Ql,t=Qv(),xf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,c=-1,u=-1,d=0,m=0,f=t,p=null;t:for(;;){for(var I;f!==r||s!==0&&f.nodeType!==3||(c=a+s),f!==i||n!==0&&f.nodeType!==3||(u=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(I=f.firstChild)!==null;)p=f,f=I;for(;;){if(f===t)break t;if(p===r&&++d===s&&(c=a),p===i&&++m===n&&(u=a),(I=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=I}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zd={focusedElem:t,selectionRange:r},Ql=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var _=j.memoizedProps,R=j.memoizedState,T=e.stateNode,y=T.getSnapshotBeforeUpdate(e.elementType===e.type?_:sr(e.type,_),R);T.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(S){Ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return j=Wg,Wg=!1,j}function Da(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ph(e,r,i)}s=s.next}while(s!==n)}}function Gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function gh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Wx(t){var e=t.alternate;e!==null&&(t.alternate=null,Wx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[eo],delete e[rh],delete e[_I],delete e[wI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hx(t){return t.tag===5||t.tag===3||t.tag===4}function Hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Jl));else if(n!==4&&(t=t.child,t!==null))for(yh(t,e,r),t=t.sibling;t!==null;)yh(t,e,r),t=t.sibling}function vh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vh(t,e,r),t=t.sibling;t!==null;)vh(t,e,r),t=t.sibling}var at=null,ir=!1;function hn(t,e,r){for(r=r.child;r!==null;)Gx(t,e,r),r=r.sibling}function Gx(t,e,r){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(Uc,r)}catch{}switch(r.tag){case 5:gt||li(r,e);case 6:var n=at,s=ir;at=null,hn(t,e,r),at=n,ir=s,at!==null&&(ir?(t=at,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):at.removeChild(r.stateNode));break;case 18:at!==null&&(ir?(t=at,r=r.stateNode,t.nodeType===8?od(t.parentNode,r):t.nodeType===1&&od(t,r),Qa(t)):od(at,r.stateNode));break;case 4:n=at,s=ir,at=r.stateNode.containerInfo,ir=!0,hn(t,e,r),at=n,ir=s;break;case 0:case 11:case 14:case 15:if(!gt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ph(r,e,a),s=s.next}while(s!==n)}hn(t,e,r);break;case 1:if(!gt&&(li(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Ve(r,e,c)}hn(t,e,r);break;case 21:hn(t,e,r);break;case 22:r.mode&1?(gt=(n=gt)||r.memoizedState!==null,hn(t,e,r),gt=n):hn(t,e,r);break;default:hn(t,e,r)}}function Gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new VI),e.forEach(function(n){var s=GI.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function nr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:at=c.stateNode,ir=!1;break e;case 3:at=c.stateNode.containerInfo,ir=!0;break e;case 4:at=c.stateNode.containerInfo,ir=!0;break e}c=c.return}if(at===null)throw Error(B(160));Gx(i,a,s),at=null,ir=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ve(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kx(e,t),e=e.sibling}function Kx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),xr(t),n&4){try{Da(3,t,t.return),Gc(3,t)}catch(_){Ve(t,t.return,_)}try{Da(5,t,t.return)}catch(_){Ve(t,t.return,_)}}break;case 1:nr(e,t),xr(t),n&512&&r!==null&&li(r,r.return);break;case 5:if(nr(e,t),xr(t),n&512&&r!==null&&li(r,r.return),t.flags&32){var s=t.stateNode;try{Wa(s,"")}catch(_){Ve(t,t.return,_)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&gv(s,i),Bd(c,a);var d=Bd(c,i);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?wv(s,f):m==="dangerouslySetInnerHTML"?xv(s,f):m==="children"?Wa(s,f):af(s,m,f,d)}switch(c){case"input":Vd(s,i);break;case"textarea":yv(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?hi(s,!!i.multiple,I,!1):p!==!!i.multiple&&(i.defaultValue!=null?hi(s,!!i.multiple,i.defaultValue,!0):hi(s,!!i.multiple,i.multiple?[]:"",!1))}s[eo]=i}catch(_){Ve(t,t.return,_)}}break;case 6:if(nr(e,t),xr(t),n&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Ve(t,t.return,_)}}break;case 3:if(nr(e,t),xr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qa(e.containerInfo)}catch(_){Ve(t,t.return,_)}break;case 4:nr(e,t),xr(t);break;case 13:nr(e,t),xr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Uf=$e())),n&4&&Gg(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(gt=(d=gt)||m,nr(e,t),gt=d):nr(e,t),xr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(f=X=m;X!==null;){switch(p=X,I=p.child,p.tag){case 0:case 11:case 14:case 15:Da(4,p,p.return);break;case 1:li(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(_){Ve(n,r,_)}}break;case 5:li(p,p.return);break;case 22:if(p.memoizedState!==null){Qg(f);continue}}I!==null?(I.return=p,X=I):Qg(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=_v("display",a))}catch(_){Ve(t,t.return,_)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){Ve(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nr(e,t),xr(t),n&4&&Gg(t);break;case 21:break;default:nr(e,t),xr(t)}}function xr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Hx(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Wa(s,""),n.flags&=-33);var i=Hg(t);vh(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,c=Hg(t);yh(t,c,a);break;default:throw Error(B(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UI(t,e,r){X=t,Qx(t)}function Qx(t,e,r){for(var n=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||hl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||gt;c=hl;var d=gt;if(hl=a,(gt=u)&&!d)for(X=s;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?Yg(s):u!==null?(u.return=a,X=u):Yg(s);for(;i!==null;)X=i,Qx(i),i=i.sibling;X=s,hl=c,gt=d}Kg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Kg(t)}}function Kg(t){for(;X!==null;){var e=X;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Gc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!gt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:sr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pg(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Pg(e,a,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Qa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}gt||e.flags&512&&gh(e)}catch(p){Ve(e,e.return,p)}}if(e===t){X=null;break}if(r=e.sibling,r!==null){r.return=e.return,X=r;break}X=e.return}}function Qg(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var r=e.sibling;if(r!==null){r.return=e.return,X=r;break}X=e.return}}function Yg(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gc(4,e)}catch(u){Ve(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{gh(e)}catch(u){Ve(e,i,u)}break;case 5:var a=e.return;try{gh(e)}catch(u){Ve(e,a,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var FI=Math.ceil,cc=en.ReactCurrentDispatcher,Vf=en.ReactCurrentOwner,Xt=en.ReactCurrentBatchConfig,ge=0,st=null,qe=null,ct=0,Ut=0,ci=Xn(0),Je=0,ao=null,Es=0,Kc=0,Mf=0,Oa=null,Rt=null,Uf=0,Ni=1/0,Or=null,uc=!1,xh=null,Rn=null,fl=!1,bn=null,dc=0,La=0,_h=null,Pl=-1,jl=0;function It(){return ge&6?$e():Pl!==-1?Pl:Pl=$e()}function Pn(t){return t.mode&1?ge&2&&ct!==0?ct&-ct:bI.transition!==null?(jl===0&&(jl=jv()),jl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:Fv(t.type)),t):1}function ur(t,e,r,n){if(50<La)throw La=0,_h=null,Error(B(185));xo(t,r,n),(!(ge&2)||t!==st)&&(t===st&&(!(ge&2)&&(Kc|=r),Je===4&&yn(t,ct)),Lt(t,n),r===1&&ge===0&&!(e.mode&1)&&(Ni=$e()+500,qc&&Jn()))}function Lt(t,e){var r=t.callbackNode;bk(t,e);var n=Kl(t,t===st?ct:0);if(n===0)r!==null&&ig(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&ig(r),e===1)t.tag===0?EI(Xg.bind(null,t)):ix(Xg.bind(null,t)),vI(function(){!(ge&6)&&Jn()}),r=null;else{switch(Dv(n)){case 1:r=df;break;case 4:r=Rv;break;case 16:r=Gl;break;case 536870912:r=Pv;break;default:r=Gl}r=n_(r,Yx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Yx(t,e){if(Pl=-1,jl=0,ge&6)throw Error(B(327));var r=t.callbackNode;if(yi()&&t.callbackNode!==r)return null;var n=Kl(t,t===st?ct:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=hc(t,n);else{e=n;var s=ge;ge|=2;var i=Jx();(st!==t||ct!==e)&&(Or=null,Ni=$e()+500,ys(t,e));do try{zI();break}catch(c){Xx(t,c)}while(!0);kf(),cc.current=i,ge=s,qe!==null?e=0:(st=null,ct=0,e=Je)}if(e!==0){if(e===2&&(s=Gd(t),s!==0&&(n=s,e=wh(t,s))),e===1)throw r=ao,ys(t,0),yn(t,n),Lt(t,$e()),r;if(e===6)yn(t,n);else{if(s=t.current.alternate,!(n&30)&&!$I(s)&&(e=hc(t,n),e===2&&(i=Gd(t),i!==0&&(n=i,e=wh(t,i))),e===1))throw r=ao,ys(t,0),yn(t,n),Lt(t,$e()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(B(345));case 2:ds(t,Rt,Or);break;case 3:if(yn(t,n),(n&130023424)===n&&(e=Uf+500-$e(),10<e)){if(Kl(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=th(ds.bind(null,t,Rt,Or),e);break}ds(t,Rt,Or);break;case 4:if(yn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-cr(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=$e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*FI(n/1960))-n,10<n){t.timeoutHandle=th(ds.bind(null,t,Rt,Or),n);break}ds(t,Rt,Or);break;case 5:ds(t,Rt,Or);break;default:throw Error(B(329))}}}return Lt(t,$e()),t.callbackNode===r?Yx.bind(null,t):null}function wh(t,e){var r=Oa;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=hc(t,e),t!==2&&(e=Rt,Rt=r,e!==null&&Eh(e)),t}function Eh(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function $I(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~Mf,e&=~Kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-cr(e),n=1<<r;t[r]=-1,e&=~n}}function Xg(t){if(ge&6)throw Error(B(327));yi();var e=Kl(t,0);if(!(e&1))return Lt(t,$e()),null;var r=hc(t,e);if(t.tag!==0&&r===2){var n=Gd(t);n!==0&&(e=n,r=wh(t,n))}if(r===1)throw r=ao,ys(t,0),yn(t,e),Lt(t,$e()),r;if(r===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Rt,Or),Lt(t,$e()),null}function Ff(t,e){var r=ge;ge|=1;try{return t(e)}finally{ge=r,ge===0&&(Ni=$e()+500,qc&&Jn())}}function bs(t){bn!==null&&bn.tag===0&&!(ge&6)&&yi();var e=ge;ge|=1;var r=Xt.transition,n=xe;try{if(Xt.transition=null,xe=1,t)return t()}finally{xe=n,Xt.transition=r,ge=e,!(ge&6)&&Jn()}}function $f(){Ut=ci.current,Ne(ci)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yI(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(wf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zl();break;case 3:Ti(),Ne(Dt),Ne(xt),Cf();break;case 5:Af(n);break;case 4:Ti();break;case 13:Ne(Re);break;case 19:Ne(Re);break;case 10:If(n.type._context);break;case 22:case 23:$f()}r=r.return}if(st=t,qe=t=jn(t.current,null),ct=Ut=e,Je=0,ao=null,Mf=Kc=Es=0,Rt=Oa=null,ms!==null){for(e=0;e<ms.length;e++)if(r=ms[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}ms=null}return t}function Xx(t,e){do{var r=qe;try{if(kf(),Al.current=lc,oc){for(var n=je.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}oc=!1}if(ws=0,rt=Ye=je=null,ja=!1,no=0,Vf.current=null,r===null||r.return===null){Je=1,ao=e,qe=null;break}e:{var i=t,a=r.return,c=r,u=e;if(e=ct,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=Mg(a);if(I!==null){I.flags&=-257,Ug(I,a,c,i,e),I.mode&1&&Vg(i,d,e),e=I,u=d;var j=e.updateQueue;if(j===null){var _=new Set;_.add(u),e.updateQueue=_}else j.add(u);break e}else{if(!(e&1)){Vg(i,d,e),Bf();break e}u=Error(B(426))}}else if(Ce&&c.mode&1){var R=Mg(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Ug(R,a,c,i,e),Ef(Si(u,c));break e}}i=u=Si(u,c),Je!==4&&(Je=2),Oa===null?Oa=[i]:Oa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Dx(i,u,e);Rg(i,T);break e;case 1:c=u;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Rn===null||!Rn.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Ox(i,c,e);Rg(i,S);break e}}i=i.return}while(i!==null)}e_(r)}catch(D){e=D,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function Jx(){var t=cc.current;return cc.current=lc,t===null?lc:t}function Bf(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(Es&268435455)&&!(Kc&268435455)||yn(st,ct)}function hc(t,e){var r=ge;ge|=2;var n=Jx();(st!==t||ct!==e)&&(Or=null,ys(t,e));do try{BI();break}catch(s){Xx(t,s)}while(!0);if(kf(),ge=r,cc.current=n,qe!==null)throw Error(B(261));return st=null,ct=0,Je}function BI(){for(;qe!==null;)Zx(qe)}function zI(){for(;qe!==null&&!mk();)Zx(qe)}function Zx(t){var e=r_(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?e_(t):qe=e,Vf.current=null}function e_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=LI(r,e),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,qe=null;return}}else if(r=OI(r,e,Ut),r!==null){qe=r;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Je===0&&(Je=5)}function ds(t,e,r){var n=xe,s=Xt.transition;try{Xt.transition=null,xe=1,qI(t,e,r,n)}finally{Xt.transition=s,xe=n}return null}function qI(t,e,r,n){do yi();while(bn!==null);if(ge&6)throw Error(B(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(kk(t,i),t===st&&(qe=st=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fl||(fl=!0,n_(Gl,function(){return yi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var a=xe;xe=1;var c=ge;ge|=4,Vf.current=null,MI(t,r),Kx(r,t),uI(Zd),Ql=!!Jd,Zd=Jd=null,t.current=r,UI(r),pk(),ge=c,xe=a,Xt.transition=i}else t.current=r;if(fl&&(fl=!1,bn=t,dc=s),i=t.pendingLanes,i===0&&(Rn=null),vk(r.stateNode),Lt(t,$e()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(uc)throw uc=!1,t=xh,xh=null,t;return dc&1&&t.tag!==0&&yi(),i=t.pendingLanes,i&1?t===_h?La++:(La=0,_h=t):La=0,Jn(),null}function yi(){if(bn!==null){var t=Dv(dc),e=Xt.transition,r=xe;try{if(Xt.transition=null,xe=16>t?16:t,bn===null)var n=!1;else{if(t=bn,bn=null,dc=0,ge&6)throw Error(B(331));var s=ge;for(ge|=4,X=t.current;X!==null;){var i=X,a=i.child;if(X.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(X=d;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:Da(8,m,i)}var f=m.child;if(f!==null)f.return=m,X=f;else for(;X!==null;){m=X;var p=m.sibling,I=m.return;if(Wx(m),m===d){X=null;break}if(p!==null){p.return=I,X=p;break}X=I}}}var j=i.alternate;if(j!==null){var _=j.child;if(_!==null){j.child=null;do{var R=_.sibling;_.sibling=null,_=R}while(_!==null)}}X=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,X=a;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Da(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,X=T;break e}X=i.return}}var y=t.current;for(X=y;X!==null;){a=X;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,X=w;else e:for(a=y;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Gc(9,c)}}catch(D){Ve(c,c.return,D)}if(c===a){X=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,X=S;break e}X=c.return}}if(ge=s,Jn(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(Uc,t)}catch{}n=!0}return n}finally{xe=r,Xt.transition=e}}return!1}function Jg(t,e,r){e=Si(r,e),e=Dx(t,e,1),t=Cn(t,e,1),e=It(),t!==null&&(xo(t,1,e),Lt(t,e))}function Ve(t,e,r){if(t.tag===3)Jg(t,t,r);else for(;e!==null;){if(e.tag===3){Jg(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rn===null||!Rn.has(n))){t=Si(r,t),t=Ox(e,t,1),e=Cn(e,t,1),t=It(),e!==null&&(xo(e,1,t),Lt(e,t));break}}e=e.return}}function WI(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&r,st===t&&(ct&r)===r&&(Je===4||Je===3&&(ct&130023424)===ct&&500>$e()-Uf?ys(t,0):Mf|=r),Lt(t,e)}function t_(t,e){e===0&&(t.mode&1?(e=nl,nl<<=1,!(nl&130023424)&&(nl=4194304)):e=1);var r=It();t=Gr(t,e),t!==null&&(xo(t,e,r),Lt(t,r))}function HI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),t_(t,r)}function GI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(e),t_(t,r)}var r_;r_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)jt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return jt=!1,DI(t,e,r);jt=!!(t.flags&131072)}else jt=!1,Ce&&e.flags&1048576&&ax(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Rl(t,e),t=e.pendingProps;var s=bi(e,xt.current);gi(e,r),s=Pf(null,e,n,t,s,r);var i=jf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(n)?(i=!0,ec(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sf(e),s.updater=Hc,e.stateNode=s,s._reactInternals=e,lh(e,n,t,r),e=dh(null,e,n,!0,i,r)):(e.tag=0,Ce&&i&&_f(e),kt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Rl(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=QI(n),t=sr(n,t),s){case 0:e=uh(null,e,n,t,r);break e;case 1:e=Bg(null,e,n,t,r);break e;case 11:e=Fg(null,e,n,t,r);break e;case 14:e=$g(null,e,n,sr(n.type,t),r);break e}throw Error(B(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:sr(n,s),uh(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:sr(n,s),Bg(t,e,n,s,r);case 3:e:{if(Ux(e),t===null)throw Error(B(387));n=e.pendingProps,i=e.memoizedState,s=i.element,hx(t,e),ic(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Si(Error(B(423)),e),e=zg(t,e,n,r,s);break e}else if(n!==s){s=Si(Error(B(424)),e),e=zg(t,e,n,r,s);break e}else for(Bt=An(e.stateNode.containerInfo.firstChild),qt=e,Ce=!0,ar=null,r=ux(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ki(),n===s){e=Kr(t,e,r);break e}kt(t,e,n,r)}e=e.child}return e;case 5:return fx(e),t===null&&ih(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,eh(n,s)?a=null:i!==null&&eh(n,i)&&(e.flags|=32),Mx(t,e),kt(t,e,a,r),e.child;case 6:return t===null&&ih(e),null;case 13:return Fx(t,e,r);case 4:return Nf(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ii(e,null,n,r):kt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:sr(n,s),Fg(t,e,n,s,r);case 7:return kt(t,e,e.pendingProps,r),e.child;case 8:return kt(t,e,e.pendingProps.children,r),e.child;case 12:return kt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ie(nc,n._currentValue),n._currentValue=a,i!==null)if(fr(i.value,a)){if(i.children===s.children&&!Dt.current){e=Kr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=$r(-1,r&-r),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),ah(i.return,r,e),c.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ah(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}kt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,gi(e,r),s=er(s),n=n(s),e.flags|=1,kt(t,e,n,r),e.child;case 14:return n=e.type,s=sr(n,e.pendingProps),s=sr(n.type,s),$g(t,e,n,s,r);case 15:return Lx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:sr(n,s),Rl(t,e),e.tag=1,Ot(n)?(t=!0,ec(e)):t=!1,gi(e,r),jx(e,n,s),lh(e,n,s,r),dh(null,e,n,!0,t,r);case 19:return $x(t,e,r);case 22:return Vx(t,e,r)}throw Error(B(156,e.tag))};function n_(t,e){return Cv(t,e)}function KI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,r,n){return new KI(t,e,r,n)}function zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QI(t){if(typeof t=="function")return zf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lf)return 11;if(t===cf)return 14}return 2}function jn(t,e){var r=t.alternate;return r===null?(r=Yt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Dl(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")zf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Zs:return vs(r.children,s,i,e);case of:a=8,s|=8;break;case Pd:return t=Yt(12,r,e,s|2),t.elementType=Pd,t.lanes=i,t;case jd:return t=Yt(13,r,e,s),t.elementType=jd,t.lanes=i,t;case Dd:return t=Yt(19,r,e,s),t.elementType=Dd,t.lanes=i,t;case fv:return Qc(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dv:a=10;break e;case hv:a=9;break e;case lf:a=11;break e;case cf:a=14;break e;case mn:a=16,n=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Yt(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function vs(t,e,r,n){return t=Yt(7,t,n,e),t.lanes=r,t}function Qc(t,e,r,n){return t=Yt(22,t,n,e),t.elementType=fv,t.lanes=r,t.stateNode={isHidden:!1},t}function pd(t,e,r){return t=Yt(6,t,null,e),t.lanes=r,t}function gd(t,e,r){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YI(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yu(0),this.expirationTimes=Yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qf(t,e,r,n,s,i,a,c,u){return t=new YI(t,e,r,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sf(i),t}function XI(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function s_(t){if(!t)return $n;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var r=t.type;if(Ot(r))return sx(t,r,e)}return e}function i_(t,e,r,n,s,i,a,c,u){return t=qf(r,n,!0,t,s,i,a,c,u),t.context=s_(null),r=t.current,n=It(),s=Pn(r),i=$r(n,s),i.callback=e??null,Cn(r,i,s),t.current.lanes=s,xo(t,s,n),Lt(t,n),t}function Yc(t,e,r,n){var s=e.current,i=It(),a=Pn(s);return r=s_(r),e.context===null?e.context=r:e.pendingContext=r,e=$r(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Cn(s,e,a),t!==null&&(ur(t,s,a,i),Nl(t,s,a)),a}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Wf(t,e){Zg(t,e),(t=t.alternate)&&Zg(t,e)}function JI(){return null}var a_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hf(t){this._internalRoot=t}Xc.prototype.render=Hf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Yc(t,e,null,null)};Xc.prototype.unmount=Hf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){Yc(null,t,null,null)}),e[Hr]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<gn.length&&e!==0&&e<gn[r].priority;r++);gn.splice(r,0,t),r===0&&Uv(t)}};function Gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ey(){}function ZI(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=fc(a);i.call(d)}}var a=i_(e,n,t,0,null,!1,!1,"",ey);return t._reactRootContainer=a,t[Hr]=a.current,Ja(t.nodeType===8?t.parentNode:t),bs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var d=fc(u);c.call(d)}}var u=qf(t,0,!1,null,null,!1,!1,"",ey);return t._reactRootContainer=u,t[Hr]=u.current,Ja(t.nodeType===8?t.parentNode:t),bs(function(){Yc(e,u,r,n)}),u}function Zc(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=fc(a);c.call(u)}}Yc(e,a,t,s)}else a=ZI(r,e,t,s,n);return fc(a)}Ov=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_a(e.pendingLanes);r!==0&&(hf(e,r|1),Lt(e,$e()),!(ge&6)&&(Ni=$e()+500,Jn()))}break;case 13:bs(function(){var n=Gr(t,1);if(n!==null){var s=It();ur(n,t,1,s)}}),Wf(t,1)}};ff=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var r=It();ur(e,t,134217728,r)}Wf(t,134217728)}};Lv=function(t){if(t.tag===13){var e=Pn(t),r=Gr(t,e);if(r!==null){var n=It();ur(r,t,e,n)}Wf(t,e)}};Vv=function(){return xe};Mv=function(t,e){var r=xe;try{return xe=t,e()}finally{xe=r}};qd=function(t,e,r){switch(e){case"input":if(Vd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=zc(n);if(!s)throw Error(B(90));pv(n),Vd(n,s)}}}break;case"textarea":yv(t,r);break;case"select":e=r.value,e!=null&&hi(t,!!r.multiple,e,!1)}};kv=Ff;Iv=bs;var eT={usingClientEntryPoint:!1,Events:[wo,ni,zc,Ev,bv,Ff]},ya={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tT={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nv(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||JI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Uc=ml.inject(tT),br=ml}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eT;Ht.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(e))throw Error(B(200));return XI(t,e,null,r)};Ht.createRoot=function(t,e){if(!Gf(t))throw Error(B(299));var r=!1,n="",s=a_;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qf(t,1,!1,null,null,r,!1,n,s),t[Hr]=e.current,Ja(t.nodeType===8?t.parentNode:t),new Hf(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Nv(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return bs(t)};Ht.hydrate=function(t,e,r){if(!Jc(e))throw Error(B(200));return Zc(null,t,e,!0,r)};Ht.hydrateRoot=function(t,e,r){if(!Gf(t))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=a_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=i_(e,null,t,1,r??null,s,!1,i,a),t[Hr]=e.current,Ja(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Xc(e)};Ht.render=function(t,e,r){if(!Jc(e))throw Error(B(200));return Zc(null,t,e,!1,r)};Ht.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(B(40));return t._reactRootContainer?(bs(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};Ht.unstable_batchedUpdates=Ff;Ht.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Jc(r))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Zc(t,e,r,!1,n)};Ht.version="18.3.1-next-f1338f8080-20240426";function o_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o_)}catch(t){console.error(t)}}o_(),ov.exports=Ht;var rT=ov.exports,l_,ty=rT;l_=ty.createRoot,ty.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oo.apply(this,arguments)}var kn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kn||(kn={}));const ry="popstate";function nT(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:c}=n.location;return bh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:mc(s)}return iT(e,r,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sT(){return Math.random().toString(36).substr(2,8)}function ny(t,e){return{usr:t.state,key:t.key,idx:e}}function bh(t,e,r,n){return r===void 0&&(r=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:r,key:e&&e.key||n||sT()})}function mc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function iT(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,c=kn.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(oo({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function f(){c=kn.Pop;let R=m(),T=R==null?null:R-d;d=R,u&&u({action:c,location:_.location,delta:T})}function p(R,T){c=kn.Push;let y=bh(_.location,R,T);d=m()+1;let w=ny(y,d),S=_.createHref(y);try{a.pushState(w,"",S)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(S)}i&&u&&u({action:c,location:_.location,delta:1})}function I(R,T){c=kn.Replace;let y=bh(_.location,R,T);d=m();let w=ny(y,d),S=_.createHref(y);a.replaceState(w,"",S),i&&u&&u({action:c,location:_.location,delta:0})}function j(R){let T=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof R=="string"?R:mc(R);return y=y.replace(/ $/,"%20"),Be(T,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,T)}let _={get action(){return c},get location(){return t(s,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ry,f),u=R,()=>{s.removeEventListener(ry,f),u=null}},createHref(R){return e(s,R)},createURL:j,encodeLocation(R){let T=j(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:I,go(R){return a.go(R)}};return _}var sy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sy||(sy={}));function aT(t,e,r){return r===void 0&&(r="/"),oT(t,e,r)}function oT(t,e,r,n){let s=typeof e=="string"?Fi(e):e,i=Qf(s.pathname||"/",r);if(i==null)return null;let a=c_(t);lT(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=_T(i);c=yT(a[u],d)}return c}function c_(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=Dn([n,u.relativePath]),m=r.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),c_(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:pT(d,i.index),routesMeta:m})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of u_(i.path))s(i,a,u)}),e}function u_(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=u_(n.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function lT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:gT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const cT=/^:[\w-]+$/,uT=3,dT=2,hT=1,fT=10,mT=-2,iy=t=>t==="*";function pT(t,e){let r=t.split("/"),n=r.length;return r.some(iy)&&(n+=mT),e&&(n+=dT),r.filter(s=>!iy(s)).reduce((s,i)=>s+(cT.test(i)?uT:i===""?hT:fT),n)}function gT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function yT(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,m=i==="/"?e:e.slice(i.length)||"/",f=vT({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),p=u.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Dn([i,f.pathname]),pathnameBase:IT(Dn([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Dn([i,f.pathnameBase]))}return a}function vT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=xT(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,m,f)=>{let{paramName:p,isOptional:I}=m;if(p==="*"){let _=c[f]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const j=c[f];return I&&!j?d[p]=void 0:d[p]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function xT(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Kf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function _T(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const wT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ET=t=>wT.test(t);function bT(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Fi(t):t,i;if(r)if(ET(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Kf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=ay(r.substring(1),"/"):i=ay(r,e)}else i=e;return{pathname:i,search:TT(n),hash:ST(s)}}function ay(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function yd(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Yf(t,e){let r=kT(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Xf(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Fi(t):(s=oo({},t),Be(!s.pathname||!s.pathname.includes("?"),yd("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),yd("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),yd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}c=f>=0?e[f]:"/"}let u=bT(s,c),d=a&&a!=="/"&&a.endsWith("/"),m=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const Dn=t=>t.join("/").replace(/\/\/+/g,"/"),IT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ST=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const d_=["post","put","patch","delete"];new Set(d_);const AT=["get",...d_];new Set(AT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lo.apply(this,arguments)}const Jf=O.createContext(null),CT=O.createContext(null),Zn=O.createContext(null),eu=O.createContext(null),tn=O.createContext({outlet:null,matches:[],isDataRoute:!1}),h_=O.createContext(null);function RT(t,e){let{relative:r}=e===void 0?{}:e;$i()||Be(!1);let{basename:n,navigator:s}=O.useContext(Zn),{hash:i,pathname:a,search:c}=m_(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:Dn([n,a])),s.createHref({pathname:u,search:c,hash:i})}function $i(){return O.useContext(eu)!=null}function bo(){return $i()||Be(!1),O.useContext(eu).location}function f_(t){O.useContext(Zn).static||O.useLayoutEffect(t)}function Ps(){let{isDataRoute:t}=O.useContext(tn);return t?qT():PT()}function PT(){$i()||Be(!1);let t=O.useContext(Jf),{basename:e,future:r,navigator:n}=O.useContext(Zn),{matches:s}=O.useContext(tn),{pathname:i}=bo(),a=JSON.stringify(Yf(s,r.v7_relativeSplatPath)),c=O.useRef(!1);return f_(()=>{c.current=!0}),O.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let f=Xf(d,JSON.parse(a),i,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Dn([e,f.pathname])),(m.replace?n.replace:n.push)(f,m.state,m)},[e,n,a,i,t])}function Zf(){let{matches:t}=O.useContext(tn),e=t[t.length-1];return e?e.params:{}}function m_(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=O.useContext(Zn),{matches:s}=O.useContext(tn),{pathname:i}=bo(),a=JSON.stringify(Yf(s,n.v7_relativeSplatPath));return O.useMemo(()=>Xf(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function jT(t,e){return DT(t,e)}function DT(t,e,r,n){$i()||Be(!1);let{navigator:s}=O.useContext(Zn),{matches:i}=O.useContext(tn),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=bo(),m;if(e){var f;let R=typeof e=="string"?Fi(e):e;u==="/"||(f=R.pathname)!=null&&f.startsWith(u)||Be(!1),m=R}else m=d;let p=m.pathname||"/",I=p;if(u!=="/"){let R=u.replace(/^\//,"").split("/");I="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let j=aT(t,{pathname:I}),_=UT(j&&j.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:Dn([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Dn([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,r,n);return e&&_?O.createElement(eu.Provider,{value:{location:lo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:kn.Pop}},_):_}function OT(){let t=zT(),e=NT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),r?O.createElement("pre",{style:s},r):null,null)}const LT=O.createElement(OT,null);class VT extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?O.createElement(tn.Provider,{value:this.props.routeContext},O.createElement(h_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MT(t){let{routeContext:e,match:r,children:n}=t,s=O.useContext(Jf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(tn.Provider,{value:e},n)}function UT(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,c=(s=r)==null?void 0:s.errors;if(c!=null){let m=a.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||Be(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:I}=r,j=f.route.loader&&p[f.route.id]===void 0&&(!I||I[f.route.id]===void 0);if(f.route.lazy||j){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let I,j=!1,_=null,R=null;r&&(I=c&&f.route.id?c[f.route.id]:void 0,_=f.route.errorElement||LT,u&&(d<0&&p===0?(WT("route-fallback"),j=!0,R=null):d===p&&(j=!0,R=f.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,p+1)),y=()=>{let w;return I?w=_:j?w=R:f.route.Component?w=O.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=m,O.createElement(MT,{match:f,routeContext:{outlet:m,matches:T,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?O.createElement(VT,{location:r.location,revalidation:r.revalidation,component:_,error:I,children:y(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):y()},null)}var p_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(p_||{}),g_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(g_||{});function FT(t){let e=O.useContext(Jf);return e||Be(!1),e}function $T(t){let e=O.useContext(CT);return e||Be(!1),e}function BT(t){let e=O.useContext(tn);return e||Be(!1),e}function y_(t){let e=BT(),r=e.matches[e.matches.length-1];return r.route.id||Be(!1),r.route.id}function zT(){var t;let e=O.useContext(h_),r=$T(),n=y_();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function qT(){let{router:t}=FT(p_.UseNavigateStable),e=y_(g_.UseNavigateStable),r=O.useRef(!1);return f_(()=>{r.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,lo({fromRouteId:e},i)))},[t,e])}const oy={};function WT(t,e,r){oy[t]||(oy[t]=!0)}function HT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mr(t){let{to:e,replace:r,state:n,relative:s}=t;$i()||Be(!1);let{future:i,static:a}=O.useContext(Zn),{matches:c}=O.useContext(tn),{pathname:u}=bo(),d=Ps(),m=Xf(e,Yf(c,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(m);return O.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:s}),[d,f,s,r,n]),null}function Qe(t){Be(!1)}function GT(t){let{basename:e="/",children:r=null,location:n,navigationType:s=kn.Pop,navigator:i,static:a=!1,future:c}=t;$i()&&Be(!1);let u=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:i,static:a,future:lo({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof n=="string"&&(n=Fi(n));let{pathname:m="/",search:f="",hash:p="",state:I=null,key:j="default"}=n,_=O.useMemo(()=>{let R=Qf(m,u);return R==null?null:{location:{pathname:R,search:f,hash:p,state:I,key:j},navigationType:s}},[u,m,f,p,I,j,s]);return _==null?null:O.createElement(Zn.Provider,{value:d},O.createElement(eu.Provider,{children:r,value:_}))}function KT(t){let{children:e,location:r}=t;return jT(kh(e),r)}new Promise(()=>{});function kh(t,e){e===void 0&&(e=[]);let r=[];return O.Children.forEach(t,(n,s)=>{if(!O.isValidElement(n))return;let i=[...e,s];if(n.type===O.Fragment){r.push.apply(r,kh(n.props.children,i));return}n.type!==Qe&&Be(!1),!n.props.index||!n.props.children||Be(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=kh(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ih(){return Ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ih.apply(this,arguments)}function QT(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function YT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XT(t,e){return t.button===0&&(!e||e==="_self")&&!YT(t)}const JT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZT="6";try{window.__reactRouterVersion=ZT}catch{}const e1="startTransition",ly=Wb[e1];function t1(t){let{basename:e,children:r,future:n,window:s}=t,i=O.useRef();i.current==null&&(i.current=nT({window:s,v5Compat:!0}));let a=i.current,[c,u]=O.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},m=O.useCallback(f=>{d&&ly?ly(()=>u(f)):u(f)},[u,d]);return O.useLayoutEffect(()=>a.listen(m),[a,m]),O.useEffect(()=>HT(n),[n]),O.createElement(GT,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:a,future:n})}const r1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=O.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:f}=e,p=QT(e,JT),{basename:I}=O.useContext(Zn),j,_=!1;if(typeof d=="string"&&n1.test(d)&&(j=d,r1))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),D=Qf(S.pathname,I);S.origin===w.origin&&D!=null?d=D+S.search+S.hash:_=!0}catch{}let R=RT(d,{relative:s}),T=s1(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:f});function y(w){n&&n(w),w.defaultPrevented||T(w)}return O.createElement("a",Ih({},p,{href:j||R,onClick:_||i?n:y,ref:r,target:u}))});var cy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cy||(cy={}));var uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));function s1(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Ps(),d=bo(),m=m_(t,{relative:a});return O.useCallback(f=>{if(XT(f,r)){f.preventDefault();let p=n!==void 0?n:mc(d)===mc(m);u(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,m,n,s,r,t,i,a,c])}const i1=()=>{};var dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},a1=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],c=t[r++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,f=(i&3)<<4|c>>4;let p=(c&15)<<2|d>>6,I=d&63;u||(I=64,a||(p=64)),n.push(r[m],r[f],r[p],r[I])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],c=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new o1;const p=i<<2|c>>4;if(n.push(p),d!==64){const I=c<<4&240|d>>2;if(n.push(I),f!==64){const j=d<<6&192|f;n.push(j)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class o1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l1=function(t){const e=v_(t);return x_.encodeByteArray(e,!0)},pc=function(t){return l1(t).replace(/\./g,"")},__=function(t){try{return x_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=()=>c1().__FIREBASE_DEFAULTS__,d1=()=>{if(typeof process>"u"||typeof dy>"u")return;const t=dy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&__(t[1]);return e&&JSON.parse(e)},tu=()=>{try{return i1()||u1()||d1()||h1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>{var e,r;return(r=(e=tu())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},E_=t=>{const e=w_(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},b_=()=>{var t;return(t=tu())==null?void 0:t.config},k_=t=>{var e;return(e=tu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function em(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pc(JSON.stringify(r)),pc(JSON.stringify(a)),""].join(".")}const Va={};function m1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Va))Va[e]?t.emulator.push(e):t.prod.push(e);return t}function p1(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let hy=!1;function tm(t,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||Va[t]===e||Va[t]||hy)return;Va[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",i=m1().prod.length>0;function a(){const p=document.getElementById(n);p&&p.remove()}function c(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,I){p.setAttribute("width","24"),p.setAttribute("id",I),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{hy=!0,a()},p}function m(p,I){p.setAttribute("id",I),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=p1(n),I=r("text"),j=document.getElementById(I)||document.createElement("span"),_=r("learnmore"),R=document.getElementById(_)||document.createElement("a"),T=r("preprendIcon"),y=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;c(w),m(R,_);const S=d();u(y,T),w.append(y,j,R,S),document.body.appendChild(w)}i?(j.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function y1(){var e;const t=(e=tu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w1(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b1(){try{return typeof indexedDB=="object"}catch{return!1}}function k1(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="FirebaseError";class jr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=I1,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?T1(i,n):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new jr(s,c,n)}}function T1(t,e){return t.replace(S1,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const S1=/\{\$([^}]+)}/g;function N1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qr(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(fy(i)&&fy(a)){if(!Qr(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function fy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ba(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function A1(t,e){const r=new C1(t,e);return r.subscribe.bind(r)}class C1{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");R1(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=vd),s.error===void 0&&(s.error=vd),s.complete===void 0&&(s.complete=vd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R1(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new f1;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D1(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&a.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:j1(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j1(t){return t===hs?void 0:t}function D1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new P1(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const L1={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},V1=de.INFO,M1={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},U1=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=M1[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rm{constructor(e){this.name=e,this._logLevel=V1,this._logHandler=U1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const F1=(t,e)=>e.some(r=>t instanceof r);let my,py;function $1(){return my||(my=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B1(){return py||(py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T_=new WeakMap,Th=new WeakMap,S_=new WeakMap,xd=new WeakMap,nm=new WeakMap;function z1(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(On(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&T_.set(r,t)}).catch(()=>{}),nm.set(e,t),e}function q1(t){if(Th.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Th.set(t,e)}let Sh={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||S_.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return On(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W1(t){Sh=t(Sh)}function H1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(_d(this),e,...r);return S_.set(n,e.sort?e.sort():[e]),On(n)}:B1().includes(t)?function(...e){return t.apply(_d(this),e),On(T_.get(this))}:function(...e){return On(t.apply(_d(this),e))}}function G1(t){return typeof t=="function"?H1(t):(t instanceof IDBTransaction&&q1(t),F1(t,$1())?new Proxy(t,Sh):t)}function On(t){if(t instanceof IDBRequest)return z1(t);if(xd.has(t))return xd.get(t);const e=G1(t);return e!==t&&(xd.set(t,e),nm.set(e,t)),e}const _d=t=>nm.get(t);function K1(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=On(a);return n&&a.addEventListener("upgradeneeded",u=>{n(On(a.result),u.oldVersion,u.newVersion,On(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Q1=["get","getKey","getAll","getAllKeys","count"],Y1=["put","add","delete","clear"],wd=new Map;function gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=Y1.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Q1.includes(r)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),s&&u.done]))[0]};return wd.set(e,i),i}W1(t=>({...t,get:(e,r,n)=>gy(e,r)||t.get(e,r,n),has:(e,r)=>!!gy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(J1(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function J1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nh="@firebase/app",yy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new rm("@firebase/app"),Z1="@firebase/app-compat",eS="@firebase/analytics-compat",tS="@firebase/analytics",rS="@firebase/app-check-compat",nS="@firebase/app-check",sS="@firebase/auth",iS="@firebase/auth-compat",aS="@firebase/database",oS="@firebase/data-connect",lS="@firebase/database-compat",cS="@firebase/functions",uS="@firebase/functions-compat",dS="@firebase/installations",hS="@firebase/installations-compat",fS="@firebase/messaging",mS="@firebase/messaging-compat",pS="@firebase/performance",gS="@firebase/performance-compat",yS="@firebase/remote-config",vS="@firebase/remote-config-compat",xS="@firebase/storage",_S="@firebase/storage-compat",wS="@firebase/firestore",ES="@firebase/ai",bS="@firebase/firestore-compat",kS="firebase",IS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="[DEFAULT]",TS={[Nh]:"fire-core",[Z1]:"fire-core-compat",[tS]:"fire-analytics",[eS]:"fire-analytics-compat",[nS]:"fire-app-check",[rS]:"fire-app-check-compat",[sS]:"fire-auth",[iS]:"fire-auth-compat",[aS]:"fire-rtdb",[oS]:"fire-data-connect",[lS]:"fire-rtdb-compat",[cS]:"fire-fn",[uS]:"fire-fn-compat",[dS]:"fire-iid",[hS]:"fire-iid-compat",[fS]:"fire-fcm",[mS]:"fire-fcm-compat",[pS]:"fire-perf",[gS]:"fire-perf-compat",[yS]:"fire-rc",[vS]:"fire-rc-compat",[xS]:"fire-gcs",[_S]:"fire-gcs-compat",[wS]:"fire-fst",[bS]:"fire-fst-compat",[ES]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,SS=new Map,Ch=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(r){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ks(t){const e=t.name;if(Ch.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;Ch.set(e,t);for(const r of gc.values())vy(r,t);for(const r of SS.values())vy(r,t);return!0}function ru(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new ko("app","Firebase",NS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=IS;function N_(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Ah,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Ln.create("bad-app-name",{appName:String(s)});if(r||(r=b_()),!r)throw Ln.create("no-options");const i=gc.get(s);if(i){if(Qr(r,i.options)&&Qr(n,i.config))return i;throw Ln.create("duplicate-app",{appName:s})}const a=new O1(s);for(const u of Ch.values())a.addComponent(u);const c=new AS(r,n,a);return gc.set(s,c),c}function sm(t=Ah){const e=gc.get(t);if(!e&&t===Ah&&b_())return N_();if(!e)throw Ln.create("no-app",{appName:t});return e}function Ir(t,e,r){let n=TS[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${n}" with version "${e}":`];s&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(a.join(" "));return}ks(new Bn(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",RS=1,co="firebase-heartbeat-store";let Ed=null;function A_(){return Ed||(Ed=K1(CS,RS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ln.create("idb-open",{originalErrorMessage:t.message})})),Ed}async function PS(t){try{const r=(await A_()).transaction(co),n=await r.objectStore(co).get(C_(t));return await r.done,n}catch(e){if(e instanceof jr)Yr.warn(e.message);else{const r=Ln.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(r.message)}}}async function xy(t,e){try{const n=(await A_()).transaction(co,"readwrite");await n.objectStore(co).put(e,C_(t)),await n.done}catch(r){if(r instanceof jr)Yr.warn(r.message);else{const n=Ln.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Yr.warn(n.message)}}}function C_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=1024,DS=30;class OS{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new VS(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_y();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>DS){const a=MS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Yr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=_y(),{heartbeatsToSend:n,unsentEntries:s}=LS(this._heartbeatsCache.heartbeats),i=pc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Yr.warn(r),""}}}function _y(){return new Date().toISOString().substring(0,10)}function LS(t,e=jS){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),wy(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),wy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class VS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b1()?k1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PS(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return xy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return xy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function wy(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}function MS(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){ks(new Bn("platform-logger",e=>new X1(e),"PRIVATE")),ks(new Bn("heartbeat",e=>new OS(e),"PRIVATE")),Ir(Nh,yy,t),Ir(Nh,yy,"esm2020"),Ir("fire-js","")}US("");function R_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=R_,P_=new ko("auth","Firebase",R_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new rm("@firebase/auth");function $S(t,...e){yc.logLevel<=de.WARN&&yc.warn(`Auth (${Ds}): ${t}`,...e)}function Ol(t,...e){yc.logLevel<=de.ERROR&&yc.error(`Auth (${Ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw im(t,...e)}function Tr(t,...e){return im(t,...e)}function j_(t,e,r){const n={...FS(),[e]:r};return new ko("auth","Firebase",n).create(e,{appName:t.name})}function Br(t){return j_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function im(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return P_.create(t,...e)}function re(t,e,...r){if(!t)throw im(e,...r)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ol(e),new Error(e)}function Xr(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function BS(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||x1()||"connection"in navigator)?navigator.onLine:!0}function qS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,r){this.shortDelay=e,this.longDelay=r,Xr(r>e,"Short delay should be less than long delay!"),this.isMobile=g1()||_1()}get(){return zS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){Xr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GS=new To(3e4,6e4);function es(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ts(t,e,r,n,s={}){return O_(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const c=Io({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return v1()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&js(t.emulatorConfig.host)&&(d.credentials="include"),D_.fetch()(await L_(t,t.config.apiHost,r,c),d)})}async function O_(t,e,r){t._canInitEmulator=!1;const n={...WS,...e};try{const s=new QS(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw pl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw pl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw pl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw pl(t,"user-disabled",a);const m=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw j_(t,m,d);pr(t,m)}}catch(s){if(s instanceof jr)throw s;pr(t,"network-request-failed",{message:String(s)})}}async function So(t,e,r,n,s={}){const i=await ts(t,e,r,n,s);return"mfaPendingCredential"in i&&pr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function L_(t,e,r,n){const s=`${e}${r}?${n}`,i=t,a=i.config.emulator?am(t.config,s):`${t.config.apiScheme}://${s}`;return HS.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function KS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Tr(this.auth,"network-request-failed")),GS.get())})}}function pl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Tr(t,e,n);return s.customData._tokenResponse=r,s}function by(t){return t!==void 0&&t.enterprise!==void 0}class YS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return KS(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function XS(t,e){return ts(t,"GET","/v2/recaptchaConfig",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e){return ts(t,"POST","/v1/accounts:delete",e)}async function vc(t,e){return ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZS(t,e=!1){const r=Ge(t),n=await r.getIdToken(e),s=om(n);re(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Ma(bd(s.auth_time)),issuedAtTime:Ma(bd(s.iat)),expirationTime:Ma(bd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bd(t){return Number(t)*1e3}function om(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Ol("JWT malformed, contained fewer than 3 sections"),null;try{const s=__(r);return s?JSON.parse(s):(Ol("Failed to decode base64 JWT payload"),null)}catch(s){return Ol("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ky(t){const e=om(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof jr&&eN(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function eN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t){var f;const e=t.auth,r=await t.getIdToken(),n=await uo(t,vc(e,{idToken:r}));re(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?V_(s.providerUserInfo):[],a=nN(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ph(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function rN(t){const e=Ge(t);await xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nN(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function V_(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e){const r=await O_(t,{},async()=>{const n=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await L_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:n};return t.emulatorConfig&&js(t.emulatorConfig.host)&&(u.credentials="include"),D_.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function iN(t,e){return ts(t,"POST","/v2/accounts:revokeToken",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){re(e.length!==0,"internal-error");const r=ky(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await sN(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new vi;return n&&(re(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(re(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new tN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ph(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await uo(this,this.stsTokenManager.getToken(this.auth,e));return re(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ZS(this,e)}reload(){return rN(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await xc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await uo(this,JS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,i=r.phoneNumber??void 0,a=r.photoURL??void 0,c=r.tenantId??void 0,u=r._redirectEventId??void 0,d=r.createdAt??void 0,m=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:I,providerData:j,stsTokenManager:_}=r;re(f&&_,e,"internal-error");const R=vi.fromJSON(this.name,_);re(typeof f=="string",e,"internal-error"),fn(n,e.name),fn(s,e.name),re(typeof p=="boolean",e,"internal-error"),re(typeof I=="boolean",e,"internal-error"),fn(i,e.name),fn(a,e.name),fn(c,e.name),fn(u,e.name),fn(d,e.name),fn(m,e.name);const T=new or({uid:f,auth:e,email:s,emailVerified:p,displayName:n,isAnonymous:I,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:R,createdAt:d,lastLoginAt:m});return j&&Array.isArray(j)&&(T.providerData=j.map(y=>({...y}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,r,n=!1){const s=new vi;s.updateFromServerResponse(r);const i=new or({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await xc(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?V_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new vi;c.updateFromIdToken(n);const u=new or({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ph(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Map;function Fr(t){Xr(t instanceof Function,"Expected a class definition");let e=Iy.get(t);return e?(Xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Iy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}M_.type="NONE";const Ty=M_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e,r){return`firebase:${t}:${e}:${r}`}class xi{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ll(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ll("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await vc(this.auth,{idToken:e}).catch(()=>{});return r?or._fromGetAccountInfoResponse(this.auth,r,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new xi(Fr(Ty),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fr(Ty);const a=Ll(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const m=await d._get(a);if(m){let f;if(typeof m=="string"){const p=await vc(e,{idToken:m}).catch(()=>{});if(!p)break;f=await or._fromGetAccountInfoResponse(e,p,m)}else f=or._fromJSON(e,m);d!==i&&(c=f),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new xi(i,e,n):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new xi(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q_(e))return"Blackberry";if(W_(e))return"Webos";if(F_(e))return"Safari";if((e.includes("chrome/")||$_(e))&&!e.includes("edge/"))return"Chrome";if(z_(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function U_(t=_t()){return/firefox\//i.test(t)}function F_(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $_(t=_t()){return/crios\//i.test(t)}function B_(t=_t()){return/iemobile/i.test(t)}function z_(t=_t()){return/android/i.test(t)}function q_(t=_t()){return/blackberry/i.test(t)}function W_(t=_t()){return/webos/i.test(t)}function lm(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aN(t=_t()){var e;return lm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function oN(){return w1()&&document.documentMode===10}function H_(t=_t()){return lm(t)||z_(t)||W_(t)||q_(t)||/windows phone/i.test(t)||B_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t,e=[]){let r;switch(t){case"Browser":r=Sy(_t());break;case"Worker":r=`${Sy(_t())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ds}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e={}){return ts(t,"GET","/v2/passwordPolicy",es(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=6;class dN{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??uN,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new lN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fr(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await vc(this,{idToken:e}),n=await or._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ft(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await xc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Br(this));const r=e?Ge(e):null;return r&&re(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cN(this),r=new dN(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ko("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await iN(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fr(e)||this._popupRedirectResolver;re(r,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[Fr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&$S(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Os(t){return Ge(t)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=A1(r=>this.observer=r)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fN(t){nu=t}function K_(t){return nu.loadJS(t)}function mN(){return nu.recaptchaEnterpriseScript}function pN(){return nu.gapiScript}function gN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yN{constructor(){this.enterprise=new vN}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class vN{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const xN="recaptcha-enterprise",Q_="NO_RECAPTCHA";class _N{constructor(e){this.type=xN,this.auth=Os(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{XS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new YS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;by(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Q_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yN().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(c=>{if(!r&&by(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mN();u.length!==0&&(u+=c),K_(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Ay(t,e,r,n=!1,s=!1){const i=new _N(t);let a;if(s)a=Q_;else try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const c={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function jh(t,e,r,n,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ay(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ay(t,e,r,r==="getOobCode");return n(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e){const r=ru(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Qr(i,e??{}))return s;pr(s,"already-initialized")}return r.initialize({options:e})}function EN(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function bN(t,e,r){const n=Os(t);re(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Y_(e),{host:a,port:c}=kN(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},m=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){re(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),re(Qr(d,n.config.emulator)&&Qr(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,js(a)?(em(`${i}//${a}${u}`),tm("Auth",!0)):IN()}function Y_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kN(t){const e=Y_(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:Cy(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:Cy(a)}}}function Cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IN(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,r){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function TN(t,e){return ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){return So(t,"POST","/v1/accounts:signInWithPassword",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e){return So(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}async function AN(t,e){return So(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends cm{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ho(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ho(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,r,"signInWithPassword",SN);case"emailLink":return NN(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,n,"signUpPassword",TN);case"emailLink":return AN(e,{idToken:r,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e){return So(t,"POST","/v1/accounts:signInWithIdp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="http://localhost";class Is extends cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):pr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...i}=r;if(!n||!s)return null;const a=new Is(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return _i(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,_i(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,_i(e,r)}buildRequest(){const e={requestUri:CN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Io(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PN(t){const e=Ea(ba(t)).link,r=e?Ea(ba(e)).deep_link_id:null,n=Ea(ba(t)).deep_link_id;return(n?Ea(ba(n)).link:null)||n||r||e||t}class um{constructor(e){const r=Ea(ba(e)),n=r.apiKey??null,s=r.oobCode??null,i=RN(r.mode??null);re(n&&s&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=PN(e);try{return new um(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.providerId=Bi.PROVIDER_ID}static credential(e,r){return ho._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=um.parseLink(r);return re(n,"argument-error"),ho._fromEmailAndCode(e,n.code,n.tenantId)}}Bi.PROVIDER_ID="password";Bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends X_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends No{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vn.credentialFromTaggedObject(e)}static credentialFromError(e){return vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vn.credential(e.oauthAccessToken)}catch{return null}}}vn.FACEBOOK_SIGN_IN_METHOD="facebook.com";vn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Is._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return xn.credential(r,n)}catch{return null}}}xn.GOOGLE_SIGN_IN_METHOD="google.com";xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends No{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _n.credential(e.oauthAccessToken)}catch{return null}}}_n.GITHUB_SIGN_IN_METHOD="github.com";_n.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends No{constructor(){super("twitter.com")}static credential(e,r){return Is._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return wn.credential(r,n)}catch{return null}}}wn.TWITTER_SIGN_IN_METHOD="twitter.com";wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){return So(t,"POST","/v1/accounts:signUp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await or._fromIdTokenResponse(e,n,s),a=Ry(n);return new Ts({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Ry(n);return new Ts({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends jr{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new _c(e,r,n,s)}}function J_(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(t,i,e,n):i})}async function DN(t,e,r=!1){const n=await uo(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ts._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e,r=!1){const{auth:n}=t;if(Ft(n.app))return Promise.reject(Br(n));const s="reauthenticate";try{const i=await uo(t,J_(n,s,e,t),r);re(i.idToken,n,"internal-error");const a=om(i.idToken);re(a,n,"internal-error");const{sub:c}=a;return re(t.uid===c,n,"user-mismatch"),Ts._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&pr(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_(t,e,r=!1){if(Ft(t.app))return Promise.reject(Br(t));const n="signIn",s=await J_(t,n,e),i=await Ts._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function LN(t,e){return Z_(Os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(t){const e=Os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VN(t,e,r){if(Ft(t.app))return Promise.reject(Br(t));const n=Os(t),a=await jh(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ew(t),u}),c=await Ts._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(c.user),c}function MN(t,e,r){return Ft(t.app)?Promise.reject(Br(t)):LN(Ge(t),Bi.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&ew(t),n})}function UN(t,e,r,n){return Ge(t).onIdTokenChanged(e,r,n)}function FN(t,e,r){return Ge(t).beforeAuthStateChanged(e,r)}function $N(t,e,r,n){return Ge(t).onAuthStateChanged(e,r,n)}function BN(t){return Ge(t).signOut()}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=1e3,qN=10;class rw extends tw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);oN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qN):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},zN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}rw.type="LOCAL";const WN=rw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends tw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}nw.type="SESSION";const sw=nw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new su(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const c=Array.from(a).map(async d=>d(r.origin,i)),u=await HN(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}su.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=dm("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(p.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function KN(t){Sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function QN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function XN(){return iw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="firebaseLocalStorageDb",JN=1,Ec="firebaseLocalStorage",ow="fbase_key";class Ao{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function iu(t,e){return t.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function ZN(){const t=indexedDB.deleteDatabase(aw);return new Ao(t).toPromise()}function Dh(){const t=indexedDB.open(aw,JN);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ec,{keyPath:ow})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ec)?e(n):(n.close(),await ZN(),e(await Dh()))})})}async function Py(t,e,r){const n=iu(t,!0).put({[ow]:e,value:r});return new Ao(n).toPromise()}async function eA(t,e){const r=iu(t,!1).get(e),n=await new Ao(r).toPromise();return n===void 0?null:n.value}function jy(t,e){const r=iu(t,!0).delete(e);return new Ao(r).toPromise()}const tA=800,rA=3;class lw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dh(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>rA)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=su._getInstance(XN()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await QN(),!this.activeServiceWorker)return;this.sender=new GN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dh();return await Py(e,wc,"1"),await jy(e,wc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Py(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>eA(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>jy(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=iu(s,!1).getAll();return new Ao(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lw.type="LOCAL";const nA=lw;new To(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){return e?Fr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _i(e,this._buildIdpRequest())}_linkToIdToken(e,r){return _i(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return _i(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function iA(t){return Z_(t.auth,new hm(t),t.bypassAuthState)}function aA(t){const{auth:e,user:r}=t;return re(r,e,"internal-error"),ON(r,new hm(t),t.bypassAuthState)}async function oA(t){const{auth:e,user:r}=t;return re(r,e,"internal-error"),DN(r,new hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iA;case"linkViaPopup":case"linkViaRedirect":return oA;case"reauthViaPopup":case"reauthViaRedirect":return aA;default:pr(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new To(2e3,1e4);class ui extends cw{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ui.currentPopupAction&&ui.currentPopupAction.cancel(),ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lA.get())};e()}}ui.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="pendingRedirect",Vl=new Map;class uA extends cw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Vl.get(this.auth._key());if(!e){try{const n=await dA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Vl.set(this.auth._key(),e)}return this.bypassAuthState||Vl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dA(t,e){const r=mA(e),n=fA(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function hA(t,e){Vl.set(t._key(),e)}function fA(t){return Fr(t._redirectPersistence)}function mA(t){return Ll(cA,t.config.apiKey,t.name)}async function pA(t,e,r=!1){if(Ft(t.app))return Promise.reject(Br(t));const n=Os(t),s=sA(n,e),a=await new uA(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=10*60*1e3;class yA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vA(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!uw(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Tr(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dy(e))}saveEventToCache(e){this.cachedEventUids.add(Dy(e)),this.lastProcessedEventTime=Date.now()}}function Dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e={}){return ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wA=/^https?/;async function EA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xA(t);for(const r of e)try{if(bA(r))return}catch{}pr(t,"unauthorized-domain")}function bA(t){const e=Rh(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!wA.test(r))return!1;if(_A.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new To(3e4,6e4);function Oy(){const t=Sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function IA(t){return new Promise((e,r)=>{var s,i,a;function n(){Oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oy(),r(Tr(t,"network-request-failed"))},timeout:kA.get()})}if((i=(s=Sr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Sr().gapi)!=null&&a.load)n();else{const c=gN("iframefcb");return Sr()[c]=()=>{gapi.load?n():r(Tr(t,"network-request-failed"))},K_(`${pN()}?onload=${c}`).catch(u=>r(u))}}).catch(e=>{throw Ml=null,e})}let Ml=null;function TA(t){return Ml=Ml||IA(t),Ml}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new To(5e3,15e3),NA="__/auth/iframe",AA="emulator/auth/iframe",CA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PA(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?am(e,AA):`https://${t.config.authDomain}/${NA}`,n={apiKey:e.apiKey,appName:t.name,v:Ds},s=RA.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Io(n).slice(1)}`}async function jA(t){const e=await TA(t),r=Sr().gapi;return re(r,t,"internal-error"),e.open({where:document.body,url:PA(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CA,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Tr(t,"network-request-failed"),c=Sr().setTimeout(()=>{i(a)},SA.get());function u(){Sr().clearTimeout(c),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OA=500,LA=600,VA="_blank",MA="http://localhost";class Ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UA(t,e,r,n=OA,s=LA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u={...DA,width:n.toString(),height:s.toString(),top:i,left:a},d=_t().toLowerCase();r&&(c=$_(d)?VA:r),U_(d)&&(e=e||MA,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[I,j])=>`${p}${I}=${j},`,"");if(aN(d)&&c!=="_self")return FA(e||"",c),new Ly(null);const f=window.open(e||"",c,m);re(f,t,"popup-blocked");try{f.focus()}catch{}return new Ly(f)}function FA(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__/auth/handler",BA="emulator/auth/handler",zA=encodeURIComponent("fac");async function Vy(t,e,r,n,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ds,eventId:s};if(e instanceof X_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",N1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))a[m]=f}if(e instanceof No){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${zA}=${encodeURIComponent(u)}`:"";return`${qA(t)}?${Io(c).slice(1)}${d}`}function qA({config:t}){return t.emulator?am(t,BA):`https://${t.authDomain}/${$A}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class WA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sw,this._completeRedirectFn=pA,this._overrideRedirectResult=hA}async _openPopup(e,r,n,s){var a;Xr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await Vy(e,r,n,Rh(),s);return UA(e,i,dm())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await Vy(e,r,n,Rh(),s);return KN(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Xr(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await jA(e),n=new yA(e);return r.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(kd,{type:kd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[kd];i!==void 0&&r(!!i),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=EA(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return H_()||F_()||lm()}}const HA=WA;var My="@firebase/auth",Uy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QA(t){ks(new Bn("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(t)},d=new hN(n,s,i,u);return EN(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ks(new Bn("auth-internal",e=>{const r=Os(e.getProvider("auth").getImmediate());return(n=>new GA(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(My,Uy,KA(t)),Ir(My,Uy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=5*60,XA=k_("authIdTokenMaxAge")||YA;let Fy=null;const JA=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>XA)return;const s=r==null?void 0:r.token;Fy!==s&&(Fy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZA(t=sm()){const e=ru(t,"auth");if(e.isInitialized())return e.getImmediate();const r=wN(t,{popupRedirectResolver:HA,persistence:[nA,WN,sw]}),n=k_("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=JA(i.toString());FN(r,a,()=>a(r.currentUser)),UN(r,c=>a(c))}}const s=w_("auth");return s&&bN(r,`http://${s}`),r}function eC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}fN({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Tr("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",eC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QA("Browser");var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vn,dw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function v(){}v.prototype=x.prototype,E.F=x.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(b,C,P){for(var A=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)A[Z-2]=arguments[Z];return x.prototype[C].apply(b,A)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,v){v||(v=0);const b=Array(16);if(typeof x=="string")for(var C=0;C<16;++C)b[C]=x.charCodeAt(v++)|x.charCodeAt(v++)<<8|x.charCodeAt(v++)<<16|x.charCodeAt(v++)<<24;else for(C=0;C<16;++C)b[C]=x[v++]|x[v++]<<8|x[v++]<<16|x[v++]<<24;x=E.g[0],v=E.g[1],C=E.g[2];let P=E.g[3],A;A=x+(P^v&(C^P))+b[0]+3614090360&4294967295,x=v+(A<<7&4294967295|A>>>25),A=P+(C^x&(v^C))+b[1]+3905402710&4294967295,P=x+(A<<12&4294967295|A>>>20),A=C+(v^P&(x^v))+b[2]+606105819&4294967295,C=P+(A<<17&4294967295|A>>>15),A=v+(x^C&(P^x))+b[3]+3250441966&4294967295,v=C+(A<<22&4294967295|A>>>10),A=x+(P^v&(C^P))+b[4]+4118548399&4294967295,x=v+(A<<7&4294967295|A>>>25),A=P+(C^x&(v^C))+b[5]+1200080426&4294967295,P=x+(A<<12&4294967295|A>>>20),A=C+(v^P&(x^v))+b[6]+2821735955&4294967295,C=P+(A<<17&4294967295|A>>>15),A=v+(x^C&(P^x))+b[7]+4249261313&4294967295,v=C+(A<<22&4294967295|A>>>10),A=x+(P^v&(C^P))+b[8]+1770035416&4294967295,x=v+(A<<7&4294967295|A>>>25),A=P+(C^x&(v^C))+b[9]+2336552879&4294967295,P=x+(A<<12&4294967295|A>>>20),A=C+(v^P&(x^v))+b[10]+4294925233&4294967295,C=P+(A<<17&4294967295|A>>>15),A=v+(x^C&(P^x))+b[11]+2304563134&4294967295,v=C+(A<<22&4294967295|A>>>10),A=x+(P^v&(C^P))+b[12]+1804603682&4294967295,x=v+(A<<7&4294967295|A>>>25),A=P+(C^x&(v^C))+b[13]+4254626195&4294967295,P=x+(A<<12&4294967295|A>>>20),A=C+(v^P&(x^v))+b[14]+2792965006&4294967295,C=P+(A<<17&4294967295|A>>>15),A=v+(x^C&(P^x))+b[15]+1236535329&4294967295,v=C+(A<<22&4294967295|A>>>10),A=x+(C^P&(v^C))+b[1]+4129170786&4294967295,x=v+(A<<5&4294967295|A>>>27),A=P+(v^C&(x^v))+b[6]+3225465664&4294967295,P=x+(A<<9&4294967295|A>>>23),A=C+(x^v&(P^x))+b[11]+643717713&4294967295,C=P+(A<<14&4294967295|A>>>18),A=v+(P^x&(C^P))+b[0]+3921069994&4294967295,v=C+(A<<20&4294967295|A>>>12),A=x+(C^P&(v^C))+b[5]+3593408605&4294967295,x=v+(A<<5&4294967295|A>>>27),A=P+(v^C&(x^v))+b[10]+38016083&4294967295,P=x+(A<<9&4294967295|A>>>23),A=C+(x^v&(P^x))+b[15]+3634488961&4294967295,C=P+(A<<14&4294967295|A>>>18),A=v+(P^x&(C^P))+b[4]+3889429448&4294967295,v=C+(A<<20&4294967295|A>>>12),A=x+(C^P&(v^C))+b[9]+568446438&4294967295,x=v+(A<<5&4294967295|A>>>27),A=P+(v^C&(x^v))+b[14]+3275163606&4294967295,P=x+(A<<9&4294967295|A>>>23),A=C+(x^v&(P^x))+b[3]+4107603335&4294967295,C=P+(A<<14&4294967295|A>>>18),A=v+(P^x&(C^P))+b[8]+1163531501&4294967295,v=C+(A<<20&4294967295|A>>>12),A=x+(C^P&(v^C))+b[13]+2850285829&4294967295,x=v+(A<<5&4294967295|A>>>27),A=P+(v^C&(x^v))+b[2]+4243563512&4294967295,P=x+(A<<9&4294967295|A>>>23),A=C+(x^v&(P^x))+b[7]+1735328473&4294967295,C=P+(A<<14&4294967295|A>>>18),A=v+(P^x&(C^P))+b[12]+2368359562&4294967295,v=C+(A<<20&4294967295|A>>>12),A=x+(v^C^P)+b[5]+4294588738&4294967295,x=v+(A<<4&4294967295|A>>>28),A=P+(x^v^C)+b[8]+2272392833&4294967295,P=x+(A<<11&4294967295|A>>>21),A=C+(P^x^v)+b[11]+1839030562&4294967295,C=P+(A<<16&4294967295|A>>>16),A=v+(C^P^x)+b[14]+4259657740&4294967295,v=C+(A<<23&4294967295|A>>>9),A=x+(v^C^P)+b[1]+2763975236&4294967295,x=v+(A<<4&4294967295|A>>>28),A=P+(x^v^C)+b[4]+1272893353&4294967295,P=x+(A<<11&4294967295|A>>>21),A=C+(P^x^v)+b[7]+4139469664&4294967295,C=P+(A<<16&4294967295|A>>>16),A=v+(C^P^x)+b[10]+3200236656&4294967295,v=C+(A<<23&4294967295|A>>>9),A=x+(v^C^P)+b[13]+681279174&4294967295,x=v+(A<<4&4294967295|A>>>28),A=P+(x^v^C)+b[0]+3936430074&4294967295,P=x+(A<<11&4294967295|A>>>21),A=C+(P^x^v)+b[3]+3572445317&4294967295,C=P+(A<<16&4294967295|A>>>16),A=v+(C^P^x)+b[6]+76029189&4294967295,v=C+(A<<23&4294967295|A>>>9),A=x+(v^C^P)+b[9]+3654602809&4294967295,x=v+(A<<4&4294967295|A>>>28),A=P+(x^v^C)+b[12]+3873151461&4294967295,P=x+(A<<11&4294967295|A>>>21),A=C+(P^x^v)+b[15]+530742520&4294967295,C=P+(A<<16&4294967295|A>>>16),A=v+(C^P^x)+b[2]+3299628645&4294967295,v=C+(A<<23&4294967295|A>>>9),A=x+(C^(v|~P))+b[0]+4096336452&4294967295,x=v+(A<<6&4294967295|A>>>26),A=P+(v^(x|~C))+b[7]+1126891415&4294967295,P=x+(A<<10&4294967295|A>>>22),A=C+(x^(P|~v))+b[14]+2878612391&4294967295,C=P+(A<<15&4294967295|A>>>17),A=v+(P^(C|~x))+b[5]+4237533241&4294967295,v=C+(A<<21&4294967295|A>>>11),A=x+(C^(v|~P))+b[12]+1700485571&4294967295,x=v+(A<<6&4294967295|A>>>26),A=P+(v^(x|~C))+b[3]+2399980690&4294967295,P=x+(A<<10&4294967295|A>>>22),A=C+(x^(P|~v))+b[10]+4293915773&4294967295,C=P+(A<<15&4294967295|A>>>17),A=v+(P^(C|~x))+b[1]+2240044497&4294967295,v=C+(A<<21&4294967295|A>>>11),A=x+(C^(v|~P))+b[8]+1873313359&4294967295,x=v+(A<<6&4294967295|A>>>26),A=P+(v^(x|~C))+b[15]+4264355552&4294967295,P=x+(A<<10&4294967295|A>>>22),A=C+(x^(P|~v))+b[6]+2734768916&4294967295,C=P+(A<<15&4294967295|A>>>17),A=v+(P^(C|~x))+b[13]+1309151649&4294967295,v=C+(A<<21&4294967295|A>>>11),A=x+(C^(v|~P))+b[4]+4149444226&4294967295,x=v+(A<<6&4294967295|A>>>26),A=P+(v^(x|~C))+b[11]+3174756917&4294967295,P=x+(A<<10&4294967295|A>>>22),A=C+(x^(P|~v))+b[2]+718787259&4294967295,C=P+(A<<15&4294967295|A>>>17),A=v+(P^(C|~x))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}n.prototype.v=function(E,x){x===void 0&&(x=E.length);const v=x-this.blockSize,b=this.C;let C=this.h,P=0;for(;P<x;){if(C==0)for(;P<=v;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<x;)if(b[C++]=E.charCodeAt(P++),C==this.blockSize){s(this,b),C=0;break}}else for(;P<x;)if(b[C++]=E[P++],C==this.blockSize){s(this,b),C=0;break}}this.h=C,this.o+=x},n.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;x=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=x&255,x/=256;for(this.v(E),E=Array(16),x=0,v=0;v<4;++v)for(let b=0;b<32;b+=8)E[x++]=this.g[v]>>>b&255;return E};function i(E,x){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=x(E)}function a(E,x){this.h=x;const v=[];let b=!0;for(let C=E.length-1;C>=0;C--){const P=E[C]|0;b&&P==x||(v[C]=P,b=!1)}this.g=v}var c={};function u(E){return-128<=E&&E<128?i(E,function(x){return new a([x|0],x<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return R(d(-E));const x=[];let v=1;for(let b=0;E>=v;b++)x[b]=E/v|0,v*=4294967296;return new a(x,0)}function m(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return R(m(E.substring(1),x));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=d(Math.pow(x,8));let b=f;for(let P=0;P<E.length;P+=8){var C=Math.min(8,E.length-P);const A=parseInt(E.substring(P,P+C),x);C<8?(C=d(Math.pow(x,C)),b=b.j(C).add(d(A))):(b=b.j(v),b=b.add(d(A)))}return b}var f=u(0),p=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(_(this))return-R(this).m();let E=0,x=1;for(let v=0;v<this.g.length;v++){const b=this.i(v);E+=(b>=0?b:4294967296+b)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(j(this))return"0";if(_(this))return"-"+R(this).toString(E);const x=d(Math.pow(E,6));var v=this;let b="";for(;;){const C=S(v,x).g;v=T(v,C.j(x));let P=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=C,j(v))return P+b;for(;P.length<6;)P="0"+P;b=P+b}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function j(E){if(E.h!=0)return!1;for(let x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function _(E){return E.h==-1}t.l=function(E){return E=T(this,E),_(E)?-1:j(E)?0:1};function R(E){const x=E.g.length,v=[];for(let b=0;b<x;b++)v[b]=~E.g[b];return new a(v,~E.h).add(p)}t.abs=function(){return _(this)?R(this):this},t.add=function(E){const x=Math.max(this.g.length,E.g.length),v=[];let b=0;for(let C=0;C<=x;C++){let P=b+(this.i(C)&65535)+(E.i(C)&65535),A=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);b=A>>>16,P&=65535,A&=65535,v[C]=A<<16|P}return new a(v,v[v.length-1]&-2147483648?-1:0)};function T(E,x){return E.add(R(x))}t.j=function(E){if(j(this)||j(E))return f;if(_(this))return _(E)?R(this).j(R(E)):R(R(this).j(E));if(_(E))return R(this.j(R(E)));if(this.l(I)<0&&E.l(I)<0)return d(this.m()*E.m());const x=this.g.length+E.g.length,v=[];for(var b=0;b<2*x;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(let C=0;C<E.g.length;C++){const P=this.i(b)>>>16,A=this.i(b)&65535,Z=E.i(C)>>>16,z=E.i(C)&65535;v[2*b+2*C]+=A*z,y(v,2*b+2*C),v[2*b+2*C+1]+=P*z,y(v,2*b+2*C+1),v[2*b+2*C+1]+=A*Z,y(v,2*b+2*C+1),v[2*b+2*C+2]+=P*Z,y(v,2*b+2*C+2)}for(E=0;E<x;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=x;E<2*x;E++)v[E]=0;return new a(v,0)};function y(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function w(E,x){this.g=E,this.h=x}function S(E,x){if(j(x))throw Error("division by zero");if(j(E))return new w(f,f);if(_(E))return x=S(R(E),x),new w(R(x.g),R(x.h));if(_(x))return x=S(E,R(x)),new w(R(x.g),x.h);if(E.g.length>30){if(_(E)||_(x))throw Error("slowDivide_ only works with positive integers.");for(var v=p,b=x;b.l(E)<=0;)v=D(v),b=D(b);var C=N(v,1),P=N(b,1);for(b=N(b,2),v=N(v,2);!j(b);){var A=P.add(b);A.l(E)<=0&&(C=C.add(v),P=A),b=N(b,1),v=N(v,1)}return x=T(E,C.j(x)),new w(C,x)}for(C=f;E.l(x)>=0;){for(v=Math.max(1,Math.floor(E.m()/x.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),P=d(v),A=P.j(x);_(A)||A.l(E)>0;)v-=b,P=d(v),A=P.j(x);j(P)&&(P=p),C=C.add(P),E=T(E,A)}return new w(C,E)}t.B=function(E){return S(this,E).h},t.and=function(E){const x=Math.max(this.g.length,E.g.length),v=[];for(let b=0;b<x;b++)v[b]=this.i(b)&E.i(b);return new a(v,this.h&E.h)},t.or=function(E){const x=Math.max(this.g.length,E.g.length),v=[];for(let b=0;b<x;b++)v[b]=this.i(b)|E.i(b);return new a(v,this.h|E.h)},t.xor=function(E){const x=Math.max(this.g.length,E.g.length),v=[];for(let b=0;b<x;b++)v[b]=this.i(b)^E.i(b);return new a(v,this.h^E.h)};function D(E){const x=E.g.length+1,v=[];for(let b=0;b<x;b++)v[b]=E.i(b)<<1|E.i(b-1)>>>31;return new a(v,E.h)}function N(E,x){const v=x>>5;x%=32;const b=E.g.length-v,C=[];for(let P=0;P<b;P++)C[P]=x>0?E.i(P+v)>>>x|E.i(P+v+1)<<32-x:E.i(P+v);return new a(C,E.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,dw=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,Vn=a}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hw,ka,fw,Ul,Oh,mw,pw,gw;(function(){var t,e=Object.defineProperty;function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gl=="object"&&gl];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var n=r(this);function s(l,h){if(h)e:{var g=n;l=l.split(".");for(var k=0;k<l.length-1;k++){var L=l[k];if(!(L in g))break e;g=g[L]}l=l[l.length-1],k=g[l],h=h(k),h!=k&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&g.push([k,h[k]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var k=g.slice();return k.push.apply(k,arguments),l.apply(this,k)}}function f(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(k,L,V){for(var W=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)W[ce-2]=arguments[ce];return h.prototype[L].apply(k,W)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function I(l){const h=l.length;if(h>0){const g=Array(h);for(let k=0;k<h;k++)g[k]=l[k];return g}return[]}function j(l,h){for(let k=1;k<arguments.length;k++){const L=arguments[k];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=l.length||0;const V=L.length||0;l.length=g+V;for(let W=0;W<V;W++)l[g+W]=L[W]}else l.push(L)}}class _{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(l){a.setTimeout(()=>{throw l},0)}function T(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,g){const k=w.get();k.set(h,g),this.h?this.h.next=k:this.g=k,this.h=k}}var w=new _(()=>new S,l=>l.reset());class S{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,N=!1,E=new y,x=()=>{const l=Promise.resolve(void 0);D=()=>{l.then(v)}};function v(){for(var l;l=T();){try{l.h.call(l.g)}catch(g){R(g)}var h=w;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}N=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l}();function A(l){return/^[\s\xa0]*$/.test(l)}function Z(l,h){C.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}f(Z,C),Z.prototype.init=function(l,h){const g=this.type=l.type,k=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),G=0;function le(l,h,g,k,L){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!k,this.ha=L,this.key=++G,this.da=this.fa=!1}function $(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function K(l,h,g){for(const k in l)h.call(g,l[k],k,l)}function H(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function se(l){const h={};for(const g in l)h[g]=l[g];return h}const _e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function At(l,h){let g,k;for(let L=1;L<arguments.length;L++){k=arguments[L];for(g in k)l[g]=k[g];for(let V=0;V<_e.length;V++)g=_e[V],Object.prototype.hasOwnProperty.call(k,g)&&(l[g]=k[g])}}function Ae(l){this.src=l,this.g={},this.h=0}Ae.prototype.add=function(l,h,g,k,L){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const W=wt(l,h,k,L);return W>-1?(h=l[W],g||(h.fa=!1)):(h=new le(h,this.src,V,!!k,L),h.fa=g,l.push(h)),h};function rr(l,h){const g=h.type;if(g in l.g){var k=l.g[g],L=Array.prototype.indexOf.call(k,h,void 0),V;(V=L>=0)&&Array.prototype.splice.call(k,L,1),V&&($(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function wt(l,h,g,k){for(let L=0;L<l.length;++L){const V=l[L];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==k)return L}return-1}var Vt="closure_lm_"+(Math.random()*1e6|0),me={};function Ue(l,h,g,k,L){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Ue(l,h[V],g,k,L);return null}return g=Jm(g),l&&l[z]?l.J(h,g,c(k)?!!k.capture:!1,L):Fs(l,h,g,!1,k,L)}function Fs(l,h,g,k,L,V){if(!h)throw Error("Invalid event type");const W=c(L)?!!L.capture:!!L;let ce=sn(l);if(ce||(l[Vt]=ce=new Ae(l)),g=ce.add(h,g,k,W,V),g.proxy)return g;if(k=ss(),g.proxy=k,k.src=l,k.listener=g,l.addEventListener)P||(L=W),L===void 0&&(L=!1),l.addEventListener(h.toString(),k,L);else if(l.attachEvent)l.attachEvent(Bs(h.toString()),k);else if(l.addListener&&l.removeListener)l.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ss(){function l(g){return h.call(l.src,l.listener,g)}const h=zs;return l}function nn(l,h,g,k,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)nn(l,h[V],g,k,L);else k=c(k)?!!k.capture:!!k,g=Jm(g),l&&l[z]?(l=l.i,V=String(h).toString(),V in l.g&&(h=l.g[V],g=wt(h,g,k,L),g>-1&&($(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[V],l.h--)))):l&&(l=sn(l))&&(h=l.g[h.toString()],l=-1,h&&(l=wt(h,g,k,L)),(g=l>-1?h[l]:null)&&$s(g))}function $s(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[z])rr(h.i,l);else{var g=l.type,k=l.proxy;h.removeEventListener?h.removeEventListener(g,k,l.capture):h.detachEvent?h.detachEvent(Bs(g),k):h.addListener&&h.removeListener&&h.removeListener(k),(g=sn(h))?(rr(g,l),g.h==0&&(g.src=null,h[Vt]=null)):$(l)}}}function Bs(l){return l in me?me[l]:me[l]="on"+l}function zs(l,h){if(l.da)l=!0;else{h=new Z(h,this);const g=l.listener,k=l.ha||l.src;l.fa&&$s(l),l=g.call(k,h)}return l}function sn(l){return l=l[Vt],l instanceof Ae?l:null}var Su="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jm(l){return typeof l=="function"?l:(l[Su]||(l[Su]=function(h){return l.handleEvent(h)}),l[Su])}function dt(){b.call(this),this.i=new Ae(this),this.M=this,this.G=null}f(dt,b),dt.prototype[z]=!0,dt.prototype.removeEventListener=function(l,h,g,k){nn(this,l,h,g,k)};function Et(l,h){var g,k=l.G;if(k)for(g=[];k;k=k.G)g.push(k);if(l=l.M,k=h.type||h,typeof h=="string")h=new C(h,l);else if(h instanceof C)h.target=h.target||l;else{var L=h;h=new C(k,l),At(h,L)}L=!0;let V,W;if(g)for(W=g.length-1;W>=0;W--)V=h.g=g[W],L=Fo(V,k,!0,h)&&L;if(V=h.g=l,L=Fo(V,k,!0,h)&&L,L=Fo(V,k,!1,h)&&L,g)for(W=0;W<g.length;W++)V=h.g=g[W],L=Fo(V,k,!1,h)&&L}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let k=0;k<g.length;k++)$(g[k]);delete l.g[h],l.h--}}this.G=null},dt.prototype.J=function(l,h,g,k){return this.i.add(String(l),h,!1,g,k)},dt.prototype.K=function(l,h,g,k){return this.i.add(String(l),h,!0,g,k)};function Fo(l,h,g,k){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let L=!0;for(let V=0;V<h.length;++V){const W=h[V];if(W&&!W.da&&W.capture==g){const ce=W.listener,Ke=W.ha||W.src;W.fa&&rr(l.i,W),L=ce.call(Ke,k)!==!1&&L}}return L&&!k.defaultPrevented}function rb(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(l,h||0)}function Zm(l){l.g=rb(()=>{l.g=null,l.i&&(l.i=!1,Zm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class nb extends b{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Zm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(l){b.call(this),this.h=l,this.g={}}f(Ki,b);var ep=[];function tp(l){K(l.g,function(h,g){this.g.hasOwnProperty(g)&&$s(h)},l),l.g={}}Ki.prototype.N=function(){Ki.Z.N.call(this),tp(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nu=a.JSON.stringify,sb=a.JSON.parse,ib=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function rp(){}function np(){}var Qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Au(){C.call(this,"d")}f(Au,C);function Cu(){C.call(this,"c")}f(Cu,C);var is={},sp=null;function $o(){return sp=sp||new dt}is.Ia="serverreachability";function ip(l){C.call(this,is.Ia,l)}f(ip,C);function Yi(l){const h=$o();Et(h,new ip(h))}is.STAT_EVENT="statevent";function ap(l,h){C.call(this,is.STAT_EVENT,l),this.stat=h}f(ap,C);function bt(l){const h=$o();Et(h,new ap(h,l))}is.Ja="timingevent";function op(l,h){C.call(this,is.Ja,l),this.size=h}f(op,C);function Xi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Ji(){this.g=!0}Ji.prototype.ua=function(){this.g=!1};function ab(l,h,g,k,L,V){l.info(function(){if(l.g)if(V){var W="",ce=V.split("&");for(let Ee=0;Ee<ce.length;Ee++){var Ke=ce[Ee].split("=");if(Ke.length>1){const et=Ke[0];Ke=Ke[1];const vr=et.split("_");W=vr.length>=2&&vr[1]=="type"?W+(et+"="+Ke+"&"):W+(et+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+k+") [attempt "+L+"]: "+h+`
`+g+`
`+W})}function ob(l,h,g,k,L,V,W){l.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+L+"]: "+h+`
`+g+`
`+V+" "+W})}function qs(l,h,g,k){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+cb(l,g)+(k?" "+k:"")})}function lb(l,h){l.info(function(){return"TIMEOUT: "+h})}Ji.prototype.info=function(){};function cb(l,h){if(!l.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var g=V[l];if(!(g.length<2)){var k=g[1];if(Array.isArray(k)&&!(k.length<1)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(let W=1;W<k.length;W++)k[W]=""}}}}return Nu(V)}catch{return h}}var Bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cp;function Ru(){}f(Ru,rp),Ru.prototype.g=function(){return new XMLHttpRequest},cp=new Ru;function Zi(l){return encodeURIComponent(String(l))}function ub(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function an(l,h,g,k){this.j=l,this.i=h,this.l=g,this.S=k||1,this.V=new Ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new up}function up(){this.i=null,this.g="",this.h=!1}var dp={},Pu={};function ju(l,h,g){l.M=1,l.A=qo(yr(h)),l.u=g,l.R=!0,hp(l,null)}function hp(l,h){l.F=Date.now(),zo(l),l.B=yr(l.A);var g=l.B,k=l.S;Array.isArray(k)||(k=[String(k)]),Ip(g.i,"t",k),l.C=0,g=l.j.L,l.h=new up,l.g=zp(l.j,g?h:null,!l.u),l.P>0&&(l.O=new nb(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,k=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(ep[0]=L.toString()),L=ep);for(let V=0;V<L.length;V++){const W=Ue(g,L[V],k||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.J?se(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Yi(),ab(l.i,l.v,l.B,l.l,l.S,l.u)}an.prototype.ba=function(l){l=l.target;const h=this.O;h&&cn(l)==3?h.j():this.Y(l)},an.prototype.Y=function(l){try{if(l==this.g)e:{const ce=cn(this.g),Ke=this.g.ya(),Ee=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||Pp(this.g)))){this.K||ce!=4||Ke==7||(Ke==8||Ee<=0?Yi(3):Yi(2)),Du(this);var h=this.g.ca();this.X=h;var g=db(this);if(this.o=h==200,ob(this.i,this.v,this.B,this.l,this.S,ce,h),this.o){if(this.U&&!this.L){t:{if(this.g){var k,L=this.g;if((k=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(k)){var V=k;break t}}V=null}if(l=V)qs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ou(this,l);else{this.o=!1,this.m=3,bt(12),as(this),ea(this);break e}}if(this.R){l=!0;let et;for(;!this.K&&this.C<g.length;)if(et=hb(this,g),et==Pu){ce==4&&(this.m=4,bt(14),l=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(et==dp){this.m=4,bt(15),qs(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else qs(this.i,this.l,et,null),Ou(this,et);if(fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||g.length!=0||this.h.h||(this.m=1,bt(16),l=!1),this.o=this.o&&l,!l)qs(this.i,this.l,g,"[Invalid Chunked Response]"),as(this),ea(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),zu(W),W.P=!0,bt(11))}}else qs(this.i,this.l,g,null),Ou(this,g);ce==4&&as(this),this.o&&!this.K&&(ce==4?Up(this.j,this):(this.o=!1,zo(this)))}else Tb(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),as(this),ea(this)}}}catch{}finally{}};function db(l){if(!fp(l))return l.g.la();const h=Pp(l.g);if(h==="")return"";let g="";const k=h.length,L=cn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return as(l),ea(l),"";l.h.i=new a.TextDecoder}for(let V=0;V<k;V++)l.h.h=!0,g+=l.h.i.decode(h[V],{stream:!(L&&V==k-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function fp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function hb(l,h){var g=l.C,k=h.indexOf(`
`,g);return k==-1?Pu:(g=Number(h.substring(g,k)),isNaN(g)?dp:(k+=1,k+g>h.length?Pu:(h=h.slice(k,k+g),l.C=k+g,h)))}an.prototype.cancel=function(){this.K=!0,as(this)};function zo(l){l.T=Date.now()+l.H,mp(l,l.H)}function mp(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Xi(d(l.aa,l),h)}function Du(l){l.D&&(a.clearTimeout(l.D),l.D=null)}an.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(lb(this.i,this.B),this.M!=2&&(Yi(),bt(17)),as(this),this.m=2,ea(this)):mp(this,this.T-l)};function ea(l){l.j.I==0||l.K||Up(l.j,l)}function as(l){Du(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,tp(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Ou(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||Lu(g.h,l))){if(!l.L&&Lu(g.h,l)&&g.I==3){try{var k=g.Ba.g.parse(h)}catch{k=null}if(Array.isArray(k)&&k.length==3){var L=k;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Qo(g),Go(g);else break e;Bu(g),bt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Xi(d(g.Va,g),6e3));yp(g.h)<=1&&g.ta&&(g.ta=void 0)}else ls(g,11)}else if((l.L||g.g==l)&&Qo(g),!A(h))for(L=g.Ba.g.parse(h),h=0;h<L.length;h++){let Ee=L[h];const et=Ee[0];if(!(et<=g.K))if(g.K=et,Ee=Ee[1],g.I==2)if(Ee[0]=="c"){g.M=Ee[1],g.ba=Ee[2];const vr=Ee[3];vr!=null&&(g.ka=vr,g.j.info("VER="+g.ka));const cs=Ee[4];cs!=null&&(g.za=cs,g.j.info("SVER="+g.za));const un=Ee[5];un!=null&&typeof un=="number"&&un>0&&(k=1.5*un,g.O=k,g.j.info("backChannelRequestTimeoutMs_="+k)),k=g;const dn=l.g;if(dn){const Xo=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xo){var V=k.h;V.g||Xo.indexOf("spdy")==-1&&Xo.indexOf("quic")==-1&&Xo.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Vu(V,V.h),V.h=null))}if(k.G){const qu=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;qu&&(k.wa=qu,Te(k.J,k.G,qu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),k=g;var W=l;if(k.na=Bp(k,k.L?k.ba:null,k.W),W.L){vp(k.h,W);var ce=W,Ke=k.O;Ke&&(ce.H=Ke),ce.D&&(Du(ce),zo(ce)),k.g=W}else Vp(k);g.i.length>0&&Ko(g)}else Ee[0]!="stop"&&Ee[0]!="close"||ls(g,7);else g.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ls(g,7):$u(g):Ee[0]!="noop"&&g.l&&g.l.qa(Ee),g.A=0)}}Yi(4)}catch{}}var fb=class{constructor(l,h){this.g=l,this.map=h}};function pp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function yp(l){return l.h?1:l.g?l.g.size:0}function Lu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Vu(l,h){l.g?l.g.add(h):l.h=h}function vp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}pp.prototype.cancel=function(){if(this.i=xp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function xp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return I(l.i)}var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mb(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const k=l[g].indexOf("=");let L,V=null;k>=0?(L=l[g].substring(0,k),V=l[g].substring(k+1)):L=l[g],h(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function on(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof on?(this.l=l.l,ta(this,l.j),this.o=l.o,this.g=l.g,ra(this,l.u),this.h=l.h,Mu(this,Tp(l.i)),this.m=l.m):l&&(h=String(l).match(_p))?(this.l=!1,ta(this,h[1]||"",!0),this.o=na(h[2]||""),this.g=na(h[3]||"",!0),ra(this,h[4]),this.h=na(h[5]||"",!0),Mu(this,h[6]||"",!0),this.m=na(h[7]||"")):(this.l=!1,this.i=new ia(null,this.l))}on.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(sa(h,wp,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(sa(h,wp,!0),"@"),l.push(Zi(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(sa(g,g.charAt(0)=="/"?yb:gb,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",sa(g,xb)),l.join("")},on.prototype.resolve=function(l){const h=yr(this);let g=!!l.j;g?ta(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var k=l.h;if(g)ra(h,l.u);else if(g=!!l.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var L=h.h.lastIndexOf("/");L!=-1&&(k=h.h.slice(0,L+1)+k)}if(L=k,L==".."||L==".")k="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){k=L.lastIndexOf("/",0)==0,L=L.split("/");const V=[];for(let W=0;W<L.length;){const ce=L[W++];ce=="."?k&&W==L.length&&V.push(""):ce==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),k&&W==L.length&&V.push("")):(V.push(ce),k=!0)}k=V.join("/")}else k=L}return g?h.h=k:g=l.i.toString()!=="",g?Mu(h,Tp(l.i)):g=!!l.m,g&&(h.m=l.m),h};function yr(l){return new on(l)}function ta(l,h,g){l.j=g?na(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ra(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Mu(l,h,g){h instanceof ia?(l.i=h,_b(l.i,l.l)):(g||(h=sa(h,vb)),l.i=new ia(h,l.l))}function Te(l,h,g){l.i.set(h,g)}function qo(l){return Te(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function na(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function sa(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,pb),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var wp=/[#\/\?@]/g,gb=/[#\?:]/g,yb=/[#\?]/g,vb=/[#\?@]/g,xb=/#/g;function ia(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function os(l){l.g||(l.g=new Map,l.h=0,l.i&&mb(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=ia.prototype,t.add=function(l,h){os(this),this.i=null,l=Ws(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function Ep(l,h){os(l),h=Ws(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function bp(l,h){return os(l),h=Ws(l,h),l.g.has(h)}t.forEach=function(l,h){os(this),this.g.forEach(function(g,k){g.forEach(function(L){l.call(h,L,k,this)},this)},this)};function kp(l,h){os(l);let g=[];if(typeof h=="string")bp(l,h)&&(g=g.concat(l.g.get(Ws(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return os(this),this.i=null,l=Ws(this,l),bp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=kp(this,l),l.length>0?String(l[0]):h):h};function Ip(l,h,g){Ep(l,h),g.length>0&&(l.i=null,l.g.set(Ws(l,h),I(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let k=0;k<h.length;k++){var g=h[k];const L=Zi(g);g=kp(this,g);for(let V=0;V<g.length;V++){let W=L;g[V]!==""&&(W+="="+Zi(g[V])),l.push(W)}}return this.i=l.join("&")};function Tp(l){const h=new ia;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Ws(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function _b(l,h){h&&!l.j&&(os(l),l.i=null,l.g.forEach(function(g,k){const L=k.toLowerCase();k!=L&&(Ep(this,k),Ip(this,L,g))},l)),l.j=h}function wb(l,h){const g=new Ji;if(a.Image){const k=new Image;k.onload=m(ln,g,"TestLoadImage: loaded",!0,h,k),k.onerror=m(ln,g,"TestLoadImage: error",!1,h,k),k.onabort=m(ln,g,"TestLoadImage: abort",!1,h,k),k.ontimeout=m(ln,g,"TestLoadImage: timeout",!1,h,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=l}else h(!1)}function Eb(l,h){const g=new Ji,k=new AbortController,L=setTimeout(()=>{k.abort(),ln(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:k.signal}).then(V=>{clearTimeout(L),V.ok?ln(g,"TestPingServer: ok",!0,h):ln(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),ln(g,"TestPingServer: error",!1,h)})}function ln(l,h,g,k,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),k(g)}catch{}}function bb(){this.g=new ib}function Uu(l){this.i=l.Sb||null,this.h=l.ab||!1}f(Uu,rp),Uu.prototype.g=function(){return new Wo(this.i,this.h)};function Wo(l,h){dt.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Wo,dt),t=Wo.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,oa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?aa(this):oa(this),this.readyState==3&&Sp(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,aa(this))},t.Na=function(l){this.g&&(this.response=l,aa(this))},t.ga=function(){this.g&&aa(this)};function aa(l){l.readyState=4,l.l=null,l.j=null,l.B=null,oa(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function oa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Np(l){let h="";return K(l,function(g,k){h+=k,h+=":",h+=g,h+=`\r
`}),h}function Fu(l,h,g){e:{for(k in g){var k=!1;break e}k=!0}k||(g=Np(g),typeof l=="string"?g!=null&&Zi(g):Te(l,h,g))}function Le(l){dt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Le,dt);var kb=/^https?$/i,Ib=["POST","PUT"];t=Le.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cp.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Ap(this,V);return}if(l=g||"",g=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var L in k)g.set(L,k[L]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const V of k.keys())g.set(V,k.get(V));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(Array.prototype.indexOf.call(Ib,h,void 0)>=0)||k||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){Ap(this,V)}};function Ap(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Cp(l),Ho(l)}function Cp(l){l.A||(l.A=!0,Et(l,"complete"),Et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Et(this,"complete"),Et(this,"abort"),Ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ho(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Rp(this):this.Xa())},t.Xa=function(){Rp(this)};function Rp(l){if(l.h&&typeof i<"u"){if(l.v&&cn(l)==4)setTimeout(l.Ca.bind(l),0);else if(Et(l,"readystatechange"),cn(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var k;if(k=V===0){let W=String(l.D).match(_p)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),k=!kb.test(W?W.toLowerCase():"")}g=k}if(g)Et(l,"complete"),Et(l,"success");else{l.o=6;try{var L=cn(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",Cp(l)}}finally{Ho(l)}}}}function Ho(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||Et(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return cn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),sb(h)}};function Pp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Tb(l){const h={};l=(l.g&&cn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<l.length;k++){if(A(l[k]))continue;var g=ub(l[k]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=h[L]||[];h[L]=V,V.push(g)}H(h,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function jp(l){this.za=0,this.i=[],this.j=new Ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,l),this.Za=la("retryDelaySeedMs",1e4,l),this.Ta=la("forwardChannelMaxRetries",2,l),this.va=la("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new pp(l&&l.concurrentRequestLimit),this.Ba=new bb,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jp.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,k){bt(0),this.W=l,this.H=h||{},g&&k!==void 0&&(this.H.OSID=g,this.H.OAID=k),this.F=this.X,this.J=Bp(this,null,this.W),Ko(this)};function $u(l){if(Dp(l),l.I==3){var h=l.V++,g=yr(l.J);if(Te(g,"SID",l.M),Te(g,"RID",h),Te(g,"TYPE","terminate"),ca(l,g),h=new an(l,l.j,h),h.M=2,h.A=qo(yr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.A,g=!0),g||(h.g=zp(h.j,null),h.g.ea(h.A)),h.F=Date.now(),zo(h)}$p(l)}function Go(l){l.g&&(zu(l),l.g.cancel(),l.g=null)}function Dp(l){Go(l),l.v&&(a.clearTimeout(l.v),l.v=null),Qo(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&a.clearTimeout(l.m),l.m=null)}function Ko(l){if(!gp(l.h)&&!l.m){l.m=!0;var h=l.Ea;D||x(),N||(D(),N=!0),E.add(h,l),l.D=0}}function Sb(l,h){return yp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Xi(d(l.Ea,l,h),Fp(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new an(this,this.j,l);let V=this.o;if(this.U&&(V?(V=se(V),At(V,this.U)):V=this.U),this.u!==null||this.R||(L.J=V,V=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var k=this.i[g];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(h+=k,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Lp(this,L,h),g=yr(this.J),Te(g,"RID",l),Te(g,"CVER",22),this.G&&Te(g,"X-HTTP-Session-Id",this.G),ca(this,g),V&&(this.R?h="headers="+Zi(Np(V))+"&"+h:this.u&&Fu(g,this.u,V)),Vu(this.h,L),this.Ra&&Te(g,"TYPE","init"),this.S?(Te(g,"$req",h),Te(g,"SID","null"),L.U=!0,ju(L,g,null)):ju(L,g,h),this.I=2}}else this.I==3&&(l?Op(this,l):this.i.length==0||gp(this.h)||Op(this))};function Op(l,h){var g;h?g=h.l:g=l.V++;const k=yr(l.J);Te(k,"SID",l.M),Te(k,"RID",g),Te(k,"AID",l.K),ca(l,k),l.u&&l.o&&Fu(k,l.u,l.o),g=new an(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Lp(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Vu(l.h,g),ju(g,k,h)}function ca(l,h){l.H&&K(l.H,function(g,k){Te(h,k,g)}),l.l&&K({},function(g,k){Te(h,k,g)})}function Lp(l,h,g){g=Math.min(l.i.length,g);const k=l.l?d(l.l.Ka,l.l,l):null;e:{var L=l.i;let ce=-1;for(;;){const Ke=["count="+g];ce==-1?g>0?(ce=L[0].g,Ke.push("ofs="+ce)):ce=0:Ke.push("ofs="+ce);let Ee=!0;for(let et=0;et<g;et++){var V=L[et].g;const vr=L[et].map;if(V-=ce,V<0)ce=Math.max(0,L[et].g-100),Ee=!1;else try{V="req"+V+"_"||"";try{var W=vr instanceof Map?vr:Object.entries(vr);for(const[cs,un]of W){let dn=un;c(un)&&(dn=Nu(un)),Ke.push(V+cs+"="+encodeURIComponent(dn))}}catch(cs){throw Ke.push(V+"type="+encodeURIComponent("_badmap")),cs}}catch{k&&k(vr)}}if(Ee){W=Ke.join("&");break e}}W=void 0}return l=l.i.splice(0,g),h.G=l,W}function Vp(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;D||x(),N||(D(),N=!0),E.add(h,l),l.A=0}}function Bu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Xi(d(l.Da,l),Fp(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Mp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Xi(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Go(this),Mp(this))};function zu(l){l.B!=null&&(a.clearTimeout(l.B),l.B=null)}function Mp(l){l.g=new an(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=yr(l.na);Te(h,"RID","rpc"),Te(h,"SID",l.M),Te(h,"AID",l.K),Te(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Te(h,"TO",l.ia),Te(h,"TYPE","xmlhttp"),ca(l,h),l.u&&l.o&&Fu(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=qo(yr(h)),g.u=null,g.R=!0,hp(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),Bu(this),bt(19))};function Qo(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Up(l,h){var g=null;if(l.g==h){Qo(l),zu(l),l.g=null;var k=2}else if(Lu(l.h,h))g=h.G,vp(l.h,h),k=1;else return;if(l.I!=0){if(h.o)if(k==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var L=l.D;k=$o(),Et(k,new op(k,g)),Ko(l)}else Vp(l);else if(L=h.m,L==3||L==0&&h.X>0||!(k==1&&Sb(l,h)||k==2&&Bu(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),L){case 1:ls(l,5);break;case 4:ls(l,10);break;case 3:ls(l,6);break;default:ls(l,2)}}}function Fp(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function ls(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),k=l.Ua;const L=!k;k=new on(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ta(k,"https"),qo(k),L?wb(k.toString(),g):Eb(k.toString(),g)}else bt(2);l.I=0,l.l&&l.l.pa(h),$p(l),Dp(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function $p(l){if(l.I=0,l.ja=[],l.l){const h=xp(l.h);(h.length!=0||l.i.length!=0)&&(j(l.ja,h),j(l.ja,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.oa()}}function Bp(l,h,g){var k=g instanceof on?yr(g):new on(g);if(k.g!="")h&&(k.g=h+"."+k.g),ra(k,k.u);else{var L=a.location;k=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;const V=new on(null);k&&ta(V,k),h&&(V.g=h),L&&ra(V,L),g&&(V.h=g),k=V}return g=l.G,h=l.wa,g&&h&&Te(k,g,h),Te(k,"VER",l.ka),ca(l,k),k}function zp(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Le(new Uu({ab:g})):new Le(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qp(){}t=qp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yo(){}Yo.prototype.g=function(l,h){return new Mt(l,h)};function Mt(l,h){dt.call(this),this.g=new jp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!A(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!A(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Hs(this)}f(Mt,dt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){$u(this.g)},Mt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Nu(l),l=g);h.i.push(new fb(h.Ya++,l)),h.I==3&&Ko(h)},Mt.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Mt.Z.N.call(this)};function Wp(l){Au.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}f(Wp,Au);function Hp(){Cu.call(this),this.status=1}f(Hp,Cu);function Hs(l){this.g=l}f(Hs,qp),Hs.prototype.ra=function(){Et(this.g,"a")},Hs.prototype.qa=function(l){Et(this.g,new Wp(l))},Hs.prototype.pa=function(l){Et(this.g,new Hp)},Hs.prototype.oa=function(){Et(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,gw=function(){return new Yo},pw=function(){return $o()},mw=is,Oh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,Ul=Bo,lp.COMPLETE="complete",fw=lp,np.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",dt.prototype.listen=dt.prototype.J,ka=np,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,hw=Le}).apply(typeof gl<"u"?gl:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",zy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new rm("@firebase/firestore");function Ks(){return Ss.logLevel}function Y(t,...e){if(Ss.logLevel<=de.DEBUG){const r=e.map(fm);Ss.debug(`Firestore (${zi}): ${t}`,...r)}}function Jr(t,...e){if(Ss.logLevel<=de.ERROR){const r=e.map(fm);Ss.error(`Firestore (${zi}): ${t}`,...r)}}function Ns(t,...e){if(Ss.logLevel<=de.WARN){const r=e.map(fm);Ss.warn(`Firestore (${zi}): ${t}`,...r)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,yw(t,n,r)}function yw(t,e,r){let n=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Jr(n),new Error(n)}function ve(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||yw(e,s,n)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends jr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pt.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ve(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ve(typeof n.accessToken=="string",31837,{l:n}),new vw(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class nC{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sC{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iC{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ve(this.o===void 0,3512);const n=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ve(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new qy(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=aC(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function he(t,e){return t<e?-1:t>e?1:0}function Lh(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),i=e.charAt(n);if(s!==i)return Id(s)===Id(i)?he(s,i):Id(s)?1:-1}return he(t.length,e.length)}const oC=55296,lC=57343;function Id(t){const e=t.charCodeAt(0);return e>=oC&&e<=lC}function Ai(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="__name__";class wr{constructor(e,r,n){r===void 0?r=0:r>e.length&&ne(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ne(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=wr.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return he(e.length,r.length)}static compareSegments(e,r){const n=wr.isNumericId(e),s=wr.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?wr.extractNumericId(e).compare(wr.extractNumericId(r)):Lh(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vn.fromString(e.substring(4,e.length-2))}}class be extends wr{construct(e,r,n){return new be(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new be(r)}static emptyPath(){return new be([])}}const cC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends wr{construct(e,r,n){return new nt(e,r,n)}static isValidIdentifier(e){return cC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wy}static keyField(){return new nt([Wy])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(n+=c,s++):(i(),s++)}if(i(),a)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(r)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(be.fromString(e))}static fromName(e){return new J(be.fromString(e).popFirst(5))}static empty(){return new J(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return be.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e,r){if(!r)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ww(t,e,r,n){if(e===!0&&n===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Hy(t){if(!J.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(J.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ew(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ou(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ou(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const r={typeString:t};return e&&(r.value=e),r}function Co(t,e){if(!Ew(t))throw new Q(U.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Q(U.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=-62135596800,Qy=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Qy);return new ke(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Ky)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qy}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Co(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:He("string",ke._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ke(0,0))}static max(){return new ae(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function uC(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(n===1e9?new ke(r+1,0):new ke(r,n));return new zn(s,J.empty(),e)}function dC(t){return new zn(t.readTime,t.key,fo)}class zn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new zn(ae.min(),J.empty(),fo)}static max(){return new zn(ae.max(),J.empty(),fo)}}function hC(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=J.comparator(t.documentKey,e.documentKey),r!==0?r:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==fC)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new F((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof F?r:F.resolve(r)}catch(r){return F.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):F.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):F.reject(r)}static resolve(e){return new F((r,n)=>{r(e)})}static reject(e){return new F((r,n)=>{n(e)})}static waitFor(e){return new F((r,n)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&r()},u=>n(u))}),a=!0,i===s&&r()})}static or(e){let r=F.resolve(!1);for(const n of e)r=r.next(s=>s?F.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new F((n,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;r(e[d]).next(m=>{a[d]=m,++c,c===i&&n(a)},m=>s(m))}})}static doWhile(e,r){return new F((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function pC(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Wi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=-1;function cu(t){return t==null}function bc(t){return t===0&&1/t==-1/0}function gC(t){return typeof t=="number"&&Number.isInteger(t)&&!bc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="";function yC(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Yy(e)),e=vC(t.get(r),e);return Yy(e)}function vC(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case bw:r+="";break;default:r+=i}}return r}function Yy(t){return t+bw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function rs(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function kw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,r){this.comparator=e,this.root=r||ot.EMPTY}insert(e,r){return new Oe(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yl(this.root,e,this.comparator,!0)}}class yl{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ot(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new ot(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jy(this.data.getIterator())}getIteratorFrom(e){return new Jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ze(this.comparator);return r.data=e,r}}class Jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new zt([])}unionWith(e){let r=new Ze(nt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Iw("Invalid base64 string: "+i):i}}(e);return new it(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new it(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const xC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const r=xC.exec(t);if(ve(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wn(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="server_timestamp",Sw="__type__",Nw="__previous_value__",Aw="__local_write_time__";function pm(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[Sw])==null?void 0:n.stringValue)===Tw}function uu(t){const e=t.mapValue.fields[Nw];return pm(e)?uu(e):e}function mo(t){const e=qn(t.mapValue.fields[Aw].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,r,n,s,i,a,c,u,d,m){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const kc="(default)";class Ci{constructor(e,r){this.projectId=e,this.database=r||kc}static empty(){return new Ci("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof Ci&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="__type__",wC="__max__",vl={mapValue:{}},Rw="__vector__",Ic="value";function Hn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:bC(t)?9007199254740991:EC(t)?10:11:ne(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const r=Hn(t);if(r!==Hn(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mo(t).isEqual(mo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=qn(s.timestampValue),c=qn(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Wn(s.bytesValue).isEqual(Wn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Fe(s.doubleValue),c=Fe(i.doubleValue);return a===c?bc(a)===bc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Xy(a)!==Xy(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Cr(a[u],c[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function po(t,e){return(t.values||[]).find(r=>Cr(r,e))!==void 0}function Ri(t,e){if(t===e)return 0;const r=Hn(t),n=Hn(e);if(r!==n)return he(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Fe(i.integerValue||i.doubleValue),u=Fe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Zy(t.timestampValue,e.timestampValue);case 4:return Zy(mo(t),mo(e));case 5:return Lh(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Wn(i),u=Wn(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=he(c[d],u[d]);if(m!==0)return m}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=he(Fe(i.latitude),Fe(a.latitude));return c!==0?c:he(Fe(i.longitude),Fe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return e0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,I,j,_;const c=i.fields||{},u=a.fields||{},d=(p=c[Ic])==null?void 0:p.arrayValue,m=(I=u[Ic])==null?void 0:I.arrayValue,f=he(((j=d==null?void 0:d.values)==null?void 0:j.length)||0,((_=m==null?void 0:m.values)==null?void 0:_.length)||0);return f!==0?f:e0(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===vl.mapValue&&a===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(a===vl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const p=Lh(u[f],m[f]);if(p!==0)return p;const I=Ri(c[u[f]],d[m[f]]);if(I!==0)return I}return he(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:r})}}function Zy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const r=qn(t),n=qn(e),s=he(r.seconds,n.seconds);return s!==0?s:he(r.nanos,n.nanos)}function e0(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Ri(r[s],n[s]);if(i)return i}return he(r.length,n.length)}function Pi(t){return Vh(t)}function Vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=qn(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Wn(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return J.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Vh(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Vh(r.fields[a])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Fl(t){switch(Hn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uu(t);return e?16+Fl(e):16;case 5:return 2*t.stringValue.length;case 6:return Wn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Fl(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return rs(n.fields,(i,a)=>{s+=i.length+Fl(a)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function t0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mh(t){return!!t&&"integerValue"in t}function gm(t){return!!t&&"arrayValue"in t}function r0(t){return!!t&&"nullValue"in t}function n0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $l(t){return!!t&&"mapValue"in t}function EC(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[Cw])==null?void 0:n.stringValue)===Rw}function Ua(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return rs(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ua(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ua(t.arrayValue.values[r]);return e}return{...t}}function bC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!$l(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ua(r)}setAll(e){let r=nt.emptyPath(),n={},s=[];e.forEach((a,c)=>{if(!r.isImmediateParentOf(c)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=c.popLast()}a?n[c.lastSegment()]=Ua(a):s.push(c.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());$l(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];$l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){rs(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Pt(Ua(this.value))}}function Pw(t){const e=[];return rs(t.fields,(r,n)=>{const s=new nt([r]);if($l(n)){const i=Pw(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,r,n,s,i,a,c){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new yt(e,0,ae.min(),ae.min(),ae.min(),Pt.empty(),0)}static newFoundDocument(e,r,n,s){return new yt(e,1,r,ae.min(),n,s,0)}static newNoDocument(e,r){return new yt(e,2,r,ae.min(),ae.min(),Pt.empty(),0)}static newUnknownDocument(e,r){return new yt(e,3,r,ae.min(),ae.min(),Pt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r){this.position=e,this.inclusive=r}}function s0(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=J.comparator(J.fromName(a.referenceValue),r.key):n=Ri(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function i0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Cr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,r="asc"){this.field=e,this.dir=r}}function kC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{}class We extends jw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new TC(e,r,n):r==="array-contains"?new AC(e,n):r==="in"?new CC(e,n):r==="not-in"?new RC(e,n):r==="array-contains-any"?new PC(e,n):new We(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new SC(e,n):new NC(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Ri(r,this.value)):r!==null&&Hn(this.value)===Hn(r)&&this.matchesComparison(Ri(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends jw{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new gr(e,r)}matches(e){return Dw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dw(t){return t.op==="and"}function Ow(t){return IC(t)&&Dw(t)}function IC(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function Uh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Pi(t.value);if(Ow(t))return t.filters.map(e=>Uh(e)).join(",");{const e=t.filters.map(r=>Uh(r)).join(",");return`${t.op}(${e})`}}function Lw(t,e){return t instanceof We?function(n,s){return s instanceof We&&n.op===s.op&&n.field.isEqual(s.field)&&Cr(n.value,s.value)}(t,e):t instanceof gr?function(n,s){return s instanceof gr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,c)=>i&&Lw(a,s.filters[c]),!0):!1}(t,e):void ne(19439)}function Vw(t){return t instanceof We?function(r){return`${r.field.canonicalString()} ${r.op} ${Pi(r.value)}`}(t):t instanceof gr?function(r){return r.op.toString()+" {"+r.getFilters().map(Vw).join(" ,")+"}"}(t):"Filter"}class TC extends We{constructor(e,r,n){super(e,r,n),this.key=J.fromName(n.referenceValue)}matches(e){const r=J.comparator(e.key,this.key);return this.matchesComparison(r)}}class SC extends We{constructor(e,r){super(e,"in",r),this.keys=Mw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class NC extends We{constructor(e,r){super(e,"not-in",r),this.keys=Mw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Mw(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>J.fromName(n.referenceValue))}class AC extends We{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return gm(r)&&po(r.arrayValue,this.value)}}class CC extends We{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&po(this.value.arrayValue,r)}}class RC extends We{constructor(e,r){super(e,"not-in",r)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!po(this.value.arrayValue,r)}}class PC extends We{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!gm(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>po(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,r=null,n=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function a0(t,e=null,r=[],n=[],s=null,i=null,a=null){return new jC(t,e,r,n,s,i,a)}function ym(t){const e=oe(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Uh(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),cu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Pi(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Pi(n)).join(",")),e.Te=r}return e.Te}function vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!kC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Lw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i0(t.startAt,e.startAt)&&i0(t.endAt,e.endAt)}function Fh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,r=null,n=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DC(t,e,r,n,s,i,a,c){return new Ro(t,e,r,n,s,i,a,c)}function du(t){return new Ro(t)}function o0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Uw(t){return t.collectionGroup!==null}function Fa(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ze(nt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Sc(i,n))}),r.has(nt.keyField().canonicalString())||e.Ie.push(new Sc(nt.keyField(),n))}return e.Ie}function Nr(t){const e=oe(t);return e.Ee||(e.Ee=OC(e,Fa(t))),e.Ee}function OC(t,e){if(t.limitType==="F")return a0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Sc(s.field,i)});const r=t.endAt?new Tc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Tc(t.startAt.position,t.startAt.inclusive):null;return a0(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function $h(t,e){const r=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Nc(t,e,r){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function hu(t,e){return vm(Nr(t),Nr(e))&&t.limitType===e.limitType}function Fw(t){return`${ym(Nr(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>Vw(s)).join(", ")}]`),cu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Pi(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Pi(s)).join(",")),`Target(${n})`}(Nr(t))}; limitType=${t.limitType})`}function fu(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):J.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Fa(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,c,u){const d=s0(a,c,u);return a.inclusive?d<=0:d<0}(n.startAt,Fa(n),s)||n.endAt&&!function(a,c,u){const d=s0(a,c,u);return a.inclusive?d>=0:d>0}(n.endAt,Fa(n),s))}(t,e)}function LC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $w(t){return(e,r)=>{let n=!1;for(const s of Fa(t)){const i=VC(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function VC(t,e,r){const n=t.field.isKeyField()?J.comparator(e.key,r.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ri(u,d):ne(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rs(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Oe(J.comparator);function Zr(){return MC}const Bw=new Oe(J.comparator);function Ia(...t){let e=Bw;for(const r of t)e=e.insert(r.key,r);return e}function zw(t){let e=Bw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function gs(){return $a()}function qw(){return $a()}function $a(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const UC=new Oe(J.comparator),FC=new Ze(J.comparator);function fe(...t){let e=FC;for(const r of t)e=e.add(r);return e}const $C=new Ze(he);function BC(){return $C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function Ww(t){return{integerValue:""+t}}function Hw(t,e){return gC(e)?Ww(e):xm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this._=void 0}}function zC(t,e,r){return t instanceof Ac?function(s,i){const a={fields:{[Sw]:{stringValue:Tw},[Aw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pm(i)&&(i=uu(i)),i&&(a.fields[Nw]=i),{mapValue:a}}(r,e):t instanceof ji?Kw(t,e):t instanceof Di?Qw(t,e):function(s,i){const a=Gw(s,i),c=l0(a)+l0(s.Ae);return Mh(a)&&Mh(s.Ae)?Ww(c):xm(s.serializer,c)}(t,e)}function qC(t,e,r){return t instanceof ji?Kw(t,e):t instanceof Di?Qw(t,e):r}function Gw(t,e){return t instanceof go?function(n){return Mh(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Ac extends mu{}class ji extends mu{constructor(e){super(),this.elements=e}}function Kw(t,e){const r=Yw(e);for(const n of t.elements)r.some(s=>Cr(s,n))||r.push(n);return{arrayValue:{values:r}}}class Di extends mu{constructor(e){super(),this.elements=e}}function Qw(t,e){let r=Yw(e);for(const n of t.elements)r=r.filter(s=>!Cr(s,n));return{arrayValue:{values:r}}}class go extends mu{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function l0(t){return Fe(t.integerValue||t.doubleValue)}function Yw(t){return gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,r){this.field=e,this.transform=r}}function WC(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ji&&s instanceof ji||n instanceof Di&&s instanceof Di?Ai(n.elements,s.elements,Cr):n instanceof go&&s instanceof go?Cr(n.Ae,s.Ae):n instanceof Ac&&s instanceof Ac}(t.transform,e.transform)}class HC{constructor(e,r){this.version=e,this.transformResults=r}}class Jt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pu{}function Xw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wm(t.key,Jt.none()):new Po(t.key,t.data,Jt.none());{const r=t.data,n=Pt.empty();let s=new Ze(nt.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ns(t.key,n,new zt(s.toArray()),Jt.none())}}function GC(t,e,r){t instanceof Po?function(s,i,a){const c=s.value.clone(),u=u0(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):t instanceof ns?function(s,i,a){if(!Bl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=u0(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Jw(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Ba(t,e,r,n){return t instanceof Po?function(i,a,c,u){if(!Bl(i.precondition,a))return c;const d=i.value.clone(),m=d0(i.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof ns?function(i,a,c,u){if(!Bl(i.precondition,a))return c;const d=d0(i.fieldTransforms,u,a),m=a.data;return m.setAll(Jw(i)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,c){return Bl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,r)}function KC(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=Gw(n.transform,s||null);i!=null&&(r===null&&(r=Pt.empty()),r.set(n.field,i))}return r||null}function c0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ai(n,s,(i,a)=>WC(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends pu{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends pu{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function u0(t,e,r){const n=new Map;ve(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);n.set(i.field,qC(a,c,r[s]))}return n}function d0(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,zC(i,a,e))}return n}class wm extends pu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QC extends pu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&GC(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ba(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ba(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=qw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=r.has(s.key)?null:c;const u=Xw(a,c);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(r,n)=>c0(r,n))&&Ai(this.baseMutations,e.baseMutations,(r,n)=>c0(r,n))}}class Em{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){ve(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return UC}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Em(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,pe;function ZC(t){switch(t){case U.OK:return ne(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function Zw(t){if(t===void 0)return Jr("GRPC error has no .code"),U.UNKNOWN;switch(t){case ze.OK:return U.OK;case ze.CANCELLED:return U.CANCELLED;case ze.UNKNOWN:return U.UNKNOWN;case ze.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ze.INTERNAL:return U.INTERNAL;case ze.UNAVAILABLE:return U.UNAVAILABLE;case ze.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ze.NOT_FOUND:return U.NOT_FOUND;case ze.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ze.ABORTED:return U.ABORTED;case ze.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ze.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:t})}}(pe=ze||(ze={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new Vn([4294967295,4294967295],0);function h0(t){const e=eR().encode(t),r=new dw;return r.update(e),new Uint8Array(r.digest())}function f0(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vn([r,n],0),new Vn([s,i],0)]}class bm{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ta(`Invalid padding: ${r}`);if(n<0)throw new Ta(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Vn.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(Vn.fromNumber(n)));return s.compare(tR)===1&&(s=new Vn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=h0(e),[n,s]=f0(r);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,s,i);if(!this.we(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new bm(i,s,r);return n.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const r=h0(e),[n,s]=f0(r);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,s,i);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,jo.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new gu(ae.min(),s,new Oe(he),Zr(),fe())}}class jo{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new jo(n,r,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class eE{constructor(e,r){this.targetId=e,this.Ce=r}}class tE{constructor(e,r,n=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class m0{constructor(){this.ve=0,this.Fe=p0(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),r=fe(),n=fe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ne(38017,{changeType:i})}}),new jo(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=p0()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zr(),this.Je=xl(),this.He=xl(),this.Ye=new Oe(he)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const i=s.target;if(Fh(i))if(n===0){const a=new J(i.path);this.et(r,a,yt.newNoDocument(a,ae.min()))}else ve(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,c;try{a=Wn(n).toUint8Array()}catch(u){if(u instanceof Iw)return Ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new bm(a,s,i)}catch(u){return Ns(u instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(r,i,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Fh(c.target)){const u=new J(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,yt.newNoDocument(u,e))}i.Be&&(r.set(a,i.ke()),i.qe())}});let n=fe();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new gu(e,r,this.Ye,this.je,n);return this.je=Zr(),this.Je=xl(),this.He=xl(),this.Ye=new Oe(he),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new m0,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ze(he),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ze(he),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Y("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m0),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function xl(){return new Oe(J.comparator)}function p0(){return new Oe(J.comparator)}const nR={asc:"ASCENDING",desc:"DESCENDING"},sR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iR={and:"AND",or:"OR"};class aR{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Bh(t,e){return t.useProto3Json||cu(e)?e:{value:e}}function Cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oR(t,e){return Cc(t,e.toTimestamp())}function Ar(t){return ve(!!t,49232),ae.fromTimestamp(function(r){const n=qn(r);return new ke(n.seconds,n.nanos)}(t))}function km(t,e){return zh(t,e).canonicalString()}function zh(t,e){const r=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function nE(t){const e=be.fromString(t);return ve(lE(e),10190,{key:e.toString()}),e}function qh(t,e){return km(t.databaseId,e.path)}function Td(t,e){const r=nE(e);if(r.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new J(iE(r))}function sE(t,e){return km(t.databaseId,e)}function lR(t){const e=nE(t);return e.length===4?be.emptyPath():iE(e)}function Wh(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iE(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function g0(t,e,r){return{name:qh(t,e),fields:r.value.mapValue.fields}}function cR(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ve(m===void 0||typeof m=="string",58123),it.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),it.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?U.UNKNOWN:Zw(d.code);return new Q(m,d.message||"")}(a);r=new tE(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Td(t,n.document.name),i=Ar(n.document.updateTime),a=n.document.createTime?Ar(n.document.createTime):ae.min(),c=new Pt({mapValue:{fields:n.document.fields}}),u=yt.newFoundDocument(s,i,a,c),d=n.targetIds||[],m=n.removedTargetIds||[];r=new zl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Td(t,n.document),i=n.readTime?Ar(n.readTime):ae.min(),a=yt.newNoDocument(s,i),c=n.removedTargetIds||[];r=new zl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Td(t,n.document),i=n.removedTargetIds||[];r=new zl([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new JC(s,i),c=n.targetId;r=new eE(c,a)}}return r}function uR(t,e){let r;if(e instanceof Po)r={update:g0(t,e.key,e.value)};else if(e instanceof wm)r={delete:qh(t,e.key)};else if(e instanceof ns)r={update:g0(t,e.key,e.data),updateMask:xR(e.fieldMask)};else{if(!(e instanceof QC))return ne(16599,{Vt:e.type});r={verify:qh(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const c=a.transform;if(c instanceof Ac)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ji)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Di)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof go)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),r}function dR(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(r=>function(s,i){let a=s.updateTime?Ar(s.updateTime):Ar(i);return a.isEqual(ae.min())&&(a=Ar(i)),new HC(a,s.transformResults||[])}(r,e))):[]}function hR(t,e){return{documents:[sE(t,e.path)]}}function fR(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=sE(t,s);const i=function(d){if(d.length!==0)return oE(gr.create(d,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(m=>function(p){return{field:Ys(p.field),direction:gR(p.dir)}}(m))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const c=Bh(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:s}}function mR(t){let e=lR(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){ve(n===1,65062);const m=r.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];r.where&&(i=function(f){const p=aE(f);return p instanceof gr&&Ow(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(p=>function(j){return new Sc(Xs(j.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(p))}(r.orderBy));let c=null;r.limit&&(c=function(f){let p;return p=typeof f=="object"?f.value:f,cu(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,I=f.values||[];return new Tc(I,p)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const p=!f.before,I=f.values||[];return new Tc(I,p)}(r.endAt)),DC(e,s,a,i,c,"F",u,d)}function pR(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function aE(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Xs(r.unaryFilter.field);return We.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Xs(r.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xs(r.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xs(r.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(r){return We.create(Xs(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return gr.create(r.compositeFilter.filters.map(n=>aE(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(r.compositeFilter.op))}(t):ne(30097,{filter:t})}function gR(t){return nR[t]}function yR(t){return sR[t]}function vR(t){return iR[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Xs(t){return nt.fromServerFormat(t.fieldPath)}function oE(t){return t instanceof We?function(r){if(r.op==="=="){if(n0(r.value))return{unaryFilter:{field:Ys(r.field),op:"IS_NAN"}};if(r0(r.value))return{unaryFilter:{field:Ys(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(n0(r.value))return{unaryFilter:{field:Ys(r.field),op:"IS_NOT_NAN"}};if(r0(r.value))return{unaryFilter:{field:Ys(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(r.field),op:yR(r.op),value:r.value}}}(t):t instanceof gr?function(r){const n=r.getFilters().map(s=>oE(s));return n.length===1?n[0]:{compositeFilter:{op:vR(r.op),filters:n}}}(t):ne(54877,{filter:t})}function xR(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function lE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,r,n,s,i=ae.min(),a=ae.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new In(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new In(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.yt=e}}function wR(t){const e=mR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.Cn=new bR}addToCollectionParentIndex(e,r){return this.Cn.add(r),F.resolve()}getCollectionParents(e,r){return F.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return F.resolve()}deleteFieldIndex(e,r){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,r){return F.resolve()}getDocumentsMatchingTarget(e,r){return F.resolve(null)}getIndexType(e,r){return F.resolve(0)}getFieldIndexes(e,r){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,r){return F.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,r){return F.resolve(zn.min())}updateCollectionGroup(e,r,n){return F.resolve()}updateIndexEntries(e,r){return F.resolve()}}class bR{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ze(be.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ze(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cE=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(cE,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oi(0)}static cr(){return new Oi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="LruGarbageCollector",kR=1048576;function x0([t,e],[r,n]){const s=he(t,r);return s===0?he(e,n):s}class IR{constructor(e){this.Ir=e,this.buffer=new Ze(x0),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();x0(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class TR{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(v0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Wi(r)?Y(v0,"Ignoring IndexedDB error during garbage collection: ",r):await qi(r)}await this.Vr(3e5)})}}class SR{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return F.resolve(lu.ce);const n=new IR(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(y0)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y0):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,i,a,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,c=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),Ks()<=de.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function NR(t,e){return new SR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.changes=new Ls(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?F.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Ba(n.mutation,s,zt.empty(),ke.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,fe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=fe()){const s=gs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Ia();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=gs();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,fe()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{r.set(a,c)})})}computeViews(e,r,n,s){let i=Zr();const a=$a(),c=function(){return $a()}();return r.forEach((u,d)=>{const m=n.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof ns)?i=i.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),Ba(m.mutation,d,m.mutation.getFieldMask(),ke.now())):a.set(d.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>a.set(d,m)),r.forEach((d,m)=>c.set(d,new CR(m,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,r){const n=$a();let s=new Oe((a,c)=>a-c),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let m=n.get(u)||zt.empty();m=c.applyToLocalView(d,m),n.set(u,m);const f=(s.get(c.batchId)||fe()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=qw();m.forEach(p=>{if(!i.has(p)){const I=Xw(r.get(p),n.get(p));I!==null&&f.set(p,I),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return F.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Uw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):F.resolve(gs());let c=fo,u=i;return a.next(d=>F.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(m=>({batchId:c,changes:zw(m)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new J(r)).next(n=>{let s=Ia();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Ia();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(f,p){return new Ro(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(m=>{m.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,yt.newInvalidDocument(m)))});let c=Ia();return a.forEach((u,d)=>{const m=i.get(u);m!==void 0&&Ba(m.mutation,d,zt.empty(),ke.now()),fu(r,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return F.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ar(s.createTime)}}(r)),F.resolve()}getNamedQuery(e,r){return F.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:wR(s.bundledQuery),readTime:Ar(s.readTime)}}(r)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.overlays=new Oe(J.comparator),this.qr=new Map}getOverlay(e,r){return F.resolve(this.overlays.get(r))}getOverlays(e,r){const n=gs();return F.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.St(e,r,i)}),F.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),F.resolve()}getOverlaysForCollection(e,r,n){const s=gs(),i=r.length+1,a=new J(r.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Oe((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let m=i.get(d.largestBatchId);m===null&&(m=gs(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=gs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return F.resolve(c)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new XC(r,n));let i=this.qr.get(r);i===void 0&&(i=fe(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.Qr=new Ze(tt.$r),this.Ur=new Ze(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new tt(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new tt(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new J(new be([])),n=new tt(r,e),s=new tt(r,e+1),i=[];return this.Ur.forEachInRange([n,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new J(new be([])),n=new tt(r,e),s=new tt(r,e+1);let i=fe();return this.Ur.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new tt(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class tt{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return J.comparator(e.key,r.key)||he(e.Yr,r.Yr)}static Kr(e,r){return he(e.Yr,r.Yr)||J.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(tt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new YC(i,r,n,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new tt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,r){return F.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?mm:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new tt(r,0),s=new tt(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ze(he);return r.forEach(s=>{const i=new tt(s,0),a=new tt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{n=n.add(c.Yr)})}),F.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;J.isDocumentKey(i)||(i=i.child(""));const a=new tt(new J(i),0);let c=new Ze(he);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),F.resolve(this.ti(c))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ve(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return F.forEach(r.mutations,s=>{const i=new tt(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new tt(r,0),s=this.Zr.firstAfterOrEqual(n);return F.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.ri=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return F.resolve(n?n.document.mutableCopy():yt.newInvalidDocument(r))}getEntries(e,r){let n=Zr();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),F.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Zr();const a=r.path,c=new J(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||hC(dC(m),n)<=0||(s.has(m.key)||fu(r,m))&&(i=i.insert(m.key,m.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ne(9500)}ii(e,r){return F.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new VR(this)}getSize(e){return F.resolve(this.size)}}class VR extends AR{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),F.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.persistence=e,this.si=new Ls(r=>ym(r),vm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Im,this.targetCount=0,this.ai=Oi.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),F.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Oi(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,F.resolve()}updateTargetData(e,r){return this.Pr(r),F.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return F.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),F.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),F.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return F.resolve(n)}containsKey(e,r){return F.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,r){this.ui={},this.overlays={},this.ci=new lu(0),this.li=!1,this.li=!0,this.hi=new DR,this.referenceDelegate=e(this),this.Pi=new MR(this),this.indexManager=new ER,this.remoteDocumentCache=function(s){return new LR(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new _R(r),this.Ii=new PR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new jR,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new OR(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Y("MemoryPersistence","Starting transaction:",e);const s=new UR(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,r){return F.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class UR extends mC{constructor(e){super(),this.currentSequenceNumber=e}}class Tm{constructor(e){this.persistence=e,this.Ri=new Im,this.Vi=null}static mi(e){return new Tm(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),F.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),F.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),F.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,n=>{const s=J.fromPath(n);return this.gi(e,s).next(i=>{i||r.removeEntry(s,ae.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return F.or([()=>F.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Rc{constructor(e,r){this.persistence=e,this.pi=new Ls(n=>yC(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=NR(this,r)}static mi(e,r){return new Rc(e,r)}Ei(){}di(e){return F.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return F.forEach(this.pi,(n,s)=>this.br(e,n,s).next(i=>i?F.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,r).next(c=>{c||(n++,i.removeEntry(a,ae.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Fl(e.data.value)),r}br(e,r,n){return F.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return F.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=fe(),s=fe();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sm(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return E1()?8:pC(_t())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ys(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new FR;return this.Ss(e,r,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,r,a,c.size)})}).next(()=>i.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(Ks()<=de.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Qs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Ks()<=de.DEBUG&&Y("QueryEngine","Query:",Qs(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(Ks()<=de.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Qs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(r))):F.resolve())}ys(e,r){if(o0(r))return F.resolve(null);let n=Nr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Nc(r,null,"F"),n=Nr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=fe(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.Ds(r,c);return this.Cs(r,d,a,u.readTime)?this.ys(e,Nc(r,null,"F")):this.vs(e,d,r,u)}))})))}ws(e,r,n,s){return o0(r)||s.isEqual(ae.min())?F.resolve(null):this.ps.getDocuments(e,n).next(i=>{const a=this.Ds(r,i);return this.Cs(r,a,n,s)?F.resolve(null):(Ks()<=de.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qs(r)),this.vs(e,a,r,uC(s,fo)).next(c=>c))})}Ds(e,r){let n=new Ze($w(e));return r.forEach((s,i)=>{fu(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,r,n){return Ks()<=de.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Qs(r)),this.ps.getDocumentsMatchingQuery(e,r,zn.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LocalStore",BR=3e8;class zR{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new Oe(he),this.xs=new Ls(i=>ym(i),vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function qR(t,e,r,n){return new zR(t,e,r,n)}async function dE(t,e){const r=oe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],c=[];let u=fe();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return r.localDocuments.getDocuments(n,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function WR(t,e){const r=oe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,p=f.keys();let I=F.resolve();return p.forEach(j=>{I=I.next(()=>m.getEntry(u,j)).next(_=>{const R=d.docVersions.get(j);ve(R!==null,48541),_.version.compareTo(R)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),m.addEntry(_)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let u=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function hE(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function HR(t,e){const r=oe(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const c=[];e.targetChanges.forEach((m,f)=>{const p=s.get(f);if(!p)return;c.push(r.Pi.removeMatchingKeys(i,m.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(i,m.addedDocuments,f)));let I=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?I=I.withResumeToken(it.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,n)),s=s.insert(f,I),function(_,R,T){return _.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=BR?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,I,m)&&c.push(r.Pi.updateTargetData(i,I))});let u=Zr(),d=fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(GR(i,a,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!n.isEqual(ae.min())){const m=r.Pi.getLastRemoteSnapshotVersion(i).next(f=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));c.push(m)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(r.Ms=s,i))}function GR(t,e,r){let n=fe(),s=fe();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Zr();return r.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Y(Nm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function KR(t,e){const r=oe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=mm),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function QR(t,e){const r=oe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(i=>i?(s=i,F.resolve(s)):r.Pi.allocateTargetId(n).next(a=>(s=new In(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Hh(t,e,r){const n=oe(t),s=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Wi(a))throw a;Y(Nm,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function _0(t,e,r){const n=oe(t);let s=ae.min(),i=fe();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const f=oe(u),p=f.xs.get(m);return p!==void 0?F.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,m)}(n,a,Nr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,r?s:ae.min(),r?i:fe())).next(c=>(YR(n,LC(e),c),{documents:c,Qs:i})))}function YR(t,e,r){let n=t.Os.get(e)||ae.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class w0{constructor(){this.activeTargetIds=BC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XR{constructor(){this.Mo=new w0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="ConnectivityMonitor";class b0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(E0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(E0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l=null;function Gh(){return _l===null?_l=function(){return 268435456+Math.round(2147483648*Math.random())}():_l++,"0x"+_l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="RestConnection",ZR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===kc?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,i){const a=Gh(),c=this.zo(e,r.toUriEncodedString());Y(Sd,`Sending RPC '${e}' ${a}:`,c,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),m=js(d);return this.Jo(e,c,u,n,m).then(f=>(Y(Sd,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Ns(Sd,`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",n),f})}Ho(e,r,n,s,i,a){return this.Go(e,r,n,s,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}zo(e,r){const n=ZR[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class rP extends eP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,i){const a=Gh();return new Promise((c,u)=>{const d=new hw;d.setWithCredentials(!0),d.listenOnce(fw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ul.NO_ERROR:const f=d.getResponseJson();Y(mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),c(f);break;case Ul.TIMEOUT:Y(mt,`RPC '${e}' ${a} timed out`),u(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ul.HTTP_ERROR:const p=d.getStatus();if(Y(mt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const j=I==null?void 0:I.error;if(j&&j.status&&j.message){const _=function(T){const y=T.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(j.status);u(new Q(_,j.message))}else u(new Q(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Q(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Y(mt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);Y(mt,`RPC '${e}' ${a} sending request:`,s),d.send(r,"POST",m,n,15)})}T_(e,r,n){const s=Gh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gw(),c=pw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const m=i.join("");Y(mt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const f=a.createWebChannel(m,u);this.I_(f);let p=!1,I=!1;const j=new tP({Yo:R=>{I?Y(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(p||(Y(mt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Y(mt,`RPC '${e}' stream ${s} sending:`,R),f.send(R))},Zo:()=>f.close()}),_=(R,T,y)=>{R.listen(T,w=>{try{y(w)}catch(S){setTimeout(()=>{throw S},0)}})};return _(f,ka.EventType.OPEN,()=>{I||(Y(mt,`RPC '${e}' stream ${s} transport opened.`),j.o_())}),_(f,ka.EventType.CLOSE,()=>{I||(I=!0,Y(mt,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(f))}),_(f,ka.EventType.ERROR,R=>{I||(I=!0,Ns(mt,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),j.a_(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),_(f,ka.EventType.MESSAGE,R=>{var T;if(!I){const y=R.data[0];ve(!!y,16349);const w=y,S=(w==null?void 0:w.error)||((T=w[0])==null?void 0:T.error);if(S){Y(mt,`RPC '${e}' stream ${s} received error:`,S);const D=S.status;let N=function(v){const b=ze[v];if(b!==void 0)return Zw(b)}(D),E=S.message;N===void 0&&(N=U.INTERNAL,E="Unknown error status: "+D+" with message "+S.message),I=!0,j.a_(new Q(N,E)),f.close()}else Y(mt,`RPC '${e}' stream ${s} received:`,y),j.u_(y)}}),_(c,mw.STAT_EVENT,R=>{R.stat===Oh.PROXY?Y(mt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Oh.NOPROXY&&Y(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){return new aR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="PersistentStream";class mE{constructor(e,r,n,s,i,a,c,u){this.Mi=e,this.S_=n,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fE(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===U.RESOURCE_EXHAUSTED?(Jr(r.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new Q(U.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(k0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Y(k0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nP extends mE{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=cR(this.serializer,e),n=function(i){if(!("targetChange"in i))return ae.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?Ar(a.readTime):ae.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Wh(this.serializer),r.addTarget=function(i,a){let c;const u=a.target;if(c=Fh(u)?{documents:hR(i,u)}:{query:fR(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=rE(i,a.resumeToken);const d=Bh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ae.min())>0){c.readTime=Cc(i,a.snapshotVersion.toTimestamp());const d=Bh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=pR(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Wh(this.serializer),r.removeTarget=e,this.q_(r)}}class sP extends mE{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=dR(e.writeResults,e.commitTime),n=Ar(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Wh(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>uR(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{}class aP extends iP{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,zh(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(U.UNKNOWN,i.toString())})}Ho(e,r,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,zh(r,n),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(r),this.aa=!1):Y("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class lP{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{Vs(this)&&(Y(As,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.Ea.add(4),await Do(d),d.Ra.set("Unknown"),d.Ea.delete(4),await vu(d)}(this))})}),this.Ra=new oP(n,s)}}async function vu(t){if(Vs(t))for(const e of t.da)await e(!0)}async function Do(t){for(const e of t.da)await e(!1)}function pE(t,e){const r=oe(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),Pm(r)?Rm(r):Hi(r).O_()&&Cm(r,e))}function Am(t,e){const r=oe(t),n=Hi(r);r.Ia.delete(e),n.O_()&&gE(r,e),r.Ia.size===0&&(n.O_()?n.L_():Vs(r)&&r.Ra.set("Unknown"))}function Cm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Hi(t).Y_(e)}function gE(t,e){t.Va.Ue(e),Hi(t).Z_(e)}function Rm(t){t.Va=new rR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hi(t).start(),t.Ra.ua()}function Pm(t){return Vs(t)&&!Hi(t).x_()&&t.Ia.size>0}function Vs(t){return oe(t).Ea.size===0}function yE(t){t.Va=void 0}async function cP(t){t.Ra.set("Online")}async function uP(t){t.Ia.forEach((e,r)=>{Cm(t,e)})}async function dP(t,e){yE(t),Pm(t)?(t.Ra.ha(e),Rm(t)):t.Ra.set("Unknown")}async function hP(t,e,r){if(t.Ra.set("Online"),e instanceof tE&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(n){Y(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Pc(t,n)}else if(e instanceof zl?t.Va.Ze(e):e instanceof eE?t.Va.st(e):t.Va.tt(e),!r.isEqual(ae.min()))try{const n=await hE(t.localStore);r.compareTo(n)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(it.EMPTY_BYTE_STRING,m.snapshotVersion)),gE(i,u);const f=new In(m.target,u,d,m.sequenceNumber);Cm(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){Y(As,"Failed to raise snapshot:",n),await Pc(t,n)}}async function Pc(t,e,r){if(!Wi(e))throw e;t.Ea.add(1),await Do(t),t.Ra.set("Offline"),r||(r=()=>hE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(As,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await vu(t)})}function vE(t,e){return e().catch(r=>Pc(t,r,e))}async function xu(t){const e=oe(t),r=Gn(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mm;for(;fP(e);)try{const s=await KR(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,mP(e,s)}catch(s){await Pc(e,s)}xE(e)&&_E(e)}function fP(t){return Vs(t)&&t.Ta.length<10}function mP(t,e){t.Ta.push(e);const r=Gn(t);r.O_()&&r.X_&&r.ea(e.mutations)}function xE(t){return Vs(t)&&!Gn(t).x_()&&t.Ta.length>0}function _E(t){Gn(t).start()}async function pP(t){Gn(t).ra()}async function gP(t){const e=Gn(t);for(const r of t.Ta)e.ea(r.mutations)}async function yP(t,e,r){const n=t.Ta.shift(),s=Em.from(n,e,r);await vE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xu(t)}async function vP(t,e){e&&Gn(t).X_&&await async function(n,s){if(function(a){return ZC(a)&&a!==U.ABORTED}(s.code)){const i=n.Ta.shift();Gn(n).B_(),await vE(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await xu(n)}}(t,e),xE(t)&&_E(t)}async function I0(t,e){const r=oe(t);r.asyncQueue.verifyOperationInProgress(),Y(As,"RemoteStore received new credentials");const n=Vs(r);r.Ea.add(3),await Do(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await vu(r)}async function xP(t,e){const r=oe(t);e?(r.Ea.delete(2),await vu(r)):e||(r.Ea.add(2),await Do(r),r.Ra.set("Unknown"))}function Hi(t){return t.ma||(t.ma=function(r,n,s){const i=oe(r);return i.sa(),new nP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:cP.bind(null,t),t_:uP.bind(null,t),r_:dP.bind(null,t),H_:hP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Pm(t)?Rm(t):t.Ra.set("Unknown")):(await t.ma.stop(),yE(t))})),t.ma}function Gn(t){return t.fa||(t.fa=function(r,n,s){const i=oe(r);return i.sa(),new sP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pP.bind(null,t),r_:vP.bind(null,t),ta:gP.bind(null,t),na:yP.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xu(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(As,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,c=new jm(e,r,a,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),Wi(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{static emptySet(e){return new wi(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||J.comparator(r.key,n.key):(r,n)=>J.comparator(r.key,n.key),this.keyedMap=Ia(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wi;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.ga=new Oe(J.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Li{constructor(e,r,n,s,i,a,c,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(c=>{a.push({type:0,doc:c})}),new Li(e,r,wi.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wP{constructor(){this.queries=S0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=oe(r),i=s.queries;s.queries=S0(),i.forEach((a,c)=>{for(const u of c.Sa)u.onError(n)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function S0(){return new Ls(t=>Fw(t),hu)}async function Om(t,e){const r=oe(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.ba()&&e.Da()&&(n=2):(i=new _P,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(s,!0);break;case 1:i.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const c=Dm(a,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(c)}r.queries.set(s,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&Vm(r)}async function Lm(t,e){const r=oe(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function EP(t,e){const r=oe(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(n=!0);a.wa=s}}n&&Vm(r)}function bP(t,e,r){const n=oe(t),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(r);n.queries.delete(e)}function Vm(t){t.Ca.forEach(e=>{e.next()})}var Kh,N0;(N0=Kh||(Kh={})).Ma="default",N0.Cache="cache";class Mm{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Li(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.key=e}}class EE{constructor(e){this.key=e}}class kP{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=$w(e),this.tu=new wi(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new T0,s=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,f)=>{const p=s.get(m),I=fu(this.query,f)?f:null,j=!!p&&this.mutatedKeys.has(p.key),_=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;p&&I?p.data.isEqual(I.data)?j!==_&&(n.track({type:3,doc:I}),R=!0):this.su(p,I)||(n.track({type:2,doc:I}),R=!0,(u&&this.eu(I,u)>0||d&&this.eu(I,d)<0)&&(c=!0)):!p&&I?(n.track({type:0,doc:I}),R=!0):p&&!I&&(n.track({type:1,doc:p}),R=!0,(u||d)&&(c=!0)),R&&(I?(a=a.add(I),i=_?i.add(m):i.delete(m)):(a=a.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),i=i.delete(m.key),n.track({type:1,doc:m})}return{tu:a,iu:n,Cs:c,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,f)=>function(I,j){const _=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:R})}};return _(I)-_(j)}(m.type,f.type)||this.eu(m.doc,f.doc)),this.ou(n),s=s??!1;const c=r&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Li(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fe(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new EE(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new wE(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=fe();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Li.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class IP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class TP{constructor(e){this.key=e,this.hu=!1}}class SP{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ls(c=>Fw(c),hu),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(J.comparator),this.Au=new Map,this.Ru=new Im,this.Vu={},this.mu=new Map,this.fu=Oi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NP(t,e,r=!0){const n=NE(t);let s;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bE(n,e,r,!0),s}async function AP(t,e){const r=NE(t);await bE(r,e,!0,!1)}async function bE(t,e,r,n){const s=await QR(t.localStore,Nr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await CP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&pE(t.remoteStore,s),c}async function CP(t,e,r,n,s){t.pu=(f,p,I)=>async function(_,R,T,y){let w=R.view.ru(T);w.Cs&&(w=await _0(_.localStore,R.query,!1).then(({documents:E})=>R.view.ru(E,w)));const S=y&&y.targetChanges.get(R.targetId),D=y&&y.targetMismatches.get(R.targetId)!=null,N=R.view.applyChanges(w,_.isPrimaryClient,S,D);return C0(_,R.targetId,N.au),N.snapshot}(t,f,p,I);const i=await _0(t.localStore,e,!0),a=new kP(e,i.Qs),c=a.ru(i.documents),u=jo.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);C0(t,r,d.au);const m=new IP(e,r,a);return t.Tu.set(e,m),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function RP(t,e,r){const n=oe(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);if(i.length>1)return n.Iu.set(s.targetId,i.filter(a=>!hu(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Hh(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Am(n.remoteStore,s.targetId),Qh(n,s.targetId)}).catch(qi)):(Qh(n,s.targetId),await Hh(n.localStore,s.targetId,!0))}async function PP(t,e){const r=oe(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Am(r.remoteStore,n.targetId))}async function jP(t,e,r){const n=FP(t);try{const s=await function(a,c){const u=oe(a),d=ke.now(),m=c.reduce((I,j)=>I.add(j.key),fe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let j=Zr(),_=fe();return u.Ns.getEntries(I,m).next(R=>{j=R,j.forEach((T,y)=>{y.isValidDocument()||(_=_.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,j)).next(R=>{f=R;const T=[];for(const y of c){const w=KC(y,f.get(y.key).overlayedDocument);w!=null&&T.push(new ns(y.key,w,Pw(w.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,T,c)}).next(R=>{p=R;const T=R.applyToLocalDocumentSet(f,_);return u.documentOverlayCache.saveOverlays(I,R.batchId,T)})}).then(()=>({batchId:p.batchId,changes:zw(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Oe(he)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(n,s.batchId,r),await Oo(n,s.changes),await xu(n.remoteStore)}catch(s){const i=Dm(s,"Failed to persist write");r.reject(i)}}async function kE(t,e){const r=oe(t);try{const n=await HR(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Au.get(i);a&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ve(a.hu,14607):s.removedDocuments.size>0&&(ve(a.hu,42227),a.hu=!1))}),await Oo(r,n,e)}catch(n){await qi(n)}}function A0(t,e,r){const n=oe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=oe(a);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const p of f.Sa)p.va(c)&&(d=!0)}),d&&Vm(u)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function DP(t,e,r){const n=oe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),i=s&&s.key;if(i){let a=new Oe(J.comparator);a=a.insert(i,yt.newNoDocument(i,ae.min()));const c=fe().add(i),u=new gu(ae.min(),new Map,new Oe(he),a,c);await kE(n,u),n.du=n.du.remove(i),n.Au.delete(e),Fm(n)}else await Hh(n.localStore,e,!1).then(()=>Qh(n,e,r)).catch(qi)}async function OP(t,e){const r=oe(t),n=e.batch.batchId;try{const s=await WR(r.localStore,e);TE(r,n,null),IE(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Oo(r,s)}catch(s){await qi(s)}}async function LP(t,e,r){const n=oe(t);try{const s=await function(a,c){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(ve(f!==null,37113),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(n.localStore,e);TE(n,e,r),IE(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Oo(n,s)}catch(s){await qi(s)}}function IE(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function TE(t,e,r){const n=oe(t);let s=n.Vu[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Qh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||SE(t,n)})}function SE(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Am(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Fm(t))}function C0(t,e,r){for(const n of r)n instanceof wE?(t.Ru.addReference(n.key,e),VP(t,n)):n instanceof EE?(Y(Um,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||SE(t,n.key)):ne(19791,{wu:n})}function VP(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Y(Um,"New document in limbo: "+r),t.Eu.add(n),Fm(t))}function Fm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new J(be.fromString(e)),n=t.fu.next();t.Au.set(n,new TP(r)),t.du=t.du.insert(r,n),pE(t.remoteStore,new In(Nr(du(r.path)),n,"TargetPurposeLimboResolution",lu.ce))}}async function Oo(t,e,r){const n=oe(t),s=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((c,u)=>{a.push(n.pu(u,e,r).then(d=>{var m;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(m=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:m.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Sm.As(u.targetId,d);i.push(f)}}))}),await Promise.all(a),n.Pu.H_(s),await async function(u,d){const m=oe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(d,p=>F.forEach(p.Es,I=>m.persistence.referenceDelegate.addReference(f,p.targetId,I)).next(()=>F.forEach(p.ds,I=>m.persistence.referenceDelegate.removeReference(f,p.targetId,I)))))}catch(f){if(!Wi(f))throw f;Y(Nm,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const I=m.Ms.get(p),j=I.snapshotVersion,_=I.withLastLimboFreeSnapshotVersion(j);m.Ms=m.Ms.insert(p,_)}}}(n.localStore,i))}async function MP(t,e){const r=oe(t);if(!r.currentUser.isEqual(e)){Y(Um,"User change. New user:",e.toKey());const n=await dE(r.localStore,e);r.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new Q(U.CANCELLED,a))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Oo(r,n.Ls)}}function UP(t,e){const r=oe(t),n=r.Au.get(e);if(n&&n.hu)return fe().add(n.key);{let s=fe();const i=r.Iu.get(e);if(!i)return s;for(const a of i){const c=r.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function NE(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DP.bind(null,e),e.Pu.H_=EP.bind(null,e.eventManager),e.Pu.yu=bP.bind(null,e.eventManager),e}function FP(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return qR(this.persistence,new $R,e.initialUser,this.serializer)}Cu(e){return new uE(Tm.mi,this.serializer)}Du(e){return new XR}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class $P extends jc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){ve(this.persistence.referenceDelegate instanceof Rc,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new TR(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new uE(n=>Rc.mi(n,r),this.serializer)}}class Yh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>A0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=MP.bind(null,this.syncEngine),await xP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wP}()}createDatastore(e){const r=yu(e.databaseInfo.databaseId),n=function(i){return new rP(i)}(e.databaseInfo);return function(i,a,c,u){return new aP(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,c){return new lP(n,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,r=>A0(this.syncEngine,r,0),function(){return b0.v()?new b0:new JR}())}createSyncEngine(e,r){return function(s,i,a,c,u,d,m){const f=new SP(s,i,a,c,u,d);return m&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=oe(s);Y(As,"RemoteStore shutting down."),i.Ea.add(5),await Do(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Yh.provider={build:()=>new Yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="FirestoreClient";class BP{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=au.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Y(Kn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Y(Kn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Dm(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ad(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Kn,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await dE(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function R0(t,e){t.asyncQueue.verifyOperationInProgress();const r=await zP(t);Y(Kn,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>I0(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>I0(e.remoteStore,s)),t._onlineComponents=e}async function zP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Kn,"Using user provided OfflineComponentProvider");try{await Ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ns("Error using user provided cache. Falling back to memory cache: "+r),await Ad(t,new jc)}}else Y(Kn,"Using default OfflineComponentProvider"),await Ad(t,new $P(void 0));return t._offlineComponents}async function AE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Kn,"Using user provided OnlineComponentProvider"),await R0(t,t._uninitializedComponentsProvider._online)):(Y(Kn,"Using default OnlineComponentProvider"),await R0(t,new Yh))),t._onlineComponents}function qP(t){return AE(t).then(e=>e.syncEngine)}async function Dc(t){const e=await AE(t),r=e.eventManager;return r.onListen=NP.bind(null,e.syncEngine),r.onUnlisten=RP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=AP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=PP.bind(null,e.syncEngine),r}function WP(t,e,r={}){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const m=new $m({next:p=>{m.Nu(),a.enqueueAndForget(()=>Lm(i,f));const I=p.docs.has(c);!I&&p.fromCache?d.reject(new Q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&p.fromCache&&u&&u.source==="server"?d.reject(new Q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Mm(du(c.path),m,{includeMetadataChanges:!0,qa:!0});return Om(i,f)}(await Dc(t),t.asyncQueue,e,r,n)),n.promise}function HP(t,e,r={}){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const m=new $m({next:p=>{m.Nu(),a.enqueueAndForget(()=>Lm(i,f)),p.fromCache&&u.source==="server"?d.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Mm(c,m,{includeMetadataChanges:!0,qa:!0});return Om(i,f)}(await Dc(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firestore.googleapis.com",j0=!0;class D0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RE,this.ssl=j0}else this.host=e.host,this.ssl=e.ssl??j0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kR)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ww("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CE(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _u{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xw;switch(n.type){case"firstParty":return new sC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=P0.get(r);n&&(Y("ComponentProvider","Removing Datastore"),P0.delete(r),n.terminate())}(this),Promise.resolve()}}function PE(t,e,r,n={}){var d;t=Tt(t,_u);const s=js(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${r}`;s&&(em(`https://${c}`),tm("Firestore",!0)),i.host!==RE&&i.host!==c&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:n};if(!Qr(u,a)&&(t._setSettings(u),n.mockUserToken)){let m,f;if(typeof n.mockUserToken=="string")m=n.mockUserToken,f=pt.MOCK_USER;else{m=I_(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new pt(p)}t._authCredentials=new tC(new vw(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rn(this.firestore,e,this._query)}}class Pe{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Co(r,Pe._jsonSchema))return new Pe(e,n||null,new J(be.fromString(r.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:He("string",Pe._jsonSchemaVersion),referencePath:He("string")};class qr extends rn{constructor(e,r,n){super(e,r,du(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new J(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function te(t,e,...r){if(t=Ge(t),_w("collection","path",e),t instanceof _u){const n=be.fromString(e,...r);return Gy(n),new qr(t,null,n)}{if(!(t instanceof Pe||t instanceof qr))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(be.fromString(e,...r));return Gy(n),new qr(t.firestore,null,n)}}function q(t,e,...r){if(t=Ge(t),arguments.length===1&&(e=au.newId()),_w("doc","path",e),t instanceof _u){const n=be.fromString(e,...r);return Hy(n),new Pe(t,null,new J(n))}{if(!(t instanceof Pe||t instanceof qr))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(be.fromString(e,...r));return Hy(n),new Pe(t.firestore,t instanceof qr?t.converter:null,new J(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="AsyncQueue";class L0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fE(this,"async_queue_retry"),this._c=()=>{const n=Nd();n&&Y(O0,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Nd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Nd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wi(e))throw e;Y(O0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",V0(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=jm.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:V0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function V0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rr extends _u{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new L0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L0(e),this._firestoreClient=void 0,await e}}}function jE(t,e){const r=typeof t=="object"?t:sm(),n=typeof t=="string"?t:kc,s=ru(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=E_("firestore");i&&PE(s,...i)}return s}function Lo(t){if(t._terminated)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GP(t),t._firestoreClient}function GP(t){var n,s,i;const e=t._freezeSettings(),r=function(c,u,d,m){return new _C(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,CE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new BP(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(it.fromBase64String(e))}catch(r){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new $t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Co(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:He("string",$t._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(Co(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:He("string",dr._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Co(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new hr(e.vectorValues);throw new Q(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:He("string",hr._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^__.*__$/;class QP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,r,this.fieldTransforms):new Po(e,this.data,r,this.fieldTransforms)}}class DE{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ns(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function OE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class wu{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(OE(this.Ac)&&KP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||yu(e)}Cc(e,r,n,s=!1){return new wu({Ac:e,methodName:r,Dc:n,path:nt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eu(t){const e=t._freezeSettings(),r=yu(t._databaseId);return new YP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function LE(t,e,r,n,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,r,s);Wm("Data must be an object, but it was:",a,n);const c=ME(n,a);let u,d;if(i.merge)u=new zt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const m=[];for(const f of i.mergeFields){const p=Xh(e,f,r);if(!a.contains(p))throw new Q(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FE(m,p)||m.push(p)}u=new zt(m),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new QP(new Pt(c),u,d)}class bu extends Ms{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}function VE(t,e,r){return new wu({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bm extends Ms{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=VE(this,e,!0),n=this.vc.map(i=>Us(i,r)),s=new ji(n);return new _m(e.path,s)}isEqual(e){return e instanceof Bm&&Qr(this.vc,e.vc)}}class zm extends Ms{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=VE(this,e,!0),n=this.vc.map(i=>Us(i,r)),s=new Di(n);return new _m(e.path,s)}isEqual(e){return e instanceof zm&&Qr(this.vc,e.vc)}}class qm extends Ms{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new go(e.serializer,Hw(e.serializer,this.Fc));return new _m(e.path,r)}isEqual(e){return e instanceof qm&&this.Fc===e.Fc}}function XP(t,e,r,n){const s=t.Cc(1,e,r);Wm("Data must be an object, but it was:",s,n);const i=[],a=Pt.empty();rs(n,(u,d)=>{const m=Hm(e,u,r);d=Ge(d);const f=s.yc(m);if(d instanceof bu)i.push(m);else{const p=Us(d,f);p!=null&&(i.push(m),a.set(m,p))}});const c=new zt(i);return new DE(a,c,s.fieldTransforms)}function JP(t,e,r,n,s,i){const a=t.Cc(1,e,r),c=[Xh(e,n,r)],u=[s];if(i.length%2!=0)throw new Q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)c.push(Xh(e,i[p])),u.push(i[p+1]);const d=[],m=Pt.empty();for(let p=c.length-1;p>=0;--p)if(!FE(d,c[p])){const I=c[p];let j=u[p];j=Ge(j);const _=a.yc(I);if(j instanceof bu)d.push(I);else{const R=Us(j,_);R!=null&&(d.push(I),m.set(I,R))}}const f=new zt(d);return new DE(m,f,a.fieldTransforms)}function ZP(t,e,r,n=!1){return Us(r,t.Cc(n?4:3,e))}function Us(t,e){if(UE(t=Ge(t)))return Wm("Unsupported field value:",e,t),ME(t,e);if(t instanceof Ms)return function(n,s){if(!OE(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const c of n){let u=Us(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Ge(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Hw(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ke.fromDate(n);return{timestampValue:Cc(s.serializer,i)}}if(n instanceof ke){const i=new ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Cc(s.serializer,i)}}if(n instanceof dr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $t)return{bytesValue:rE(s.serializer,n._byteString)};if(n instanceof Pe){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:km(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof hr)return function(a,c){return{mapValue:{fields:{[Cw]:{stringValue:Rw},[Ic]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return xm(c.serializer,d)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${ou(n)}`)}(t,e)}function ME(t,e){const r={};return kw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rs(t,(n,s)=>{const i=Us(s,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function UE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof dr||t instanceof $t||t instanceof Pe||t instanceof Ms||t instanceof hr)}function Wm(t,e,r){if(!UE(r)||!Ew(r)){const n=ou(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Xh(t,e,r){if((e=Ge(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return Hm(t,e);throw Oc("Field path arguments must be of type string or ",t,!1,void 0,r)}const e2=new RegExp("[~\\*/\\[\\]]");function Hm(t,e,r){if(e.search(e2)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Vo(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Oc(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new Q(U.INVALID_ARGUMENT,c+t+u)}function FE(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Gm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class t2 extends $E{data(){return super.data()}}function Gm(t,e){return typeof e=="string"?Hm(t,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class Qm extends Km{}function lt(t,e,...r){let n=[];e instanceof Km&&n.push(e),n=n.concat(r),function(i){const a=i.filter(u=>u instanceof ku).length,c=i.filter(u=>u instanceof Mo).length;if(a>1||a>0&&c>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Mo extends Qm{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Mo(e,r,n)}_apply(e){const r=this._parse(e);return qE(e._query,r),new rn(e.firestore,e.converter,$h(e._query,r))}_parse(e){const r=Eu(e.firestore);return function(i,a,c,u,d,m,f){let p;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){F0(f,m);const j=[];for(const _ of f)j.push(U0(u,i,_));p={arrayValue:{values:j}}}else p=U0(u,i,f)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||F0(f,m),p=ZP(c,a,f,m==="in"||m==="not-in");return We.create(d,m,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function vt(t,e,r){const n=e,s=Gm("where",t);return Mo._create(s,n,r)}class ku extends Km{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ku(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:gr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)qE(a,u),a=$h(a,u)}(e._query,r),new rn(e.firestore,e.converter,$h(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iu extends Qm{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Iu(e,r,n)}_apply(e){return new rn(e.firestore,e.converter,Nc(e._query,this._limit,this._limitType))}}function zE(t){return Iu._create("limit",t,"F")}function U0(t,e,r){if(typeof(r=Ge(r))=="string"){if(r==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uw(e)&&r.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(be.fromString(r));if(!J.isDocumentKey(n))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return t0(t,new J(n))}if(r instanceof Pe)return t0(t,r._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ou(r)}.`)}function F0(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qE(t,e){const r=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class WE{convertValue(e,r="none"){switch(Hn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return rs(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,s,i;const r=(i=(s=(n=e.fields)==null?void 0:n[Ic].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Fe(a.doubleValue));return new hr(r)}convertGeoPoint(e){return new dr(Fe(e.latitude),Fe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=uu(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){const r=qn(e);return new ke(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=be.fromString(e);ve(lE(n),9688,{name:e});const s=new Ci(n.get(1),n.get(3)),i=new J(n.popFirst(5));return s.isEqual(r)||Jr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class di{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mn extends $E{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Gm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Mn._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Mn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mn._jsonSchema={type:He("string",Mn._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class za extends Mn{data(e={}){return super.data(e)}}class Un{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new di(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new za(this._firestore,this._userDataWriter,n.key,n,new di(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new za(s._firestore,s._userDataWriter,c.doc.key,c.doc,new di(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new za(s._firestore,s._userDataWriter,c.doc.key,c.doc,new di(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:r2(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Un._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=au.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){t=Tt(t,Pe);const e=Tt(t.firestore,Rr);return WP(Lo(e),t._key).then(r=>GE(e,t,r))}Un._jsonSchemaVersion="firestore/querySnapshot/1.0",Un._jsonSchema={type:He("string",Un._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class Ym extends WE{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,r)}}function Xe(t){t=Tt(t,rn);const e=Tt(t.firestore,Rr),r=Lo(e),n=new Ym(e);return BE(t._query),HP(r,t._query).then(s=>new Un(e,n,t,s))}function Sa(t,e,r){t=Tt(t,Pe);const n=Tt(t.firestore,Rr),s=HE(t.converter,e);return Uo(n,[LE(Eu(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Jt.none())])}function ee(t,e,r,...n){t=Tt(t,Pe);const s=Tt(t.firestore,Rr),i=Eu(s);let a;return a=typeof(e=Ge(e))=="string"||e instanceof Vo?JP(i,"updateDoc",t._key,e,r,n):XP(i,"updateDoc",t._key,e),Uo(s,[a.toMutation(t._key,Jt.exists(!0))])}function Jh(t){return Uo(Tt(t.firestore,Rr),[new wm(t._key,Jt.none())])}function ye(t,e){const r=Tt(t.firestore,Rr),n=q(t),s=HE(t.converter,e);return Uo(r,[LE(Eu(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Jt.exists(!1))]).then(()=>n)}function Gi(t,...e){var u,d,m;t=Ge(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||M0(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(M0(e[n])){const f=e[n];e[n]=(u=f.next)==null?void 0:u.bind(f),e[n+1]=(d=f.error)==null?void 0:d.bind(f),e[n+2]=(m=f.complete)==null?void 0:m.bind(f)}let i,a,c;if(t instanceof Pe)a=Tt(t.firestore,Rr),c=du(t._key.path),i={next:f=>{e[n]&&e[n](GE(a,t,f))},error:e[n+1],complete:e[n+2]};else{const f=Tt(t,rn);a=Tt(f.firestore,Rr),c=f._query;const p=new Ym(a);i={next:I=>{e[n]&&e[n](new Un(a,p,f,I))},error:e[n+1],complete:e[n+2]},BE(t._query)}return function(p,I,j,_){const R=new $m(_),T=new Mm(I,R,j);return p.asyncQueue.enqueueAndForget(async()=>Om(await Dc(p),T)),()=>{R.Nu(),p.asyncQueue.enqueueAndForget(async()=>Lm(await Dc(p),T))}}(Lo(a),c,s,i)}function Uo(t,e){return function(n,s){const i=new zr;return n.asyncQueue.enqueueAndForget(async()=>jP(await qP(n),s,i)),i.promise}(Lo(t),e)}function GE(t,e,r){const n=r.docs.get(e._key),s=new Ym(t);return new Mn(t,s,e._key,n,new di(r.hasPendingWrites,r.fromCache),e.converter)}function Zt(...t){return new Bm("arrayUnion",t)}function Qn(...t){return new zm("arrayRemove",t)}function yo(t){return new qm("increment",t)}(function(e,r=!0){(function(s){zi=s})(Ds),ks(new Bn("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),c=new Rr(new rC(n.getProvider("auth-internal")),new iC(a,n.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ci(d.options.projectId,m)}(a,s),a);return i={useFetchStreams:r,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ir(By,zy,e),Ir(By,zy,"esm2020")})();const n2=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:WE,Bytes:$t,CollectionReference:qr,DocumentReference:Pe,DocumentSnapshot:Mn,FieldPath:Vo,FieldValue:Ms,Firestore:Rr,FirestoreError:Q,GeoPoint:dr,Query:rn,QueryCompositeFilterConstraint:ku,QueryConstraint:Qm,QueryDocumentSnapshot:za,QueryFieldFilterConstraint:Mo,QueryLimitConstraint:Iu,QuerySnapshot:Un,SnapshotMetadata:di,Timestamp:ke,VectorValue:hr,_AutoId:au,_ByteString:it,_DatabaseId:Ci,_DocumentKey:J,_EmptyAuthCredentialsProvider:xw,_FieldPath:nt,_cast:Tt,_logWarn:Ns,_validateIsNotUsedTogether:ww,addDoc:ye,arrayRemove:Qn,arrayUnion:Zt,collection:te,connectFirestoreEmulator:PE,deleteDoc:Jh,doc:q,ensureFirestoreConfigured:Lo,executeWrite:Uo,getDoc:we,getDocs:Xe,getFirestore:jE,increment:yo,limit:zE,onSnapshot:Gi,query:lt,setDoc:Sa,updateDoc:ee,where:vt},Symbol.toStringTag,{value:"Module"}));var s2="firebase",i2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(s2,i2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebasestorage.googleapis.com",a2="storageBucket",o2=2*60*1e3,l2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends jr{constructor(e,r,n=0){super(Cd(e),`Firebase Storage: ${r} (${Cd(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pr||(Pr={}));function Cd(t){return"storage/"+t}function c2(){const t="An unknown error occurred, please check the error payload for server response.";return new Dr(Pr.UNKNOWN,t)}function u2(){return new Dr(Pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d2(){return new Dr(Pr.CANCELED,"User canceled the upload/download.")}function h2(t){return new Dr(Pr.INVALID_URL,"Invalid URL '"+t+"'.")}function f2(t){return new Dr(Pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $0(t){return new Dr(Pr.INVALID_ARGUMENT,t)}function QE(){return new Dr(Pr.APP_DELETED,"The Firebase app was deleted.")}function m2(t){return new Dr(Pr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=lr.makeFromUrl(e,r)}catch{return new lr(e,"")}if(n.path==="")return n;throw f2(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const m="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",I=new RegExp(`^https?://${f}/${m}/b/${s}/o${p}`,"i"),j={bucket:1,path:3},_=r===KE?"(?:storage.googleapis.com|storage.cloud.google.com)":r,R="([^?#]*)",T=new RegExp(`^https?://${_}/${s}/${R}`,"i"),w=[{regex:c,indices:u,postModify:i},{regex:I,indices:j,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<w.length;S++){const D=w[S],N=D.regex.exec(e);if(N){const E=N[D.indices.bucket];let x=N[D.indices.path];x||(x=""),n=new lr(E,x),D.postModify(n);break}}if(n==null)throw h2(e);return n}}class p2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e,r){let n=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function m(...R){d||(d=!0,e.apply(null,R))}function f(R){s=setTimeout(()=>{s=null,t(I,u())},R)}function p(){i&&clearTimeout(i)}function I(R,...T){if(d){p();return}if(R){p(),m.call(null,R,...T);return}if(u()||a){p(),m.call(null,R,...T);return}n<64&&(n*=2);let w;c===1?(c=2,w=0):w=(n+Math.random())*1e3,f(w)}let j=!1;function _(R){j||(j=!0,p(),!d&&(s!==null?(R||(c=2),clearTimeout(s),f(0)):R||(c=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},r),_}function y2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){return t!==void 0}function B0(t,e,r,n){if(n<e)throw $0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw $0(`Invalid value for '${t}'. Expected ${r} or less.`)}function x2(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Lc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lc||(Lc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r,n,s,i,a,c,u,d,m,f,p=!0,I=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,_)=>{this.resolve_=j,this.reject_=_,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new wl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Lc.NO_ERROR,u=i.getStatus();if(!c||_2(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Lc.ABORT;n(!1,new wl(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new wl(d,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());v2(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=c2();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?QE():d2();a(u)}else{const u=u2();a(u)}};this.canceled_?r(!1,new wl(!1,null,!0)):this.backoffId_=g2(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&y2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wl{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function E2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function b2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T2(t,e,r,n,s,i,a=!0,c=!1){const u=x2(t.urlParams),d=t.url+u,m=Object.assign({},t.headers);return k2(m,e),E2(m,r),b2(m,i),I2(m,n),new w2(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function N2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,r){this._service=e,r instanceof lr?this._location=r:this._location=lr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Vc(e,r)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return N2(this._location.path)}get storage(){return this._service}get parent(){const e=S2(this._location.path);if(e===null)return null;const r=new lr(this._location.bucket,e);return new Vc(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw m2(e)}}function z0(t,e){const r=e==null?void 0:e[a2];return r==null?null:lr.makeFromBucketSpec(r,t)}function A2(t,e,r,n={}){t.host=`${e}:${r}`;const s=js(e);s&&(em(`https://${t.host}/b`),tm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:I_(i,t.app.options.projectId))}class C2{constructor(e,r,n,s,i,a=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=KE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o2,this._maxUploadRetryTime=l2,this._requests=new Set,s!=null?this._bucket=lr.makeFromBucketSpec(s,this._host):this._bucket=z0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=z0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vc(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new p2(QE());{const a=T2(e,this._appId,n,s,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const q0="@firebase/storage",W0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="storage";function R2(t=sm(),e){t=Ge(t);const n=ru(t,YE).getImmediate({identifier:e}),s=E_("storage");return s&&P2(n,...s),n}function P2(t,e,r,n={}){A2(t,e,r,n)}function j2(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new C2(r,n,s,e,Ds)}function D2(){ks(new Bn(YE,j2,"PUBLIC").setMultipleInstances(!0)),Ir(q0,W0,""),Ir(q0,W0,"esm2020")}D2();const O2={apiKey:"AIzaSyDpMH6y7xHIxZuP-U87a9FJAijGJN-29tU",authDomain:"cps731-ddc89.firebaseapp.com",projectId:"cps731-ddc89",storageBucket:"cps731-ddc89.firebasestorage.app",messagingSenderId:void 0,appId:"1:1078890774740:web:01cabbe088f273ec73fb41"},Xm=N_(O2),El=ZA(Xm),M=jE(Xm);R2(Xm);const XE=[{email:"admin@artx.com",password:"admin123"}],JE=[{email:"support@artx.com",password:"support123"},{email:"csr@artx.com",password:"csr123"}],H0=t=>{const e=t.toLowerCase();return XE.map(r=>r.email.toLowerCase()).includes(e)?"admin":JE.map(r=>r.email.toLowerCase()).includes(e)?"csr":null},L2=t=>{const e=t.toLowerCase(),r=XE.find(s=>s.email.toLowerCase()===e);if(r)return r;const n=JE.find(s=>s.email.toLowerCase()===e);return n||null},V2=(t,e)=>{const r=L2(t);return r?r.password===e:!0},ZE=O.createContext(null),M2=({children:t})=>{const[e,r]=O.useState(null),[n,s]=O.useState(null),[i,a]=O.useState(!0);O.useEffect(()=>{let p=null;const I=$N(El,async j=>{s(j),j?p=Gi(q(M,"users",j.uid),_=>{if(_.exists()){const R=_.data();r({...R,balance:R.balance??0,heldAmount:R.heldAmount??0})}a(!1)}):(p&&p(),r(null),a(!1))});return()=>{I(),p&&p()}},[]);const c=async(p,I)=>{if(!V2(p,I))throw new Error("Invalid credentials for this account");const j=await MN(El,p,I),_=q(M,"users",j.user.uid),R=await we(_),T=H0(p);if(R.exists()){let y=R.data();return T&&y.role!==T&&(y={...y,role:T},await Sa(_,y)),r(y),y}else{const y={id:j.user.uid,name:p.split("@")[0],email:p,role:T||"buyer",balance:0,heldAmount:0};return await Sa(_,y),r(y),y}},u=async(p,I,j,_)=>{const R=await VN(El,p,I),y=H0(p)||_,w={id:R.user.uid,name:j,email:p,role:y==="artist"?"buyer":y,balance:0,heldAmount:0};return y==="artist"&&(w.artistStatus="pending"),await Sa(q(M,"users",R.user.uid),w),y==="artist"&&await Sa(q(M,"artistRequests",R.user.uid),{userId:R.user.uid,name:j,email:p,status:"pending",requestedAt:new Date().toISOString()}),r(w),w},d=async()=>{await BN(El),r(null)},m=async p=>{if(!(e!=null&&e.id))throw new Error("Must be logged in");if(p<=0)throw new Error("Amount must be positive");const I=(e.balance||0)+p;await ee(q(M,"users",e.id),{balance:I})},f=async()=>{if(!n)return;const p=await we(q(M,"users",n.uid));if(p.exists()){const I=p.data();r({...I,balance:I.balance??0})}};return o.jsx(ZE.Provider,{value:{user:e,firebaseUser:n,loading:i,login:c,register:u,logout:d,addFunds:m,refreshUser:f},children:t})},Me=()=>{const t=O.useContext(ZE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},eb=O.createContext(null),U2=({children:t})=>{const{user:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState([]),[a,c]=O.useState(!0),u=O.useCallback(async()=>{try{const D=await Xe(te(M,"auctions")),N=[];D.forEach(E=>{N.push({id:E.id,...E.data()})}),n(N)}catch(D){console.error("Error fetching auctions:",D)}finally{c(!1)}},[]),d=O.useCallback(async()=>{const D=new Date;for(const N of r){const E=new Date(N.startTime),x=new Date(N.endTime);let v=null;if(N.status==="scheduled"&&E<=D?v="active":N.status==="active"&&x<=D&&(v="ended"),v)try{if(await ee(q(M,"auctions",N.id),{status:v}),v==="ended"){const b=!N.reservePrice||N.currentPrice>=N.reservePrice;if(N.winnerId&&b&&N.winnerId){const P=N.winnerId,A=N.currentPrice,Z=A*.15,z=A-Z,G=await we(q(M,"users",P));if(G.exists()){const K=G.data().balance||0,H=G.data().heldAmount||0,se=G.data().purchasedArtwork||[];se.push({auctionId:N.id,artworkId:N.artworkId,title:N.title,imageUrl:N.imageUrl,artistId:N.artistId,artistName:N.artistName,price:A,purchasedAt:new Date().toISOString()}),await ee(q(M,"users",P),{balance:K-A,heldAmount:Math.max(0,H-A),purchasedArtwork:se}),await ye(te(M,"transactions"),{userId:N.winnerId,type:"purchase",amount:-A,description:`Won auction: "${N.title}"`,auctionId:N.id,createdAt:new Date().toISOString()})}const le=await we(q(M,"users",N.artistId));if(le.exists()){const K=le.data().balance||0,H=le.data().saleHistory||[];H.push({auctionId:N.id,artworkId:N.artworkId,title:N.title,imageUrl:N.imageUrl,buyerId:N.winnerId,buyerName:N.winnerName,salePrice:A,earnings:z,commission:Z,soldAt:new Date().toISOString()}),await ee(q(M,"users",N.artistId),{balance:K+z,saleHistory:H}),await ye(te(M,"transactions"),{userId:N.artistId,type:"auction_sale",amount:z,description:`Auction sold: "${N.title}" (after 15% commission)`,auctionId:N.id,commission:Z,createdAt:new Date().toISOString()})}await ye(te(M,"notifications"),{userId:N.winnerId,auctionId:N.id,type:"auction_won",title:"Congratulations! You won the auction!",message:`You won "${N.title}" with a bid of $${A}. Your account has been charged.`,read:!1,createdAt:new Date().toISOString()});const $=await we(q(M,"users",N.artistId));if($.exists()){const K=$.data().auctionHistory||[];K.push({auctionId:N.id,artworkId:N.artworkId,title:N.title,imageUrl:N.imageUrl,startingPrice:N.startingPrice,finalPrice:A,winnerId:N.winnerId,winnerName:N.winnerName,status:"sold",endedAt:new Date().toISOString()}),await ee(q(M,"users",N.artistId),{auctionHistory:K})}await ye(te(M,"notifications"),{userId:N.artistId,auctionId:N.id,type:"auction_ended",title:"Your auction has ended",message:`"${N.title}" sold for $${A} to ${N.winnerName}. You earned $${z.toFixed(2)} (after 15% commission).`,read:!1,createdAt:new Date().toISOString()})}else{if(N.winnerId){const A=await we(q(M,"users",N.winnerId));if(A.exists()){const Z=A.data().heldAmount||0;await ee(q(M,"users",N.winnerId),{heldAmount:Math.max(0,Z-N.currentPrice)})}await ye(te(M,"notifications"),{userId:N.winnerId,auctionId:N.id,type:"auction_lost",title:"Auction ended - Reserve not met",message:`The auction "${N.title}" ended but the reserve price was not met. Your bid of $${N.currentPrice} was not accepted and your funds have been released.`,read:!1,createdAt:new Date().toISOString()})}const P=await we(q(M,"users",N.artistId));if(P.exists()){const A=P.data().auctionHistory||[];A.push({auctionId:N.id,artworkId:N.artworkId,title:N.title,imageUrl:N.imageUrl,startingPrice:N.startingPrice,finalPrice:N.currentPrice,highestBidderId:N.winnerId||null,highestBidderName:N.winnerName||null,status:N.winnerId?"reserve_not_met":"no_bids",endedAt:new Date().toISOString()}),await ee(q(M,"users",N.artistId),{auctionHistory:A})}await ye(te(M,"notifications"),{userId:N.artistId,auctionId:N.id,type:"auction_ended",title:"Your auction has ended",message:N.winnerId?`"${N.title}" ended but reserve price was not met. Highest bid was $${N.currentPrice}.`:`"${N.title}" ended with no bids.`,read:!1,createdAt:new Date().toISOString()}),await ee(q(M,"auctions",N.id),{winnerId:null,winnerName:null,reserveMet:!1})}}}catch(b){console.error("Error updating auction status:",b)}}},[r]);O.useEffect(()=>{u();const D=lt(te(M,"auctions")),N=Gi(D,E=>{n(x=>{const v=[...x];return E.docChanges().forEach(b=>{const C={id:b.doc.id,...b.doc.data()},P=v.findIndex(A=>A.id===C.id);b.type==="added"&&P===-1?v.push(C):b.type==="modified"&&P!==-1?v[P]=C:b.type==="removed"&&P!==-1&&v.splice(P,1)}),v})});return()=>N()},[u]),O.useEffect(()=>{d();const D=setInterval(d,5e3);return()=>clearInterval(D)},[d]),O.useEffect(()=>{if(!(e!=null&&e.id)){i([]);return}(async()=>{try{const N=lt(te(M,"bids"),vt("bidderId","==",e.id)),E=await Xe(N),x=[];E.forEach(v=>{x.push({id:v.id,...v.data()})}),i(x)}catch(N){console.error("Error fetching user bids:",N)}})()},[e==null?void 0:e.id]);const m=r.filter(D=>D.status==="active"),f=r.filter(D=>{var N;return(e==null?void 0:e.id)&&((N=D.watchers)==null?void 0:N.includes(e.id))}),p=async(D,N)=>{if(!(e!=null&&e.id))throw new Error("Must be logged in to bid");const E=q(M,"auctions",D),x=await we(E);if(!x.exists())throw new Error("Auction not found");const v={id:x.id,...x.data()};if(v.status!=="active")throw new Error("Auction is not active");if(new Date(v.endTime)<new Date)throw new Error("Auction has ended");if(N<=v.currentPrice)throw new Error("Bid must be higher than current price");if(N<v.currentPrice+v.minBidIncrement)throw new Error(`Minimum bid increment is $${v.minBidIncrement}`);const b=await we(q(M,"users",e.id)),C=b.exists()&&b.data().balance||0,P=b.exists()&&b.data().heldAmount||0,A=C-P;if(N>A)throw new Error(`Insufficient available balance. You have $${A.toFixed(2)} available but trying to bid $${N}. Please add funds to your wallet.`);const Z=v.winnerId,z=v.currentPrice,G={auctionId:D,bidderId:e.id,bidderName:e.name,amount:N,timestamp:new Date().toISOString(),isAutoBid:!1};await ye(te(M,"bids"),G);const le=Z===e.id?N-z:N;if(await ee(q(M,"users",e.id),{heldAmount:P+le}),Z&&Z!==e.id){const H=await we(q(M,"users",Z));if(H.exists()){const se=H.data().heldAmount||0;await ee(q(M,"users",Z),{heldAmount:Math.max(0,se-z)})}}const $=[...v.priceHistory||[],{price:N,timestamp:new Date().toISOString()}];await ee(E,{currentPrice:N,winnerId:e.id,winnerName:e.name,totalBids:(v.totalBids||0)+1,priceHistory:$}),Z&&Z!==e.id&&await ye(te(M,"notifications"),{userId:Z,auctionId:D,type:"outbid",title:"You've been outbid!",message:`Someone placed a higher bid of $${N} on "${v.title}"`,read:!1,createdAt:new Date().toISOString()}),await ye(te(M,"notifications"),{userId:v.artistId,auctionId:D,type:"new_bid",title:"New bid on your auction!",message:`${e.name} placed a bid of $${N} on "${v.title}"`,read:!1,createdAt:new Date().toISOString()});const K=(v.watchers||[]).filter(H=>H!==e.id&&H!==Z&&H!==v.artistId);for(const H of K)await ye(te(M,"notifications"),{userId:H,auctionId:D,type:"new_bid",title:"New bid on watched auction",message:`New bid of $${N} on "${v.title}"`,read:!1,createdAt:new Date().toISOString()});i(H=>[...H,{...G,id:"temp-"+Date.now()}])},I=async D=>{if(!(e!=null&&e.id))throw new Error("Must be logged in to withdraw bid");const N=q(M,"auctions",D),E=await we(N);if(!E.exists())throw new Error("Auction not found");const x={id:E.id,...E.data()};if(x.status!=="active")throw new Error("Auction is not active");if(x.winnerId!==e.id)throw new Error("You are not the current highest bidder");const v=lt(te(M,"bids"),vt("auctionId","==",D)),b=await Xe(v),C=[];b.forEach(z=>{C.push({id:z.id,...z.data()})}),C.sort((z,G)=>G.amount-z.amount);const P=C.find(z=>z.bidderId===e.id);if(!P)throw new Error("No bid found to withdraw");const A=await we(q(M,"users",e.id));if(A.exists()){const z=A.data().heldAmount||0;await ee(q(M,"users",e.id),{heldAmount:Math.max(0,z-P.amount)})}await ee(q(M,"bids",P.id),{withdrawn:!0});const Z=C.filter(z=>z.bidderId!==e.id&&!z.withdrawn);if(Z.length>0){const z=Z[0],G=await we(q(M,"users",z.bidderId));if(G.exists()){const $=G.data().heldAmount||0;await ee(q(M,"users",z.bidderId),{heldAmount:$+z.amount})}const le=x.priceHistory.filter($=>$.price!==P.amount);await ee(N,{currentPrice:z.amount,winnerId:z.bidderId,winnerName:z.bidderName,totalBids:x.totalBids-1,priceHistory:le}),await ye(te(M,"notifications"),{userId:z.bidderId,auctionId:D,type:"now_winning",title:"You're now the highest bidder!",message:`The previous high bidder withdrew. You're now winning "${x.title}" with $${z.amount}!`,read:!1,createdAt:new Date().toISOString()})}else await ee(N,{currentPrice:x.startingPrice,winnerId:null,winnerName:null,totalBids:0,priceHistory:[{price:x.startingPrice,timestamp:new Date().toISOString()}]});await ye(te(M,"notifications"),{userId:x.artistId,auctionId:D,type:"bid_withdrawn",title:"Bid withdrawn from your auction",message:`${e.name} withdrew their bid of $${P.amount} from "${x.title}".`,read:!1,createdAt:new Date().toISOString()})},j=async D=>{if(!(e!=null&&e.id))throw new Error("Must be logged in");const N=q(M,"auctions",D),E=await we(N);if(!E.exists())throw new Error("Auction not found");const v=E.data().watchers||[];v.includes(e.id)||await ee(N,{watchers:[...v,e.id]})},_=async D=>{if(!(e!=null&&e.id))throw new Error("Must be logged in");const N=q(M,"auctions",D),E=await we(N);if(!E.exists())throw new Error("Auction not found");const v=(E.data().watchers||[]).filter(b=>b!==e.id);await ee(N,{watchers:v})},R=async D=>{if(!(e!=null&&e.id))throw new Error("Must be logged in");if(e.role!=="artist")throw new Error("Only artists can create auctions");const N=10,E=await we(q(M,"users",e.id)),x=E.exists()&&E.data().balance||0;if(x<N)throw new Error(`Insufficient balance. You need $${N} to create an auction but only have $${x.toFixed(2)}. Please add funds to your wallet.`);await ee(q(M,"users",e.id),{balance:x-N}),await ye(te(M,"transactions"),{userId:e.id,type:"auction_fee",amount:-N,description:`Auction hosting fee for "${D.title}"`,createdAt:new Date().toISOString()});const v=new Date,C=new Date(D.startTime)<=v?"active":"scheduled",P={artworkId:D.artworkId,title:D.title,description:D.description,imageUrl:D.imageUrl,artistId:D.artistId,artistName:D.artistName,startingPrice:D.startingPrice,currentPrice:D.startingPrice,minBidIncrement:D.minBidIncrement,startTime:D.startTime,endTime:D.endTime,status:C,totalBids:0,watchers:[],priceHistory:[{price:D.startingPrice,timestamp:new Date().toISOString()}]};return D.reservePrice!==void 0&&(P.reservePrice=D.reservePrice),(await ye(te(M,"auctions"),P)).id},T=async D=>{if(!(e!=null&&e.id))throw new Error("Must be logged in");const N=q(M,"auctions",D),E=await we(N);if(!E.exists())throw new Error("Auction not found");const x={id:E.id,...E.data()};if(x.artistId!==e.id&&e.role!=="admin"&&e.role!=="csr")throw new Error("Only the auction owner or admins can cancel");if(x.status==="ended")throw new Error("Cannot cancel an ended auction");if(x.status==="cancelled")throw new Error("Auction is already cancelled");const v=e.role==="admin"||e.role==="csr";if(x.winnerId){const b=await we(q(M,"users",x.winnerId));if(b.exists()){const C=b.data().heldAmount||0;await ee(q(M,"users",x.winnerId),{heldAmount:Math.max(0,C-x.currentPrice)})}}if(await ee(N,{status:"cancelled",cancelledAt:new Date().toISOString(),cancelledBy:e.id}),x.totalBids>0){const b=lt(te(M,"bids"),vt("auctionId","==",D)),C=await Xe(b),P=new Set;C.forEach(Z=>{P.add(Z.data().bidderId)});const A=v?`The auction "${x.title}" has been cancelled by an administrator. Your held funds have been released.`:`The auction "${x.title}" has been cancelled by the artist. Your held funds have been released.`;for(const Z of P)await ye(te(M,"notifications"),{userId:Z,auctionId:D,type:"auction_cancelled",title:"Auction Cancelled",message:A,read:!1,createdAt:new Date().toISOString()})}for(const b of x.watchers||[])await ye(te(M,"notifications"),{userId:b,auctionId:D,type:"auction_cancelled",title:"Watched Auction Cancelled",message:v?`The auction "${x.title}" you were watching has been cancelled by an administrator.`:`The auction "${x.title}" you were watching has been cancelled by the artist.`,read:!1,createdAt:new Date().toISOString()});v&&await ye(te(M,"notifications"),{userId:x.artistId,auctionId:D,type:"auction_cancelled",title:"Your Auction Was Cancelled",message:`Your auction "${x.title}" has been cancelled by an administrator. Please contact support for more information.`,read:!1,createdAt:new Date().toISOString()})},y=async D=>{try{const N=await we(q(M,"auctions",D));return N.exists()?{id:N.id,...N.data()}:null}catch(N){return console.error("Error fetching auction:",N),null}},w=async D=>{try{const N=lt(te(M,"bids"),vt("auctionId","==",D)),E=await Xe(N),x=[];return E.forEach(v=>{const b=v.data();b.withdrawn||x.push({id:v.id,...b})}),x.sort((v,b)=>new Date(b.timestamp).getTime()-new Date(v.timestamp).getTime())}catch(N){return console.error("Error fetching bids:",N),[]}},S=async()=>{c(!0),await u()};return o.jsx(eb.Provider,{value:{auctions:r,activeAuctions:m,userBids:s,watchedAuctions:f,loading:a,placeBid:p,withdrawBid:I,watchAuction:j,unwatchAuction:_,createAuction:R,cancelAuction:T,getAuction:y,getAuctionBids:w,refreshAuctions:S},children:t})},Tu=()=>{const t=O.useContext(eb);if(!t)throw new Error("useAuction must be used within an AuctionProvider");return t};function F2(){const{user:t,logout:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState(!1);O.useEffect(()=>{if(!t){n([]);return}const f=lt(te(M,"notifications"),vt("userId","==",t.id)),p=Gi(f,I=>{const j=[];I.forEach(_=>{j.push({id:_.id,..._.data()})}),n(j.sort((_,R)=>new Date(R.createdAt).getTime()-new Date(_.createdAt).getTime()))},I=>{console.error("Error fetching notifications:",I)});return()=>p()},[t]);const a=r.filter(f=>!f.read).length,c=async f=>{try{await ee(q(M,"notifications",f),{read:!0}),n(r.map(p=>p.id===f?{...p,read:!0}:p))}catch(p){console.error("Error marking notification read:",p)}},u=async()=>{try{const f=r.filter(p=>!p.read);await Promise.all(f.map(p=>ee(q(M,"notifications",p.id),{read:!0}))),n(r.map(p=>({...p,read:!0})))}catch(f){console.error("Error marking all as read:",f)}},[d,m]=O.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark":!1);return O.useEffect(()=>{d?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[d]),o.jsx("header",{className:"border-b dark:border-gray-800 dark:bg-hf-bg transition-colors duration-200",children:o.jsxs("div",{className:"container mx-auto flex items-center justify-between p-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ie,{to:"/",className:"text-2xl font-bold dark:text-hf-text",children:"ArtX"}),t&&o.jsxs("span",{className:"text-sm text-gray-600 dark:text-hf-muted",children:["Welcome, ",t.name]})]}),o.jsxs("nav",{className:"flex items-center gap-4",children:[o.jsx(ie,{to:"/marketplace",className:"dark:text-hf-text hover:text-purple-600 dark:hover:text-hf-yellow",children:"Marketplace"}),o.jsx(ie,{to:"/artists",className:"dark:text-hf-text hover:text-purple-600 dark:hover:text-hf-yellow",children:"Artists"}),o.jsx(ie,{to:"/auctions",className:"text-purple-600 font-medium dark:text-hf-yellow",children:"Auctions"}),o.jsx(ie,{to:"/support",className:"dark:text-hf-text hover:text-purple-600 dark:hover:text-hf-yellow",children:"Support"}),t?o.jsxs(o.Fragment,{children:[t.role==="admin"&&o.jsx(ie,{to:"/admin",className:"text-red-600 font-medium dark:text-red-400",children:"Admin"}),t.role==="csr"&&o.jsx(ie,{to:"/csr",className:"text-blue-600 font-medium dark:text-blue-400",children:"CSR Dashboard"}),o.jsx(ie,{to:"/dashboard",className:"dark:text-hf-text hover:text-purple-600 dark:hover:text-hf-yellow",children:"Dashboard"}),t.role!=="csr"&&t.role!=="admin"&&o.jsx(ie,{to:"/commissions",className:"dark:text-hf-text hover:text-purple-600 dark:hover:text-hf-yellow",children:"Commissions"}),o.jsx(ie,{to:"/wallet",className:"flex items-center gap-1 px-3 py-1.5 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors dark:bg-green-900/20 dark:border-green-800",children:o.jsxs("span",{className:"text-green-600 font-medium dark:text-green-400",children:["$",(t.balance||0).toFixed(2)]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>i(!s),className:"relative p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 dark:text-hf-text",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),s&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-hf-card border dark:border-gray-700 rounded-lg shadow-lg z-50",children:[o.jsxs("div",{className:"p-3 border-b dark:border-gray-700 flex items-center justify-between",children:[o.jsx("span",{className:"font-medium dark:text-hf-text",children:"Notifications"}),a>0&&o.jsx("button",{onClick:u,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Mark all read"})]}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-hf-muted text-sm",children:"No notifications"}):r.slice(0,5).map(f=>o.jsxs("div",{className:`p-3 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer ${f.read?"":"bg-blue-50 dark:bg-blue-900/20"}`,onClick:()=>c(f.id),children:[o.jsx("p",{className:"text-sm font-medium dark:text-hf-text",children:f.title}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-hf-muted mt-1 line-clamp-2",children:f.message}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(f.createdAt).toLocaleString()})]},f.id))}),r.length>5&&o.jsx(ie,{to:"/dashboard#notifications",className:"block p-2 text-center text-sm text-blue-600 dark:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>i(!1),children:"View all notifications"})]})]}),o.jsx("button",{onClick:()=>m(!d),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:d?"Switch to Light Mode":"Switch to Dark Mode",children:d?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-hf-yellow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),o.jsx("button",{onClick:e,className:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-800 dark:text-hf-text hover:bg-gray-200 dark:hover:bg-gray-700",children:"Sign out"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>m(!d),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:d?"Switch to Light Mode":"Switch to Dark Mode",children:d?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-hf-yellow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),o.jsx(ie,{to:"/login",className:"px-3 py-1 rounded bg-primary text-white hover:bg-purple-700",children:"Sign in"})]})]})]})})}function $2({children:t}){return o.jsxs("div",{className:"min-h-screen bg-white dark:bg-hf-bg",children:[o.jsx(F2,{}),o.jsx("main",{className:"container mx-auto p-6",children:t})]})}function tb(){const{auctions:t}=Tu(),[e,r]=O.useState([]),[n,s]=O.useState(!0),[i,a]=O.useState("all");O.useEffect(()=>{const u=async()=>{try{const f=lt(te(M,"artworks"),vt("forSale","==",!0),zE(10)),p=await Xe(f),I=[];return p.forEach(j=>{const _=j.data();I.push({id:j.id,type:"marketplace",title:_.title,artistName:_.artistName,artistId:_.artistId,imageUrl:_.imageUrl,price:_.price,date:_.createdAt||new Date().toISOString(),link:`/marketplace/${j.id}`})}),I}catch(f){return console.error("Error fetching marketplace items:",f),[]}},d=()=>t.filter(p=>p.status==="active"||p.status==="scheduled").map(p=>({id:p.id,type:"auction",title:p.title,artistName:p.artistName,artistId:p.artistId,imageUrl:p.imageUrl,price:p.currentPrice,date:p.startTime,status:p.status,link:`/auctions/${p.id}`}));(async()=>{s(!0);const f=await u(),p=d(),I=[...f,...p].sort((j,_)=>new Date(_.date).getTime()-new Date(j.date).getTime());r(I),s(!1)})()},[t]);const c=e.filter(u=>i==="all"||u.type===i).slice(0,10);return n?o.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(u=>o.jsx("div",{className:"h-24 bg-gray-100 dark:bg-gray-800 rounded-lg"},u))}):o.jsxs("div",{className:"space-y-4 border dark:border-gray-700 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold dark:text-hf-text flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," Latest Activity"]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:i,onChange:u=>a(u.target.value),className:"appearance-none bg-white dark:bg-hf-card border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-hf-text py-1 pl-3 pr-8 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[o.jsx("option",{value:"all",children:"All Activity"}),o.jsx("option",{value:"auction",children:"Auctions"}),o.jsx("option",{value:"marketplace",children:"Marketplace"})]}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500 dark:text-gray-400",children:o.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),o.jsx("div",{className:"space-y-3",children:c.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-hf-muted bg-gray-50 dark:bg-hf-card rounded-lg border dark:border-gray-700",children:"No recent activity"}):c.map(u=>o.jsx(ie,{to:u.link,className:"block group",children:o.jsxs("div",{className:"flex gap-4 p-3 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-hf-card hover:border-gray-300 dark:hover:border-gray-600 transition-all hover:shadow-sm",children:[o.jsx("div",{className:"w-20 h-20 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 relative",children:u.imageUrl?o.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No Image"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-hf-text truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:u.title}),o.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-full flex-shrink-0 ${u.type==="auction"?u.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"}`,children:u.type==="auction"?u.status==="active"?"Live":"Upcoming":"Market"})]}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-hf-muted truncate mt-0.5",children:["by ",u.artistName]}),o.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[o.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-300",children:[u.type==="auction"?"Bid":"Price",": ",o.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["$",u.price]})]}),o.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:""}),o.jsx("span",{className:"text-gray-500 dark:text-hf-muted",children:new Date(u.date).toLocaleDateString()})]})]})]})},`${u.type}-${u.id}`))})]})}function B2(){return o.jsx("div",{className:"max-w-7xl mx-auto p-6 dark:bg-hf-bg min-h-screen",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsxs("section",{className:"mt-10",children:[o.jsx("h2",{className:"text-3xl font-bold dark:text-hf-text",children:"Discover & Collect"}),o.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-hf-muted",children:"Browse original art, commission artists, or list your work."})]}),o.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(ie,{to:"/artists",className:"p-6 border dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card transition-colors group",children:[o.jsx("span",{className:"text-3xl mb-3 block",children:""}),o.jsx("h3",{className:"text-lg font-semibold dark:text-hf-text group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Featured Artists"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:"Discover talented artists and request commissions"})]}),o.jsxs(ie,{to:"/auctions",className:"p-6 border dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card transition-colors group",children:[o.jsx("span",{className:"text-3xl mb-3 block",children:""}),o.jsx("h3",{className:"text-lg font-semibold dark:text-hf-text group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Live Auctions"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:"Bid on exclusive pieces in real-time"})]}),o.jsxs(ie,{to:"/marketplace",className:"p-6 border dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card transition-colors group",children:[o.jsx("span",{className:"text-3xl mb-3 block",children:""}),o.jsx("h3",{className:"text-lg font-semibold dark:text-hf-text group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Marketplace"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:"Buy artwork directly from artists"})]}),o.jsxs(ie,{to:"/auctions/create",className:"p-6 border dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card transition-colors group",children:[o.jsx("span",{className:"text-3xl mb-3 block",children:""}),o.jsx("h3",{className:"text-lg font-semibold dark:text-hf-text group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Start Selling"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:"List your own artwork for auction or sale"})]})]})]}),o.jsx("div",{className:"lg:col-span-1 mt-10 lg:mt-0",children:o.jsx(tb,{})})]})})}function z2(){const{login:t}=Me(),[e,r]=O.useState(""),[n,s]=O.useState(""),[i,a]=O.useState(null),c=Ps(),u=async d=>{var m,f;d.preventDefault();try{await t(e,n),c("/")}catch(p){a(((f=(m=p==null?void 0:p.response)==null?void 0:m.data)==null?void 0:f.message)||"Login failed")}};return o.jsxs("div",{className:"max-w-md mx-auto p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Sign in"}),o.jsxs("form",{onSubmit:u,className:"mt-4 space-y-3",children:[o.jsx("input",{className:"w-full p-2 border dark:border dark:border dark:bg-gray-800 dark:text-hf-text-gray-700-gray-700 rounded",value:e,onChange:d=>r(d.target.value),placeholder:"Email"}),o.jsx("input",{className:"w-full p-2 border dark:border dark:border dark:bg-gray-800 dark:text-hf-text-gray-700-gray-700 rounded",value:n,onChange:d=>s(d.target.value),placeholder:"Password",type:"password"}),i&&o.jsx("div",{className:"text-red-600",children:i}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-primary text-white",children:"Sign in"}),o.jsx(ie,{to:"/register",className:"text-sm text-blue-600",children:"Create account"})]})]})]})}function q2(){const{register:t}=Me(),[e,r]=O.useState(""),[n,s]=O.useState(""),[i,a]=O.useState(""),[c,u]=O.useState("buyer"),[d,m]=O.useState(null),[f,p]=O.useState(null),I=Ps(),j=async _=>{_.preventDefault(),m(null),p(null);try{await t(n,i,e,c),c==="artist"?p("Your artist application has been submitted! An admin will review your request. You can use the platform as a buyer in the meantime."):I("/")}catch(R){m((R==null?void 0:R.message)||"Registration failed")}};return o.jsxs("div",{className:"max-w-md mx-auto p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Create account"}),o.jsxs("form",{onSubmit:j,className:"mt-4 space-y-3",children:[o.jsx("input",{className:"w-full p-2 border dark:border-gray-700 dark:bg-gray-800 dark:text-hf-text rounded",value:e,onChange:_=>r(_.target.value),placeholder:"Full name"}),o.jsx("input",{className:"w-full p-2 border dark:border-gray-700 dark:bg-gray-800 dark:text-hf-text rounded",value:n,onChange:_=>s(_.target.value),placeholder:"Email"}),o.jsx("input",{className:"w-full p-2 border dark:border-gray-700 dark:bg-gray-800 dark:text-hf-text rounded",value:i,onChange:_=>a(_.target.value),placeholder:"Password",type:"password"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-hf-text",children:"I want to:"}),o.jsxs("select",{className:"w-full p-2 border dark:border-gray-700 dark:bg-gray-800 dark:text-hf-text rounded",value:c,onChange:_=>u(_.target.value),children:[o.jsx("option",{value:"buyer",children:"Buy artwork"}),o.jsx("option",{value:"artist",children:"Sell my artwork"})]})]}),c==="artist"&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded",children:"Note: Artist accounts require admin approval. You'll be able to use the platform as a buyer until approved."}),d&&o.jsx("div",{className:"text-red-600",children:d}),f&&o.jsxs("div",{className:"text-green-700 bg-green-50 dark:bg-green-900/20 dark:text-green-400 p-3 rounded",children:[f,o.jsx(ie,{to:"/",className:"block mt-2 text-blue-600 dark:text-blue-400 underline",children:"Go to Home"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-primary text-white",children:"Create account"}),o.jsx(ie,{to:"/login",className:"text-sm text-blue-600 dark:text-blue-400",children:"Already have an account?"})]})]})]})}function W2(){const{user:t}=Me(),[e,r]=O.useState([]),[n,s]=O.useState(!0),[i,a]=O.useState([]),[c,u]=O.useState(null);O.useEffect(()=>{(async()=>{try{const R=lt(te(M,"artworks"),vt("forSale","==",!0)),T=await Xe(R),y=[];T.forEach(w=>{y.push({id:w.id,...w.data()})}),r(y)}catch(R){console.error("Error fetching listings:",R)}finally{s(!1)}})()},[]),O.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const R=await we(q(M,"users",t.id));R.exists()&&a(R.data().watchlist||[])}catch(R){console.error("Error fetching watchlist:",R)}})()},[t==null?void 0:t.id]);const d=async _=>{if(t!=null&&t.id)try{const R=i.includes(_);await ee(q(M,"users",t.id),{watchlist:R?Qn(_):Zt(_)}),a(R?i.filter(T=>T!==_):[...i,_])}catch(R){console.error("Error updating watchlist:",R)}},m=async _=>{if(!(t!=null&&t.id))return;const R=t.balance||0,T=t.heldAmount||0,y=R-T;if(y<_.price){alert(`Insufficient available balance. You need $${_.price} but only have $${y.toFixed(2)} available${T>0?` ($${T.toFixed(2)} held in auction bids)`:""}. Please add funds to your wallet.`);return}u(_.id);try{const S=(_.quantity||1)-1,D=_.price*.15,N=_.price-D;await ee(q(M,"users",t.id),{balance:yo(-_.price),purchases:Zt({artworkId:_.id,title:_.title,artistName:_.artistName,artistId:_.artistId,price:_.price,imageUrl:_.imageUrl,artworkType:_.artworkType||"physical",purchasedAt:new Date().toISOString()})}),await ee(q(M,"users",_.artistId),{balance:yo(N),sales:Zt({artworkId:_.id,title:_.title,buyerId:t.id,buyerName:t.name,price:_.price,commission:D,earnings:N,imageUrl:_.imageUrl,artworkType:_.artworkType||"physical",soldAt:new Date().toISOString()})}),await ye(te(M,"transactions"),{userId:t.id,type:"purchase",amount:-_.price,description:`Purchased "${_.title}"`,artworkId:_.id,createdAt:new Date().toISOString()}),await ye(te(M,"transactions"),{userId:_.artistId,type:"sale",amount:N,description:`Sold "${_.title}" (after 15% commission)`,artworkId:_.id,commission:D,createdAt:new Date().toISOString()}),await ye(te(M,"notifications"),{userId:_.artistId,type:"sale",title:"Artwork Sold!",message:`Your artwork "${_.title}" was purchased by ${t.name} for $${_.price}. You earned $${N.toFixed(2)} (after 15% commission).`,artworkId:_.id,artworkTitle:_.title,buyerName:t.name,price:_.price,earnings:N,read:!1,createdAt:new Date().toISOString()}),S<=0?(await ee(q(M,"artworks",_.id),{forSale:!1,sold:!0,soldTo:t.id,soldAt:new Date().toISOString(),quantity:0}),r(e.filter(E=>E.id!==_.id))):(await ee(q(M,"artworks",_.id),{quantity:S}),r(e.map(E=>E.id===_.id?{...E,quantity:S}:E))),i.includes(_.id)&&(await ee(q(M,"users",t.id),{watchlist:Qn(_.id)}),a(i.filter(E=>E!==_.id))),alert(`Successfully purchased "${_.title}" for $${_.price}!`)}catch(w){console.error("Error purchasing artwork:",w),alert("Failed to complete purchase. Please try again.")}finally{u(null)}},f=_=>{alert(`Reported artwork ${_}. Thank you for helping keep our community safe.`)},p=async _=>{if(confirm(`Are you sure you want to pull "${_.title}" from the marketplace?`))try{await ee(q(M,"artworks",_.id),{forSale:!1,status:"portfolio"}),r(e.filter(R=>R.id!==_.id)),alert("Listing pulled successfully.")}catch(R){console.error("Error pulling listing:",R),alert("Failed to pull listing.")}},I=_=>{switch(_){case"digital":return"Digital";case"print":return"Print";default:return"Physical"}},j=_=>{switch(_){case"digital":return"bg-purple-100 text-purple-700";case"print":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}};return o.jsxs("div",{className:"max-w-6xl mx-auto p-6 dark:bg-hf-bg min-h-screen",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Marketplace"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mt-1",children:"Discover and purchase original artwork"})]}),n?o.jsx("p",{className:"mt-4 text-gray-500 dark:text-hf-muted",children:"Loading artworks..."}):e.length===0?o.jsxs("div",{className:"mt-8 text-center py-12 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:[o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"No artworks available for sale yet."}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted mt-1",children:"Check back later for new listings!"})]}):o.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(_=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow bg-white dark:bg-hf-card",children:[o.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 relative group cursor-pointer",children:o.jsx(ie,{to:`/marketplace/${_.id}`,children:o.jsx("img",{src:_.imageUrl,alt:_.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})})}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(ie,{to:`/marketplace/${_.id}`,className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:o.jsx("h3",{className:"font-semibold text-lg dark:text-hf-text",children:_.title})}),o.jsx("span",{className:`text-xs px-2 py-1 rounded ${j(_.artworkType)}`,children:I(_.artworkType)})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:["by ",_.artistName]}),_.medium&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:_.medium}),o.jsx("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-500 dark:text-hf-muted",children:o.jsxs("span",{children:["Qty: ",_.quantity||1," available"]})}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:["$",_.price]}),o.jsx(ie,{to:`/artist/${_.artistId}`,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View artist"})]}),t&&t.role!=="artist"&&o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>d(_.id),className:`flex-1 text-sm px-3 py-2 rounded border ${i.includes(_.id)?"bg-yellow-100 border-yellow-300 text-yellow-700 dark:bg-yellow-900 dark:border-yellow-700 dark:text-yellow-200":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-hf-text"}`,children:i.includes(_.id)?" Watch":" Watch"}),o.jsx("button",{onClick:()=>m(_),disabled:c===_.id,className:"flex-1 text-sm px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:c===_.id?"Buying...":"Buy Now"}),t.role==="admin"||t.role==="csr"?o.jsx("button",{onClick:()=>p(_),className:"px-3 py-2 rounded border bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors",title:"Pull Listing",children:"Pull"}):o.jsx("button",{onClick:()=>f(_.id),className:"px-3 py-2 rounded border bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Report this artwork",children:""})]})]})]},_.id))})]})}function H2(){const{id:t}=Zf(),{user:e}=Me(),r=Ps(),[n,s]=O.useState(null),[i,a]=O.useState(!0),[c,u]=O.useState([]),[d,m]=O.useState(!1);O.useEffect(()=>{(async()=>{if(t)try{const R=q(M,"artworks",t),T=await we(R);T.exists()?s({id:T.id,...T.data()}):console.error("Artwork not found")}catch(R){console.error("Error fetching artwork:",R)}finally{a(!1)}})()},[t]),O.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const R=await we(q(M,"users",e.id));R.exists()&&u(R.data().watchlist||[])}catch(R){console.error("Error fetching watchlist:",R)}})()},[e==null?void 0:e.id]);const f=async()=>{if(!(!(e!=null&&e.id)||!n))try{const _=c.includes(n.id);await ee(q(M,"users",e.id),{watchlist:_?Qn(n.id):Zt(n.id)}),u(_?c.filter(R=>R!==n.id):[...c,n.id])}catch(_){console.error("Error updating watchlist:",_)}},p=async()=>{if(!(e!=null&&e.id)||!n)return;const _=e.balance||0,R=e.heldAmount||0,T=_-R;if(T<n.price){alert(`Insufficient available balance. You need $${n.price} but only have $${T.toFixed(2)} available. Please add funds.`);return}m(!0);try{const w=(n.quantity||1)-1,S=n.price*.15,D=n.price-S;await ee(q(M,"users",e.id),{balance:yo(-n.price),purchases:Zt({artworkId:n.id,title:n.title,artistName:n.artistName,artistId:n.artistId,price:n.price,imageUrl:n.imageUrl,artworkType:n.artworkType||"physical",purchasedAt:new Date().toISOString()})}),await ee(q(M,"users",n.artistId),{balance:yo(D),sales:Zt({artworkId:n.id,title:n.title,buyerId:e.id,buyerName:e.name,price:n.price,commission:S,earnings:D,imageUrl:n.imageUrl,artworkType:n.artworkType||"physical",soldAt:new Date().toISOString()})}),await ye(te(M,"transactions"),{userId:e.id,type:"purchase",amount:-n.price,description:`Purchased "${n.title}"`,artworkId:n.id,createdAt:new Date().toISOString()}),await ye(te(M,"transactions"),{userId:n.artistId,type:"sale",amount:D,description:`Sold "${n.title}" (after 15% commission)`,artworkId:n.id,commission:S,createdAt:new Date().toISOString()}),await ye(te(M,"notifications"),{userId:n.artistId,type:"sale",title:"Artwork Sold!",message:`Your artwork "${n.title}" was purchased by ${e.name} for $${n.price}.`,artworkId:n.id,read:!1,createdAt:new Date().toISOString()}),w<=0?(await ee(q(M,"artworks",n.id),{forSale:!1,sold:!0,soldTo:e.id,soldAt:new Date().toISOString(),quantity:0}),s({...n,forSale:!1,quantity:0})):(await ee(q(M,"artworks",n.id),{quantity:w}),s({...n,quantity:w})),c.includes(n.id)&&(await ee(q(M,"users",e.id),{watchlist:Qn(n.id)}),u(c.filter(N=>N!==n.id))),alert(`Successfully purchased "${n.title}"!`)}catch(y){console.error("Error purchasing artwork:",y),alert("Failed to complete purchase.")}finally{m(!1)}},I=async()=>{if(!(!n||!confirm(`Pull "${n.title}" from marketplace?`)))try{await ee(q(M,"artworks",n.id),{forSale:!1,status:"portfolio"}),alert("Listing pulled successfully."),r("/marketplace")}catch(_){console.error("Error pulling listing:",_),alert("Failed to pull listing.")}},j=_=>{switch(_){case"digital":return"Digital";case"print":return"Print";default:return"Physical"}};return i?o.jsx("div",{className:"p-6 text-center dark:text-hf-text",children:"Loading..."}):n?o.jsxs("div",{className:"max-w-6xl mx-auto p-6 dark:bg-hf-bg min-h-screen",children:[o.jsx(ie,{to:"/marketplace",className:"text-blue-600 dark:text-blue-400 hover:underline mb-4 inline-block",children:" Back to Marketplace"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-4",children:[o.jsx("div",{className:"bg-white dark:bg-hf-card rounded-lg overflow-hidden border dark:border-gray-700 shadow-sm",children:o.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 relative",children:o.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover"})})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold dark:text-hf-text",children:n.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-lg text-gray-600 dark:text-hf-muted",children:"by"}),o.jsx(ie,{to:`/artist/${n.artistId}`,className:"text-lg text-blue-600 dark:text-blue-400 hover:underline font-medium",children:n.artistName})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:j(n.artworkType)}),n.medium&&o.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:n.medium}),n.dimensions&&o.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:n.dimensions})]}),o.jsxs("div",{className:"bg-white dark:bg-hf-card p-6 rounded-lg border dark:border-gray-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("span",{className:"text-3xl font-bold text-green-700 dark:text-green-400",children:["$",n.price]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-hf-muted",children:[n.quantity||1," available"]})]}),e&&e.role!=="artist"&&n.forSale&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:p,disabled:d,className:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium text-lg transition-colors",children:d?"Processing...":"Buy Now"}),o.jsx("button",{onClick:f,className:`w-full py-3 rounded-lg border font-medium transition-colors ${c.includes(n.id)?"bg-yellow-50 border-yellow-300 text-yellow-700 dark:bg-yellow-900/20 dark:border-yellow-700 dark:text-yellow-400":"bg-white dark:bg-transparent border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:c.includes(n.id)?" Remove from Watchlist":" Add to Watchlist"})]}),(!e||e.role==="artist")&&n.forSale&&o.jsx("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800/50 rounded text-gray-600 dark:text-gray-400",children:(e==null?void 0:e.role)==="artist"?"Artists cannot buy artworks.":"Please log in to purchase."}),!n.forSale&&o.jsx("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded text-red-600 dark:text-red-400 font-medium",children:"This item is no longer for sale."}),e&&(e.role==="admin"||e.role==="csr")&&o.jsx("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:o.jsx("button",{onClick:I,className:"w-full py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors text-sm",children:"Admin: Pull Listing"})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold dark:text-hf-text mb-2",children:"Description"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted whitespace-pre-wrap leading-relaxed",children:n.description})]})]})]})]}):o.jsx("div",{className:"p-6 text-center dark:text-hf-text",children:"Artwork not found."})}function G2(){var C;const{id:t}=Zf(),{user:e}=Me(),[r,n]=O.useState(null),[s,i]=O.useState([]),[a,c]=O.useState(!0),[u,d]=O.useState(!1),[m,f]=O.useState(!1),[p,I]=O.useState(!1),[j,_]=O.useState(""),[R,T]=O.useState(""),[y,w]=O.useState(!1),[S,D]=O.useState("");O.useEffect(()=>{if(!t)return;(async()=>{var A;c(!0);try{const Z=await we(q(M,"users",t));if(Z.exists()){const $={id:Z.id,...Z.data()};n($),e!=null&&e.id&&d(((A=$.followers)==null?void 0:A.includes(e.id))||!1)}const z=lt(te(M,"artworks"),vt("artistId","==",t)),G=await Xe(z),le=[];G.forEach($=>{const K=$.data();K.sold!==!0&&le.push({id:$.id,...K})}),i(le)}catch(Z){console.error("Error fetching artist:",Z)}finally{c(!1)}})()},[t,e==null?void 0:e.id]);const N=async()=>{if(!(!(e!=null&&e.id)||!(r!=null&&r.id))){f(!0);try{u?(await ee(q(M,"users",r.id),{followers:Qn(e.id)}),await ee(q(M,"users",e.id),{following:Qn(r.id)}),d(!1),n(P=>P?{...P,followers:(P.followers||[]).filter(A=>A!==e.id)}:null)):(await ee(q(M,"users",r.id),{followers:Zt(e.id)}),await ee(q(M,"users",e.id),{following:Zt(r.id)}),d(!0),n(P=>P?{...P,followers:[...P.followers||[],e.id]}:null))}catch(P){console.error("Error updating follow status:",P)}finally{f(!1)}}},E=async P=>{if(P.preventDefault(),!(!e||!r||!j.trim()||!R.trim())){w(!0);try{await ye(te(M,"commissions"),{artistId:r.id,artistName:r.name,buyerId:e.id,buyerName:e.name,buyerEmail:e.email,title:j.trim(),description:R.trim(),status:"pending",createdAt:new Date().toISOString(),messages:[]}),await ye(te(M,"notifications"),{userId:r.id,type:"commission_request",title:"New Commission Request",message:`${e.name} has requested a commission: "${j.trim()}"`,read:!1,createdAt:new Date().toISOString()}),_(""),T(""),I(!1),D("Commission request sent! The artist will review your request."),setTimeout(()=>D(""),5e3)}catch(A){console.error("Error submitting commission request:",A)}finally{w(!1)}}};if(a)return o.jsx("div",{className:"p-6",children:"Loading..."});if(!r)return o.jsx("div",{className:"p-6",children:"Artist not found"});const x=s.filter(P=>P.forSale),v=s.filter(P=>!P.forSale),b=(e==null?void 0:e.id)===r.id;return o.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center text-2xl font-bold text-gray-600 dark:text-hf-muted flex-shrink-0",children:r.name.charAt(0).toUpperCase()}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:r.name}),o.jsxs("p",{className:"text-gray-600 dark:text-hf-muted",children:["Artist",r.location&&`  ${r.location}`,"  ",((C=r.followers)==null?void 0:C.length)||0," followers"]})]}),e&&!b&&o.jsx("button",{onClick:N,disabled:m,className:`px-4 py-2 rounded font-medium transition-colors ${u?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:m?"...":u?"Following":"Follow"})]}),r.bio&&o.jsx("p",{className:"text-gray-700 dark:text-hf-text mt-2",children:r.bio}),(r.contactEmail||r.website||r.instagram||r.twitter)&&o.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 text-sm",children:[r.contactEmail&&o.jsx("a",{href:`mailto:${r.contactEmail}`,className:"text-blue-600 hover:underline",children:"Email"}),r.website&&o.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Website"}),r.instagram&&o.jsx("a",{href:`https://instagram.com/${r.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Instagram"}),r.twitter&&o.jsx("a",{href:`https://twitter.com/${r.twitter.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Twitter"})]})]})]}),x.length>0&&o.jsxs("section",{className:"mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold dark:text-hf-text mb-4",children:"Available for Purchase"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:x.map(P=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[o.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:o.jsx("img",{src:P.imageUrl,alt:P.title,className:"max-w-full max-h-full object-contain"})}),o.jsxs("div",{className:"p-3",children:[o.jsx("h4",{className:"font-medium dark:text-hf-text",children:P.title}),P.medium&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:P.medium}),o.jsxs("p",{className:"text-lg font-bold text-green-700 mt-1",children:["$",P.price]})]})]},P.id))})]}),v.length>0&&o.jsxs("section",{children:[o.jsx("h3",{className:"text-xl font-semibold dark:text-hf-text mb-4",children:"Portfolio"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:v.map(P=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:o.jsx("img",{src:P.imageUrl,alt:P.title,className:"max-w-full max-h-full object-contain"})}),o.jsxs("div",{className:"p-3",children:[o.jsx("h4",{className:"font-medium dark:text-hf-text",children:P.title}),P.medium&&o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:P.medium})]})]},P.id))})]}),s.length===0&&o.jsx("div",{className:"text-center py-8 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"This artist hasn't uploaded any artwork yet."})}),r.commissionsOpen&&!b&&o.jsxs("section",{className:"mt-8 border dark:border-gray-700 rounded-lg p-6 bg-green-50 dark:bg-green-900/20",children:[o.jsx("h3",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-2",children:"Commissions Open"}),r.commissionInfo&&o.jsx("p",{className:"text-gray-700 dark:text-hf-text mb-4 whitespace-pre-wrap",children:r.commissionInfo}),S&&o.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border dark:border-green-700 rounded",children:S}),e?p?o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Commission Title *"}),o.jsx("input",{type:"text",value:j,onChange:P=>_(P.target.value),placeholder:"Brief title for your commission request",className:"w-full p-2 border dark:border-gray-700 rounded",disabled:y})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),o.jsx("textarea",{value:R,onChange:P=>T(P.target.value),placeholder:"Describe what you'd like commissioned, including any specific details, references, size, budget, etc.",rows:5,className:"w-full p-2 border dark:border-gray-700 rounded",disabled:y})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"submit",disabled:y||!j.trim()||!R.trim(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:y?"Sending...":"Send Request"}),o.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"})]})]}):o.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Request Commission"}):o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[o.jsx(ie,{to:"/login",className:"text-blue-600 hover:underline",children:"Log in"})," to request a commission."]})]}),o.jsx("div",{className:"mt-8",children:o.jsx(ie,{to:"/artists",className:"text-blue-600 hover:underline",children:" Back to Artists"})})]})}function K2(){const{user:t}=Me(),[e,r]=O.useState([]),[n,s]=O.useState(!1),[i,a]=O.useState(null),[c,u]=O.useState(!1),[d,m]=O.useState(""),[f,p]=O.useState("physical"),[I,j]=O.useState("1"),[_,R]=O.useState(!1),[T,y]=O.useState([]),[w,S]=O.useState([]),[D,N]=O.useState(!1),[E,x]=O.useState([]),[v,b]=O.useState(!1);O.useEffect(()=>{(t==null?void 0:t.role)==="artist"&&((async()=>{s(!0);try{const le=lt(te(M,"artworks"),vt("artistId","==",t.id)),$=await Xe(le),K=[];$.forEach(H=>{const se=H.data();se.sold!==!0&&K.push({id:H.id,...se})}),r(K.sort((H,se)=>new Date(se.createdAt).getTime()-new Date(H.createdAt).getTime()))}catch(le){console.error("Error fetching artworks:",le)}finally{s(!1)}})(),(async()=>{b(!0);try{const le=await we(q(M,"users",t.id));le.exists()&&x(le.data().sales||[])}catch(le){console.error("Error fetching artist data:",le)}finally{b(!1)}})())},[t]),O.useEffect(()=>{((t==null?void 0:t.role)==="buyer"||t&&t.role!=="artist")&&(async()=>{N(!0);try{const G=await we(q(M,"users",t.id));if(G.exists()){const le=G.data();y(le.purchases||[]);const $=le.watchlist||[];if($.length>0){const K=[];for(const H of $){const se=await we(q(M,"artworks",H));se.exists()&&K.push({id:se.id,...se.data()})}S(K)}}}catch(G){console.error("Error fetching buyer data:",G)}finally{N(!1)}})()},[t]);const C=async z=>{if(t!=null&&t.id)try{await ee(q(M,"users",t.id),{watchlist:Qn(z)}),S(w.filter(G=>G.id!==z))}catch(G){console.error("Error removing from watchlist:",G)}},P=()=>{u(!1),a(null),m(""),p("physical"),j("1")},A=async()=>{if(!(!i||!d)){R(!0);try{await ee(q(M,"artworks",i.id),{forSale:!0,price:parseFloat(d),artworkType:f,quantity:parseInt(I)||1,status:"listed"}),r(e.map(z=>z.id===i.id?{...z,forSale:!0,price:parseFloat(d),status:"listed"}:z)),P()}catch(z){console.error("Error listing artwork:",z)}finally{R(!1)}}},Z=async z=>{try{await ee(q(M,"artworks",z.id),{forSale:!1,price:null,status:"portfolio"}),r(e.map(G=>G.id===z.id?{...G,forSale:!1,price:null,status:"portfolio"}:G))}catch(G){console.error("Error removing from sale:",G)}};return o.jsxs("div",{className:"container mx-auto p-4 dark:bg-hf-bg min-h-screen",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6 dark:text-hf-text",children:"Dashboard"}),o.jsxs("p",{className:"mt-2 dark:text-hf-muted",children:["Welcome back, ",t==null?void 0:t.name]}),(t==null?void 0:t.artistStatus)==="pending"&&o.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-400",children:"Artist Application Pending"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Your application to become an artist is under review."})]}),(t==null?void 0:t.artistStatus)==="rejected"&&o.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-red-800 dark:text-red-400",children:"Artist Application Rejected"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Unfortunately, your artist application was not approved."})]}),(t==null?void 0:t.role)==="artist"&&o.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-green-800 dark:text-green-400",children:"Verified Artist"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:"You're approved to sell artwork on ArtX!"})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(t==null?void 0:t.role)==="artist"&&o.jsxs(o.Fragment,{children:[o.jsxs(ie,{to:"/upload",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Upload Artwork"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"Add artwork to portfolio"})]}),o.jsxs("a",{href:"#my-listings",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"My Listings"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[e.filter(z=>z.forSale).length," active listings"]})]}),o.jsxs("a",{href:"#sales-history",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Sales History"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[E.length," total sales"]})]}),o.jsxs(ie,{to:"/commissions",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Commissions"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"View commission requests"})]})]}),(t==null?void 0:t.role)==="buyer"&&o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"#my-purchases",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"My Purchases"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[T.length," purchased artwork",T.length!==1?"s":""]})]}),o.jsxs("a",{href:"#my-watchlist",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Watchlist"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[w.length," artwork",w.length!==1?"s":""," watching"]})]}),o.jsxs(ie,{to:"/marketplace",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Browse Art"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"Discover new pieces"})]})]}),(t==null?void 0:t.role)==="artist"?o.jsxs(ie,{to:"/artist-settings",className:"p-4 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Profile Settings"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"Edit contact info & bio"})]}):o.jsxs("div",{className:"p-4 border dark:border-gray-700 rounded dark:bg-hf-card",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:"Settings"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"Account preferences"})]})]}),(t==null?void 0:t.role)==="artist"&&o.jsxs("div",{className:"mt-8",id:"my-listings",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-hf-text",children:"My Listings"}),e.filter(z=>z.forSale).length===0?o.jsxs("div",{className:"text-center py-6 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:[o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"You don't have any active listings."}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted mt-1",children:"List artwork from your portfolio below."})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.filter(z=>z.forSale).map(z=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden bg-green-50 dark:bg-green-900/20",children:[o.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:o.jsx("img",{src:z.imageUrl,alt:z.title,className:"max-w-full max-h-full object-contain"})}),o.jsxs("div",{className:"p-3",children:[o.jsx("h4",{className:"font-medium truncate dark:text-hf-text",children:z.title}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:["by ",t==null?void 0:t.name]}),o.jsx("div",{className:"flex items-center justify-between mt-2",children:o.jsxs("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:["$",z.price]})}),o.jsx("button",{onClick:()=>Z(z),className:"mt-2 w-full text-xs px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/40",children:"Remove from Sale"})]})]},z.id))})]}),(t==null?void 0:t.role)==="buyer"&&o.jsxs("div",{className:"mt-8",id:"my-watchlist",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-hf-text",children:"My Watchlist"}),w.length===0?o.jsx("div",{className:"text-center py-6 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"Your watchlist is empty."})}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:w.filter(z=>z.forSale).map(z=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden bg-green-50 dark:bg-green-900/20",children:[o.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:o.jsx("img",{src:z.imageUrl,alt:z.title,className:"max-w-full max-h-full object-contain"})}),o.jsxs("div",{className:"p-3",children:[o.jsx("h4",{className:"font-medium truncate dark:text-hf-text",children:z.title}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:["by ",z.artistName]}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[z.forSale?o.jsxs("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:["$",z.price]}):o.jsx("span",{className:"text-sm text-gray-500 dark:text-hf-muted",children:"Not for sale"}),o.jsx(ie,{to:`/artist/${z.artistId}`,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"View artist"})]}),o.jsx("button",{onClick:()=>C(z.id),className:"mt-2 w-full text-xs px-2 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/40",children:"Remove from Watchlist"})]})]},z.id))})]})]}),o.jsx("div",{className:"w-full lg:w-80 shrink-0 space-y-6",children:o.jsx(tb,{})})]}),c&&i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-hf-card rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-hf-text",children:"List for Sale"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:["Artwork: ",i.title]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-hf-text",children:"Artwork Type *"}),o.jsxs("select",{value:f,onChange:z=>p(z.target.value),className:"w-full p-2 border dark:border-gray-700 rounded dark:bg-gray-800 dark:text-hf-text",children:[o.jsx("option",{value:"physical",children:"Physical Original"}),o.jsx("option",{value:"digital",children:"Digital Artwork"}),o.jsx("option",{value:"print",children:"Print / Reproduction"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-hf-text",children:"Quantity Available *"}),o.jsx("input",{type:"number",value:I,onChange:z=>j(z.target.value),placeholder:"1",className:"w-full p-2 border dark:border-gray-700 rounded dark:bg-gray-800 dark:text-hf-text",min:"1"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:f==="physical"?"Usually 1 for originals":"Number of copies available"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-hf-text",children:"Price (USD) *"}),o.jsx("input",{type:"number",value:d,onChange:z=>m(z.target.value),placeholder:"Enter price",className:"w-full p-2 border dark:border-gray-700 rounded dark:bg-gray-800 dark:text-hf-text",min:"0",step:"0.01"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx("button",{onClick:P,className:"px-4 py-2 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 dark:text-hf-text",children:"Cancel"}),o.jsx("button",{onClick:A,disabled:!d||!I||_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:_?"Listing...":"List for Sale"})]})]})})]})}function Q2(){const{user:t,loading:e}=Me(),[r,n]=O.useState(""),[s,i]=O.useState(""),[a,c]=O.useState(""),[u,d]=O.useState(""),[m,f]=O.useState(""),[p,I]=O.useState(null),[j,_]=O.useState(!1),[R,T]=O.useState(!1),[y,w]=O.useState(null);if(e)return o.jsx("div",{className:"p-6",children:"Loading..."});if(!t||t.role!=="artist")return o.jsx(mr,{to:"/dashboard",replace:!0});const S=async D=>{if(D.preventDefault(),!p){w("Please select an image");return}_(!0),w(null);try{const N=await new Promise((E,x)=>{const v=new FileReader;v.onloadend=()=>E(v.result),v.onerror=x,v.readAsDataURL(p)});await ye(te(M,"artworks"),{title:r,description:s,medium:a,dimensions:u,year:m||null,imageUrl:N,artistId:t.id,artistName:t.name,status:"portfolio",forSale:!1,price:null,createdAt:new Date().toISOString()}),T(!0),n(""),i(""),c(""),d(""),f(""),I(null)}catch(N){console.error("Upload error:",N),w((N==null?void 0:N.message)||(N==null?void 0:N.code)||"Upload failed. Check console for details.")}finally{_(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Upload Artwork to Portfolio"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mt-1",children:"Add artwork to your portfolio. You can list it for sale later."}),R&&o.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border dark:border-gray-700-green-200 rounded-lg",children:[o.jsx("p",{className:"text-green-800",children:"Artwork uploaded successfully!"}),o.jsx("button",{onClick:()=>T(!1),className:"mt-2 text-sm text-green-700 underline",children:"Upload another"})]}),!R&&o.jsxs("form",{onSubmit:S,className:"mt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),o.jsx("input",{value:r,onChange:D=>n(D.target.value),placeholder:"Artwork title",className:"w-full p-2 border dark:border-gray-700 rounded",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),o.jsx("textarea",{value:s,onChange:D=>i(D.target.value),placeholder:"Describe your artwork...",className:"w-full p-2 border dark:border-gray-700 rounded",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Medium"}),o.jsx("input",{value:a,onChange:D=>c(D.target.value),placeholder:"e.g., Oil on canvas",className:"w-full p-2 border dark:border-gray-700 rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dimensions"}),o.jsx("input",{value:u,onChange:D=>d(D.target.value),placeholder:"e.g., 24 x 36 inches",className:"w-full p-2 border dark:border-gray-700 rounded"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Year Created"}),o.jsx("input",{value:m,onChange:D=>f(D.target.value),placeholder:"e.g., 2024",className:"w-full p-2 border dark:border-gray-700 rounded",type:"number"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image *"}),o.jsx("input",{type:"file",accept:"image/*",onChange:D=>{var N;return I(((N=D.target.files)==null?void 0:N[0])||null)},className:"w-full p-2 border dark:border-gray-700 rounded",required:!0})]}),y&&o.jsx("div",{className:"text-red-600",children:y}),o.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 rounded bg-primary text-white disabled:opacity-50",children:j?"Uploading...":"Upload to Portfolio"})]})]})}function Y2(){const{user:t,loading:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState(!0),[a,c]=O.useState(null),[u,d]=O.useState(""),[m,f]=O.useState(!1),[p,I]=O.useState("all");O.useEffect(()=>{if(!t)return;const S=t.role==="artist",D=lt(te(M,"commissions"),vt(S?"artistId":"buyerId","==",t.id)),N=Gi(D,E=>{const x=[];E.forEach(v=>{x.push({id:v.id,...v.data()})}),n(x.sort((v,b)=>new Date(b.createdAt).getTime()-new Date(v.createdAt).getTime())),i(!1)},E=>{console.error("Error fetching commissions:",E),i(!1)});return()=>N()},[t]);const j=async(S,D)=>{try{if(await ee(q(M,"commissions",S.id),{status:D}),(t==null?void 0:t.role)==="artist"){const E={in_progress:{title:"Commission Accepted",message:`${S.artistName} has accepted your commission request: "${S.title}"`},declined:{title:"Commission Declined",message:`${S.artistName} has declined your commission request: "${S.title}"`},completed:{title:"Commission Completed",message:`${S.artistName} has marked your commission as complete: "${S.title}"`}};E[D]&&await ye(te(M,"notifications"),{userId:S.buyerId,type:`commission_${D}`,title:E[D].title,message:E[D].message,read:!1,createdAt:new Date().toISOString()})}else D==="cancelled"&&await ye(te(M,"notifications"),{userId:S.artistId,type:"commission_cancelled",title:"Commission Cancelled",message:`${S.buyerName} has cancelled their commission request: "${S.title}"`,read:!1,createdAt:new Date().toISOString()})}catch(N){console.error("Error updating commission status:",N)}},_=async S=>{if(!(!t||!u.trim())){f(!0);try{const D={senderId:t.id,senderName:t.name,message:u.trim(),timestamp:new Date().toISOString()};await ee(q(M,"commissions",S.id),{messages:Zt(D)});const N=t.role==="artist",E=N?S.buyerId:S.artistId,x=N?S.buyerName:S.artistName;await ye(te(M,"notifications"),{userId:E,type:"commission_message",title:"New Commission Message",message:`${t.name} sent a message regarding: "${S.title}"`,read:!1,createdAt:new Date().toISOString()}),d("")}catch(D){console.error("Error sending reply:",D)}finally{f(!1)}}};if(e||s)return o.jsx("div",{className:"p-6",children:"Loading..."});if(!t)return o.jsx("div",{className:"p-6",children:"Please log in to view commissions."});const R=t.role==="artist",T=p==="all"?r:r.filter(S=>S.status===p),y={all:r.length,pending:r.filter(S=>S.status==="pending").length,in_progress:r.filter(S=>S.status==="in_progress").length,completed:r.filter(S=>S.status==="completed").length,declined:r.filter(S=>S.status==="declined").length,cancelled:r.filter(S=>S.status==="cancelled").length},w=S=>{switch(S){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Commission Requests"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:R?"Manage commission requests from buyers":"Track your commission requests"})]}),!R&&o.jsx(ie,{to:"/artists",className:"text-blue-600 hover:underline",children:"Browse Artists"})]}),o.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:["all","pending","in_progress","completed","declined","cancelled"].map(S=>o.jsxs("button",{onClick:()=>I(S),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${p===S?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[S==="all"?"All":S.replace("_"," ").replace(/\b\w/g,D=>D.toUpperCase())," (",y[S],")"]},S))}),T.length===0?o.jsxs("div",{className:"text-center py-12 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:[o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:p==="all"?R?"No commission requests yet.":"You haven't made any commission requests yet.":`No ${p.replace("_"," ")} commissions.`}),!R&&p==="all"&&o.jsx(ie,{to:"/artists",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Browse artists open for commissions"})]}):o.jsx("div",{className:"space-y-4",children:T.map(S=>o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 dark:bg-hf-card",onClick:()=>c(a===S.id?null:S.id),children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium dark:text-hf-text",children:S.title}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${w(S.status)}`,children:S.status.replace("_"," ")})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-1",children:R?`From: ${S.buyerName}`:`To: ${S.artistName}`}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:new Date(S.createdAt).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[S.messages.length>0&&o.jsxs("span",{className:"text-xs text-gray-500 dark:text-hf-muted",children:[S.messages.length," message",S.messages.length!==1?"s":""]}),o.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${a===S.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),a===S.id&&o.jsxs("div",{className:"border-t dark:border-gray-800 bg-gray-50 dark:bg-hf-card p-4",onClick:D=>D.stopPropagation(),children:[(S.budget||S.deadline)&&o.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4 bg-white dark:bg-gray-800/50 p-3 rounded border dark:border-gray-800",children:[S.budget&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-hf-muted uppercase",children:"Budget"}),o.jsxs("p",{className:"font-medium text-green-700",children:["$",S.budget]})]}),S.deadline&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-hf-muted uppercase",children:"Deadline"}),o.jsx("p",{className:"font-medium",children:new Date(S.deadline).toLocaleDateString()})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium dark:text-hf-text text-gray-700 mb-2",children:"Original Request:"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted whitespace-pre-wrap bg-white dark:bg-gray-800/50 p-3 rounded border dark:border-gray-800",children:S.description})]}),R&&S.status!=="completed"&&S.status!=="declined"&&S.status!=="cancelled"&&o.jsxs("div",{className:"mb-4 flex gap-2",children:[S.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>j(S,"in_progress"),className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Accept"}),o.jsx("button",{onClick:()=>j(S,"declined"),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Decline"})]}),S.status==="in_progress"&&o.jsx("button",{onClick:()=>j(S,"completed"),className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Mark Complete"})]}),!R&&(S.status==="pending"||S.status==="in_progress")&&o.jsx("div",{className:"mb-4",children:o.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this commission request?")&&j(S,"cancelled")},className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Cancel Commission"})}),S.messages.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-sm font-medium dark:text-hf-text text-gray-700 mb-2",children:"Conversation:"}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:S.messages.map((D,N)=>o.jsxs("div",{className:`p-2 rounded text-sm ${D.senderId===t.id?"bg-blue-100 dark:bg-blue-900/30 dark:text-hf-text ml-8":"bg-white dark:bg-gray-800 dark:text-hf-text border dark:border-gray-700 mr-8"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-medium text-xs",children:D.senderName}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-hf-muted",children:new Date(D.timestamp).toLocaleString()})]}),o.jsx("p",{className:"whitespace-pre-wrap",children:D.message})]},N))})]}),S.status!=="completed"&&S.status!=="declined"&&S.status!=="cancelled"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("textarea",{value:u,onChange:D=>d(D.target.value),placeholder:"Type your message...",rows:2,className:"flex-1 p-2 border dark:border-gray-700 rounded text-sm resize-none dark:bg-gray-800 dark:text-hf-text",disabled:m}),o.jsx("button",{onClick:()=>_(S),disabled:m||!u.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 self-end",children:m?"...":"Send"})]}),!R&&o.jsx("div",{className:"mt-4 pt-4 border-t dark:border-gray-800",children:o.jsxs(ie,{to:`/artist/${S.artistId}`,className:"text-blue-600 hover:underline text-sm",children:["View ",S.artistName,"'s Profile"]})})]})]},S.id))})]})}function X2(){const{user:t}=Me(),[e,r]=O.useState(""),[n,s]=O.useState(""),[i,a]=O.useState(!1),[c,u]=O.useState(""),[d,m]=O.useState(""),[f,p]=O.useState([]),[I,j]=O.useState(!0),[_,R]=O.useState(null),[T,y]=O.useState(""),[w,S]=O.useState(!1);O.useEffect(()=>{if(!(t!=null&&t.id)){j(!1);return}(async()=>{try{const b=lt(te(M,"supportTickets"),vt("userId","==",t.id)),C=await Xe(b),P=[];C.forEach(A=>{P.push({id:A.id,...A.data()})}),p(P.sort((A,Z)=>new Date(Z.createdAt).getTime()-new Date(A.createdAt).getTime()))}catch(b){console.error("Error fetching tickets:",b)}finally{j(!1)}})()},[t==null?void 0:t.id]);const D=async v=>{if(v.preventDefault(),!t){m("Please log in to submit a support ticket");return}if(!e.trim()||!n.trim()){m("Please fill in all fields");return}a(!0),m(""),u("");try{const b={userId:t.id,userEmail:t.email,userName:t.name,title:e.trim(),description:n.trim(),status:"open",createdAt:new Date().toISOString(),responses:[]},C=await ye(te(M,"supportTickets"),b);p([{id:C.id,...b},...f]),r(""),s(""),u("Your support ticket has been submitted. We'll get back to you soon!")}catch(b){m(b.message||"Failed to submit ticket")}finally{a(!1)}},N={open:"bg-red-100 text-red-700",in_progress:"bg-yellow-100 text-yellow-700",resolved:"bg-green-100 text-green-700"},E={open:"Open",in_progress:"In Progress",resolved:"Resolved"},x=async v=>{if(!(!t||!T.trim())){S(!0);try{const b={message:T.trim(),from:t.name,createdAt:new Date().toISOString()};await ee(q(M,"supportTickets",v),{responses:Zt(b)});const C=f.map(P=>P.id===v?{...P,responses:[...P.responses||[],b]}:P);p(C),(_==null?void 0:_.id)===v&&R({..._,responses:[..._.responses||[],b]}),y("")}catch(b){console.error("Error sending reply:",b)}finally{S(!1)}}};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Support"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mt-1",children:"Need help? Submit a support ticket and we'll assist you."}),o.jsxs("div",{className:"mt-6 border dark:border dark:border-gray-700-gray-700 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium dark:text-hf-text mb-4",children:"Submit a New Ticket"}),o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Issue Title *"}),o.jsx("input",{type:"text",value:e,onChange:v=>r(v.target.value),placeholder:"Brief summary of your issue",className:"w-full p-2 border dark:border dark:border-gray-700-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),o.jsx("textarea",{value:n,onChange:v=>s(v.target.value),placeholder:"Please describe your issue in detail...",rows:5,className:"w-full p-2 border dark:border dark:border-gray-700-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i})]}),d&&o.jsx("p",{className:"text-red-600 text-sm",children:d}),c&&o.jsx("p",{className:"text-green-600 text-sm",children:c}),o.jsx("button",{type:"submit",disabled:i||!t,className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:i?"Submitting...":"Submit Ticket"}),!t&&o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted",children:"Please log in to submit a support ticket."})]})]}),t&&o.jsxs("div",{className:"mt-8",children:[o.jsx("h3",{className:"text-lg font-medium dark:text-hf-text mb-4",children:"Your Support Tickets"}),I?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"Loading tickets..."}):f.length===0?o.jsx("div",{className:"text-center py-8 border dark:border dark:border-gray-700-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"You haven't submitted any support tickets yet."})}):o.jsx("div",{className:"space-y-3",children:f.map(v=>o.jsxs("div",{onClick:()=>R((_==null?void 0:_.id)===v.id?null:v),className:`border rounded-lg p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(_==null?void 0:_.id)===v.id?"border-blue-500 bg-blue-50":""}`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium dark:text-hf-text",children:v.title}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted mt-1",children:new Date(v.createdAt).toLocaleDateString()})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N[v.status]}`,children:E[v.status]})]}),(_==null?void 0:_.id)===v.id&&o.jsxs("div",{className:"mt-4 pt-4 border dark:border dark:border-gray-700-gray-700-t",children:[o.jsx("p",{className:"text-sm text-gray-700 dark:text-hf-text whitespace-pre-wrap",children:v.description}),v.responses&&v.responses.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm font-medium mb-2",children:"Conversation:"}),o.jsx("div",{className:"space-y-2",children:v.responses.map((b,C)=>o.jsxs("div",{className:`p-3 rounded text-sm ${b.from.includes("Support")?"bg-blue-50":"bg-gray-100"}`,children:[o.jsx("p",{className:"text-gray-700 dark:text-hf-text",children:b.message}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:[b.from,"  ",new Date(b.createdAt).toLocaleString()]})]},C))})]}),v.status==="resolved"?o.jsx("p",{className:"mt-3 text-sm text-green-600",children:"This ticket has been resolved."}):o.jsxs("div",{className:"mt-4 pt-4 border dark:border dark:border-gray-700-gray-700-t",onClick:b=>b.stopPropagation(),children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Reply to this ticket"}),o.jsx("textarea",{value:(_==null?void 0:_.id)===v.id?T:"",onChange:b=>{R(v),y(b.target.value)},onFocus:()=>R(v),placeholder:"Type your reply...",rows:3,className:"w-full p-2 border dark:border dark:border-gray-700-gray-700 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w}),o.jsx("button",{onClick:()=>x(v.id),disabled:w||!T.trim()||(_==null?void 0:_.id)!==v.id,className:"mt-2 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:w&&(_==null?void 0:_.id)===v.id?"Sending...":"Send Reply"})]})]})]},v.id))})]})]})}function J2(){const{user:t,loading:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState([]),[a,c]=O.useState([]),[u,d]=O.useState("dashboard"),[m,f]=O.useState(!0);if(O.useEffect(()=>{(async()=>{f(!0);try{const w=await Xe(te(M,"artistRequests")),S=[];w.forEach(v=>{S.push(v.data())}),c(S.filter(v=>v.status==="pending"));const D=await Xe(te(M,"users")),N=[];D.forEach(v=>{N.push({id:v.id,...v.data()})}),n(N);const E=await Xe(te(M,"artworks")),x=[];E.forEach(v=>{x.push({id:v.id,...v.data()})}),i(x)}catch(w){console.error("Error fetching data:",w)}finally{f(!1)}})()},[]),e)return o.jsx("div",{className:"p-6 text-center dark:text-hf-text",children:"Loading..."});if(!t||t.role!=="admin")return o.jsx(mr,{to:"/",replace:!0});const p=async(y,w)=>{try{await ee(q(M,"users",y),{role:w?"artist":"buyer",artistStatus:w?"approved":"rejected"}),w?await Jh(q(M,"artistRequests",y)):await ee(q(M,"artistRequests",y),{status:"rejected"}),c(a.filter(S=>S.userId!==y))}catch(S){console.error("Error handling artist request:",S)}},I=async y=>{const w=r.find(D=>D.id===y);if(!w)return;const S=w.status==="suspended"?"active":"suspended";try{await ee(q(M,"users",y),{status:S}),n(r.map(D=>D.id===y?{...D,status:S}:D))}catch(D){console.error("Error updating user status:",D)}},j=async(y,w)=>{try{await ee(q(M,"artworks",y),{contentStatus:w}),i(s.map(S=>S.id===y?{...S,contentStatus:w}:S))}catch(S){console.error("Error updating artwork status:",S)}},_=async y=>{if(confirm("Are you sure you want to delete this artwork?"))try{await Jh(q(M,"artworks",y)),i(s.filter(w=>w.id!==y))}catch(w){console.error("Error deleting artwork:",w)}},R={totalUsers:r.length,activeUsers:r.filter(y=>y.status!=="suspended").length,totalArtworks:s.length,listedArtworks:s.filter(y=>y.forSale).length},T=({id:y,label:w,icon:S})=>o.jsxs("button",{onClick:()=>d(y),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${u===y?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[S,w,y==="artists"&&a.length>0&&o.jsx("span",{className:"ml-auto bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400 text-xs py-0.5 px-2 rounded-full",children:a.length})]});return o.jsxs("div",{className:"flex h-[calc(100vh-64px)] bg-gray-50 dark:bg-hf-bg",children:[o.jsxs("aside",{className:"w-64 bg-white dark:bg-hf-card border-r dark:border-gray-800 flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx("h2",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Admin Console"})}),o.jsxs("nav",{className:"flex-1 px-4 space-y-1",children:[o.jsx(T,{id:"dashboard",label:"Dashboard",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),o.jsx(T,{id:"users",label:"Users",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),o.jsx(T,{id:"artists",label:"Artist Requests",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),o.jsx(T,{id:"content",label:"Content Moderation",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),o.jsx("div",{className:"p-4 border-t dark:border-gray-800",children:o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:"A"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium dark:text-hf-text",children:"Admin"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"System Administrator"})]})]})})]}),o.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:o.jsxs("div",{className:"max-w-5xl mx-auto",children:[u==="dashboard"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text",children:"Dashboard Overview"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),o.jsx("p",{className:"text-3xl font-bold mt-2 dark:text-hf-text",children:R.totalUsers}),o.jsxs("div",{className:"mt-4 text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),R.activeUsers," Active"]})]}),o.jsxs("div",{className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Artworks"}),o.jsx("p",{className:"text-3xl font-bold mt-2 dark:text-hf-text",children:R.totalArtworks}),o.jsxs("div",{className:"mt-4 text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),R.listedArtworks," Listed"]})]}),o.jsxs("div",{className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pending Requests"}),o.jsx("p",{className:"text-3xl font-bold mt-2 dark:text-hf-text",children:a.length}),o.jsx("div",{className:"mt-4 text-xs text-orange-600 dark:text-orange-400",children:"Requires attention"})]}),o.jsxs("div",{className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Suspended Users"}),o.jsx("p",{className:"text-3xl font-bold mt-2 dark:text-hf-text",children:r.filter(y=>y.status==="suspended").length}),o.jsx("div",{className:"mt-4 text-xs text-red-600 dark:text-red-400",children:"Restricted access"})]})]})]}),u==="artists"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text",children:"Artist Requests"}),o.jsx("div",{className:"bg-white dark:bg-hf-card rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:a.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h3",{className:"text-lg font-medium dark:text-hf-text",children:"All caught up!"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"No pending artist requests."})]}):o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b dark:border-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Requested"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:a.map(y=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium dark:text-hf-text",children:y.name}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.email})]})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(y.requestedAt).toLocaleDateString()}),o.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[o.jsx("button",{onClick:()=>p(y.userId,!0),className:"px-3 py-1.5 text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 dark:text-green-400 dark:bg-green-900/20 dark:hover:bg-green-900/30 rounded-lg transition-colors",children:"Approve"}),o.jsx("button",{onClick:()=>p(y.userId,!1),className:"px-3 py-1.5 text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-400 dark:bg-red-900/20 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:"Reject"})]})]},y.userId))})]})})]}),u==="users"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text",children:"User Management"}),o.jsx("div",{className:"bg-white dark:bg-hf-card rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b dark:border-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:r.map(y=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium dark:text-hf-text",children:y.name}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.email})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                            ${y.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":y.role==="artist"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:y.role})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                            ${y.status==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:y.status||"active"})}),o.jsx("td",{className:"px-6 py-4 text-right",children:y.role!=="admin"&&o.jsx("button",{onClick:()=>I(y.id),className:`text-sm font-medium hover:underline ${y.status==="suspended"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:y.status==="suspended"?"Activate":"Suspend"})})]},y.id))})]})})]}),u==="content"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text",children:"Content Moderation"}),o.jsx("div",{className:"bg-white dark:bg-hf-card rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50 border-b dark:border-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Artwork"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Artist"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:s.map(y=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 dark:bg-gray-800 overflow-hidden flex-shrink-0",children:o.jsx("img",{src:y.imageUrl,alt:"",className:"w-full h-full object-cover"})}),o.jsx("span",{className:"font-medium dark:text-hf-text",children:y.title})]})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:y.artistName}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                            ${y.contentStatus==="approved"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":y.contentStatus==="rejected"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:y.contentStatus||"pending"})}),o.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[o.jsx("button",{onClick:()=>j(y.id,"approved"),className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300",title:"Approve",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("button",{onClick:()=>j(y.id,"rejected"),className:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Reject",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx("button",{onClick:()=>_(y.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},y.id))})]})})]})]})})]})}function Z2(){var x;const{user:t,loading:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState(!0),[a,c]=O.useState(null),[u,d]=O.useState(""),[m,f]=O.useState(!1),[p,I]=O.useState("dashboard"),[j,_]=O.useState("all");if(O.useEffect(()=>{(async()=>{try{const b=await Xe(te(M,"supportTickets")),C=[];b.forEach(P=>{C.push({id:P.id,...P.data()})}),n(C.sort((P,A)=>new Date(A.createdAt).getTime()-new Date(P.createdAt).getTime()))}catch(b){console.error("Error fetching tickets:",b)}finally{i(!1)}})()},[]),e)return o.jsx("div",{className:"p-6 text-center dark:text-hf-text",children:"Loading..."});if(!t||t.role!=="csr"&&t.role!=="admin")return o.jsx(mr,{to:"/",replace:!0});const R=async(v,b)=>{try{await ee(q(M,"supportTickets",v),{status:b}),n(r.map(C=>C.id===v?{...C,status:b}:C)),(a==null?void 0:a.id)===v&&c({...a,status:b})}catch(C){console.error("Error updating ticket status:",C)}},T=async v=>{if(v.preventDefault(),!(!a||!u.trim())){f(!0);try{const b={message:u.trim(),from:`${t.name} (Support)`,createdAt:new Date().toISOString()};await ee(q(M,"supportTickets",a.id),{responses:Zt(b),status:a.status==="open"?"in_progress":a.status});const C={...a,responses:[...a.responses||[],b],status:a.status==="open"?"in_progress":a.status};n(r.map(P=>P.id===a.id?C:P)),c(C),d("")}catch(b){console.error("Error sending response:",b)}finally{f(!1)}}},y={open:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",in_progress:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",resolved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},w=j==="all"?r:r.filter(v=>v.status===j),S=r.filter(v=>v.status==="open").length,D=r.filter(v=>v.status==="in_progress").length,N=r.filter(v=>v.status==="resolved").length,E=({id:v,label:b,icon:C})=>o.jsxs("button",{onClick:()=>I(v),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${p===v?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[C,b,v==="tickets"&&S>0&&o.jsx("span",{className:"ml-auto bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400 text-xs py-0.5 px-2 rounded-full",children:S})]});return o.jsxs("div",{className:"flex h-[calc(100vh-64px)] bg-gray-50 dark:bg-hf-bg",children:[o.jsxs("aside",{className:"w-64 bg-white dark:bg-hf-card border-r dark:border-gray-800 flex flex-col",children:[o.jsx("div",{className:"p-6",children:o.jsx("h2",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Support Console"})}),o.jsxs("nav",{className:"flex-1 px-4 space-y-1",children:[o.jsx(E,{id:"dashboard",label:"Dashboard",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),o.jsx(E,{id:"tickets",label:"Tickets",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]}),o.jsx("div",{className:"p-4 border-t dark:border-gray-800",children:o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:"S"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium dark:text-hf-text",children:"Support"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CSR Agent"})]})]})})]}),o.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[p==="dashboard"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text",children:"Dashboard Overview"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{onClick:()=>{_("all"),I("tickets")},className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 cursor-pointer hover:border-blue-500 transition-colors",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Tickets"}),o.jsx("p",{className:"text-3xl font-bold mt-2 dark:text-hf-text",children:r.length})]}),o.jsxs("div",{onClick:()=>{_("open"),I("tickets")},className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 cursor-pointer hover:border-red-500 transition-colors",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Open Tickets"}),o.jsx("p",{className:"text-3xl font-bold mt-2 text-red-600 dark:text-red-400",children:S}),o.jsx("div",{className:"mt-4 text-xs text-red-600 dark:text-red-400",children:"Requires attention"})]}),o.jsxs("div",{onClick:()=>{_("in_progress"),I("tickets")},className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 cursor-pointer hover:border-yellow-500 transition-colors",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"In Progress"}),o.jsx("p",{className:"text-3xl font-bold mt-2 text-yellow-600 dark:text-yellow-400",children:D})]}),o.jsxs("div",{onClick:()=>{_("resolved"),I("tickets")},className:"bg-white dark:bg-hf-card p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 cursor-pointer hover:border-green-500 transition-colors",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Resolved"}),o.jsx("p",{className:"text-3xl font-bold mt-2 text-green-600 dark:text-green-400",children:N})]})]})]}),p==="tickets"&&o.jsxs("div",{className:"h-[calc(100vh-120px)] flex gap-6",children:[o.jsxs("div",{className:"w-1/3 flex flex-col bg-white dark:bg-hf-card rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b dark:border-gray-800",children:[o.jsx("h2",{className:"font-semibold dark:text-hf-text mb-4",children:"Tickets"}),o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","open","in_progress","resolved"].map(v=>o.jsx("button",{onClick:()=>_(v),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${j===v?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:v.replace("_"," ").replace(/\b\w/g,b=>b.toUpperCase())},v))})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:s?o.jsx("p",{className:"text-center text-gray-500 dark:text-hf-muted py-4",children:"Loading..."}):w.length===0?o.jsx("p",{className:"text-center text-gray-500 dark:text-hf-muted py-4",children:"No tickets found."}):w.map(v=>o.jsxs("div",{onClick:()=>c(v),className:`p-3 rounded-lg cursor-pointer transition-colors border ${(a==null?void 0:a.id)===v.id?"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":"border-transparent hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-medium uppercase ${y[v.status]}`,children:v.status.replace("_"," ")}),o.jsx("span",{className:"text-xs text-gray-400",children:new Date(v.createdAt).toLocaleDateString()})]}),o.jsx("h3",{className:"font-medium text-sm dark:text-hf-text truncate",children:v.title}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:v.userEmail})]},v.id))})]}),o.jsx("div",{className:"flex-1 bg-white dark:bg-hf-card rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden flex flex-col",children:a?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6 border-b dark:border-gray-800",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h2",{className:"text-xl font-bold dark:text-hf-text",children:a.title}),o.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${y[a.status]}`,children:a.status.replace("_"," ")})]}),o.jsxs("select",{value:a.status,onChange:v=>R(a.id,v.target.value),className:"text-sm border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-hf-text",children:[o.jsx("option",{value:"open",children:"Open"}),o.jsx("option",{value:"in_progress",children:"In Progress"}),o.jsx("option",{value:"resolved",children:"Resolved"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-hf-text",children:a.userName}),o.jsxs("span",{children:["<",a.userEmail,">"]}),o.jsx("span",{children:""}),o.jsx("span",{children:new Date(a.createdAt).toLocaleString()})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-800",children:o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a.description})}),(x=a.responses)==null?void 0:x.map((v,b)=>o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 px-1",children:[o.jsx("span",{className:"font-medium",children:v.from}),o.jsx("span",{children:new Date(v.createdAt).toLocaleString()})]}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg text-sm text-gray-800 dark:text-gray-200 border border-blue-100 dark:border-blue-800/50",children:o.jsx("p",{className:"whitespace-pre-wrap",children:v.message})})]},b))]}),o.jsx("div",{className:"p-4 border-t dark:border-gray-800 bg-gray-50 dark:bg-gray-800/30",children:o.jsxs("form",{onSubmit:T,children:[o.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-hf-text",children:"Reply to Ticket"}),o.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"w-full p-3 border dark:border-gray-700 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-hf-text resize-none",rows:3,placeholder:"Type your response...",disabled:m}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:m||!u.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium text-sm transition-colors",children:m?"Sending...":"Send Response"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400 dark:text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),o.jsx("p",{children:"Select a ticket to view details"})]})})})]})]})})]})}function ej(){const{user:t,loading:e}=Me(),[r,n]=O.useState({bio:"",website:"",instagram:"",twitter:"",contactEmail:"",location:"",commissionsOpen:!1,commissionInfo:""}),[s,i]=O.useState(!1),[a,c]=O.useState(!1),[u,d]=O.useState(!0);if(O.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const p=await we(q(M,"users",t.id));if(p.exists()){const I=p.data();n({bio:I.bio||"",website:I.website||"",instagram:I.instagram||"",twitter:I.twitter||"",contactEmail:I.contactEmail||"",location:I.location||"",commissionsOpen:I.commissionsOpen||!1,commissionInfo:I.commissionInfo||""})}}catch(p){console.error("Error fetching contact info:",p)}finally{d(!1)}})()},[t==null?void 0:t.id]),e||u)return o.jsx("div",{className:"p-6",children:"Loading..."});if(!t||t.role!=="artist")return o.jsx(mr,{to:"/dashboard",replace:!0});const m=async f=>{f.preventDefault(),i(!0),c(!1);try{await ee(q(M,"users",t.id),{bio:r.bio,website:r.website,instagram:r.instagram,twitter:r.twitter,contactEmail:r.contactEmail,location:r.location,commissionsOpen:r.commissionsOpen,commissionInfo:r.commissionInfo}),c(!0)}catch(p){console.error("Error saving contact info:",p)}finally{i(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-semibold dark:text-hf-text",children:"Artist Profile Settings"}),o.jsx(ie,{to:"/dashboard",className:"text-blue-600 hover:underline text-sm",children:" Back to Dashboard"})]}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mb-6",children:"Update your public profile information visible to buyers."}),a&&o.jsx("div",{className:"mb-4 p-4 bg-green-50 border border dark:border-gray-700-green-200 rounded-lg",children:o.jsx("p",{className:"text-green-800",children:"Profile updated successfully!"})}),o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),o.jsx("textarea",{value:r.bio,onChange:f=>n({...r,bio:f.target.value}),placeholder:"Tell buyers about yourself and your art...",className:"w-full p-2 border dark:border-gray-700 rounded",rows:4})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),o.jsx("input",{value:r.location,onChange:f=>n({...r,location:f.target.value}),placeholder:"e.g., New York, NY",className:"w-full p-2 border dark:border-gray-700 rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Contact Email"}),o.jsx("input",{type:"email",value:r.contactEmail,onChange:f=>n({...r,contactEmail:f.target.value}),placeholder:"Public email for inquiries",className:"w-full p-2 border dark:border-gray-700 rounded"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:"This will be visible to buyers on your profile"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),o.jsx("input",{type:"url",value:r.website,onChange:f=>n({...r,website:f.target.value}),placeholder:"https://yourwebsite.com",className:"w-full p-2 border dark:border-gray-700 rounded"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Instagram"}),o.jsx("input",{value:r.instagram,onChange:f=>n({...r,instagram:f.target.value}),placeholder:"@username",className:"w-full p-2 border dark:border-gray-700 rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Twitter/X"}),o.jsx("input",{value:r.twitter,onChange:f=>n({...r,twitter:f.target.value}),placeholder:"@username",className:"w-full p-2 border dark:border-gray-700 rounded"})]})]}),o.jsxs("div",{className:"border dark:border-gray-700-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-lg font-medium dark:text-hf-text mb-3",children:"Commission Settings"}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("input",{type:"checkbox",id:"commissionsOpen",checked:r.commissionsOpen,onChange:f=>n({...r,commissionsOpen:f.target.checked}),className:"w-4 h-4"}),o.jsx("label",{htmlFor:"commissionsOpen",className:"text-sm font-medium",children:"Open for Commissions"})]}),r.commissionsOpen&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Commission Information"}),o.jsx("textarea",{value:r.commissionInfo,onChange:f=>n({...r,commissionInfo:f.target.value}),placeholder:"Describe your commission process, pricing, turnaround time, etc.",className:"w-full p-2 border dark:border-gray-700 rounded",rows:4}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:"This will be shown to buyers on your profile"})]})]}),o.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Profile"})]})]})}function tj(){const{user:t}=Me(),{auctions:e,userBids:r,watchedAuctions:n,loading:s,refreshAuctions:i}=Tu(),[a,c]=O.useState("active"),[u,d]=O.useState({});O.useEffect(()=>{const y=()=>{i()};y();const w=setInterval(y,1e4);return()=>clearInterval(w)},[]),O.useEffect(()=>{const y=()=>{const S=new Date,D={};e.forEach(N=>{if(N.status==="active"){const x=new Date(N.endTime).getTime()-S.getTime();if(x>0){const v=Math.floor(x/864e5),b=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),C=Math.floor(x%(1e3*60*60)/(1e3*60)),P=Math.floor(x%(1e3*60)/1e3);v>0?D[N.id]=`${v}d ${b}h ${C}m`:b>0?D[N.id]=`${b}h ${C}m ${P}s`:D[N.id]=`${C}m ${P}s`}else D[N.id]="Ended"}else if(N.status==="scheduled"){const x=new Date(N.startTime).getTime()-S.getTime();if(x>0){const v=Math.floor(x/864e5),b=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),C=Math.floor(x%(1e3*60*60)/(1e3*60));D[N.id]=`Starts in ${v>0?v+"d ":""}${b}h ${C}m`}}}),d(D)};y();const w=setInterval(y,1e3);return()=>clearInterval(w)},[e]);const m=e.filter(y=>y.status==="active"),f=e.filter(y=>y.status==="scheduled"),p=e.filter(y=>y.status==="ended"),I=e.filter(y=>y.artistId===(t==null?void 0:t.id)),j=e.filter(y=>r.some(w=>w.auctionId===y.id)),_=()=>{switch(a){case"active":return m;case"upcoming":return f;case"ended":return p;case"my-bids":return j;case"watching":return n;case"my-auctions":return I;default:return m}},R=y=>{const w=r.filter(N=>N.auctionId===y.id);if(w.length===0)return null;const S=Math.max(...w.map(N=>N.amount)),D=y.winnerId===(t==null?void 0:t.id);return{highestBid:S,isWinning:D,bidCount:w.length}},T=[{key:"active",label:"Live Auctions",count:m.length},{key:"upcoming",label:"Upcoming",count:f.length},{key:"ended",label:"Ended",count:p.length}];return t&&(T.push({key:"my-bids",label:"My Bids",count:j.length},{key:"watching",label:"Watching",count:n.length}),t.role==="artist"&&T.push({key:"my-auctions",label:"My Auctions",count:I.length})),o.jsxs("div",{className:"max-w-7xl mx-auto p-6 dark:bg-hf-bg min-h-screen",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold dark:text-hf-text",children:"Auction Dashboard"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mt-1",children:"Discover and bid on exclusive artworks"})]}),(t==null?void 0:t.role)==="artist"&&o.jsx(ie,{to:"/auctions/create",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create Auction"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Live Auctions"}),o.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:m.length})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Upcoming"}),o.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:f.length})]}),t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Your Active Bids"}),o.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:r.filter(y=>m.some(w=>w.id===y.auctionId)).length})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Watching"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:n.length})]})]})]}),o.jsx("div",{className:"border-b dark:border-gray-700 mb-6",children:o.jsx("div",{className:"flex gap-1 overflow-x-auto",children:T.map(y=>o.jsxs("button",{onClick:()=>c(y.key),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${a===y.key?"border-blue-600 text-blue-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[y.label,o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:y.count})]},y.key))})}),s?o.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-hf-muted",children:"Loading auctions..."}):_().length===0?o.jsxs("div",{className:"text-center py-12 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:[o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"No auctions found in this category."}),a==="my-auctions"&&(t==null?void 0:t.role)==="artist"&&o.jsx(ie,{to:"/auctions/create",className:"inline-block mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create Your First Auction"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_().map(y=>{const w=R(y);return o.jsxs(ie,{to:`/auctions/${y.id}`,className:"border dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-shadow bg-white dark:bg-hf-card",children:[o.jsxs("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 relative",children:[y.imageUrl?o.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"}),o.jsx("div",{className:`absolute top-3 left-3 px-2 py-1 text-xs font-medium rounded ${y.status==="active"?"bg-green-500 text-white":y.status==="scheduled"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,children:y.status==="active"?"LIVE":y.status==="scheduled"?"UPCOMING":"ENDED"}),w&&o.jsx("div",{className:`absolute top-3 right-3 px-2 py-1 text-xs font-medium rounded ${w.isWinning?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:w.isWinning?"Winning":"Outbid"})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold text-lg truncate dark:text-hf-text",children:y.title}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:["by ",y.artistName]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:"Current Bid"}),o.jsxs("p",{className:"text-xl font-bold text-green-700 dark:text-green-400",children:["$",y.currentPrice]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:[y.totalBids," bids"]}),u[y.id]&&o.jsx("p",{className:`text-sm font-medium ${y.status==="active"?"text-red-600":"text-blue-600"}`,children:u[y.id]})]})]}),w&&o.jsxs("div",{className:"mt-3 pt-3 border-t text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-hf-muted",children:"Your highest bid: "}),o.jsxs("span",{className:"font-medium dark:text-hf-text",children:["$",w.highestBid]}),o.jsxs("span",{className:"text-gray-500 dark:text-hf-muted ml-2",children:["(",w.bidCount," bids)"]})]})]})]},y.id)})})]})}function rj(){var Vt;const{id:t}=Zf(),e=Ps(),{user:r}=Me(),{placeBid:n,withdrawBid:s,watchAuction:i,unwatchAuction:a,getAuctionBids:c,cancelAuction:u}=Tu(),[d,m]=O.useState(null),[f,p]=O.useState([]),[I,j]=O.useState(!0),[_,R]=O.useState(""),[T,y]=O.useState(!1),[w,S]=O.useState(""),[D,N]=O.useState(""),[E,x]=O.useState(!1),[v,b]=O.useState(!1),[C,P]=O.useState(!1),[A,Z]=O.useState(!1),[z,G]=O.useState(!1);O.useEffect(()=>{if(!t)return;const me=Gi(q(M,"auctions",t),Ue=>{var Fs;if(Ue.exists()){const ss={id:Ue.id,...Ue.data()};m(ss),x(r!=null&&r.id?(Fs=ss.watchers)==null?void 0:Fs.includes(r.id):!1),R(String(ss.currentPrice+ss.minBidIncrement))}else m(null);j(!1)});return()=>me()},[t,r==null?void 0:r.id]);const le=O.useCallback(async()=>{if(!t)return;const me=await c(t);p(me)},[t,c]);O.useEffect(()=>{le()},[le,d==null?void 0:d.totalBids]),O.useEffect(()=>{if(!d)return;const me=()=>{const Fs=new Date,nn=(d.status==="scheduled"?new Date(d.startTime):new Date(d.endTime)).getTime()-Fs.getTime();if(nn<=0){N(d.status==="scheduled"?"Starting...":"Ended");return}const $s=Math.floor(nn/(1e3*60*60*24)),Bs=Math.floor(nn%(1e3*60*60*24)/(1e3*60*60)),zs=Math.floor(nn%(1e3*60*60)/(1e3*60)),sn=Math.floor(nn%(1e3*60)/1e3);$s>0?N(`${$s}d ${Bs}h ${zs}m ${sn}s`):Bs>0?N(`${Bs}h ${zs}m ${sn}s`):zs>0?N(`${zs}m ${sn}s`):N(`${sn}s`)};me();const Ue=setInterval(me,1e3);return()=>clearInterval(Ue)},[d]);const $=async me=>{if(me.preventDefault(),!(!d||!r)){S(""),y(!0);try{const Ue=parseFloat(_);if(isNaN(Ue))throw new Error("Invalid bid amount");await n(d.id,Ue),R(String(Ue+d.minBidIncrement)),le()}catch(Ue){S(Ue.message||"Failed to place bid")}finally{y(!1)}}},K=async()=>{if(!(!d||!r))try{E?(await a(d.id),x(!1)):(await i(d.id),x(!0))}catch(me){console.error("Error updating watch status:",me)}},H=me=>{if(!d)return;const Ue=d.currentPrice+d.minBidIncrement*me;R(String(Ue))},se=async()=>{if(d){b(!0);try{await u(d.id),P(!1)}catch(me){S(me.message||"Failed to cancel auction")}finally{b(!1)}}},_e=async()=>{if(d){Z(!0),S("");try{await s(d.id),G(!1),le()}catch(me){S(me.message||"Failed to withdraw bid")}finally{Z(!1)}}},At=()=>{d&&e(`/support?reportType=auction&reportId=${d.id}&reportTitle=${encodeURIComponent(d.title)}`)};if(I)return o.jsx("div",{className:"max-w-6xl mx-auto p-6",children:o.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-hf-muted",children:"Loading auction..."})});if(!d)return o.jsx("div",{className:"max-w-6xl mx-auto p-6",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:"Auction not found"}),o.jsx(ie,{to:"/auctions",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Back to Auctions"})]})});const Ae=(r==null?void 0:r.id)===d.artistId,rr=r&&!Ae&&d.status==="active",wt=r&&r.id===d.winnerId;return o.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[o.jsx(ie,{to:"/auctions",className:"text-blue-600 hover:underline mb-4 inline-block",children:" Back to Auctions"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:d.imageUrl?o.jsx("img",{src:d.imageUrl,alt:d.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),o.jsxs("div",{className:"mt-6 border dark:border-gray-700 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold dark:text-hf-text mb-3",children:"Price History"}),d.priceHistory&&d.priceHistory.length>1?o.jsx("div",{className:"relative h-40",children:o.jsx(nj,{priceHistory:d.priceHistory})}):o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted",children:"No bid history yet"})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded mb-2 ${d.status==="active"?"bg-green-100 text-green-700":d.status==="scheduled"?"bg-blue-100 text-blue-700":d.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:d.status==="active"?"LIVE AUCTION":d.status==="scheduled"?"UPCOMING":d.status==="cancelled"?"CANCELLED":"ENDED"}),o.jsx("h1",{className:"text-3xl font-bold dark:text-hf-text",children:d.title}),o.jsxs(ie,{to:`/artist/${d.artistId}`,className:"text-blue-600 hover:underline mt-1 inline-block",children:["by ",d.artistName]})]}),r&&!Ae&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:K,className:`px-3 py-2 rounded border ${E?"bg-yellow-100 border-yellow-300 text-yellow-700 dark:bg-yellow-900/30 dark:border-yellow-700 dark:text-yellow-400":"bg-gray-50 hover:bg-gray-100 dark:bg-hf-card dark:border-gray-700 dark:text-hf-text dark:hover:bg-gray-800"}`,children:E?" Watching":" Watch"}),r.role==="admin"||r.role==="csr"?o.jsx("button",{onClick:()=>P(!0),className:"px-3 py-2 rounded border bg-red-50 hover:bg-red-100 text-red-600 border-red-200 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-900/40",children:"Pull Auction"}):o.jsx("button",{onClick:At,className:"px-3 py-2 rounded border bg-gray-50 dark:bg-hf-card hover:bg-red-50 text-gray-600 dark:text-hf-text hover:text-red-600 border dark:border-gray-700",children:"Report"})]})]}),d.description&&o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mt-4",children:d.description}),o.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-hf-card rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:d.status==="scheduled"?"Starts in":"Time Remaining"}),o.jsx("p",{className:`text-2xl font-bold ${d.status==="active"?"text-red-600":"text-blue-600"}`,children:D})]}),o.jsxs("div",{className:"mt-6 p-4 border dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:"Current Bid"}),o.jsxs("p",{className:"text-3xl font-bold text-green-700",children:["$",d.currentPrice]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-hf-muted",children:[d.totalBids," bids"]}),d.winnerId&&o.jsxs("p",{className:"text-sm",children:["Leading: ",o.jsx("span",{className:"font-medium",children:d.winnerName})]})]})]}),d.reservePrice&&d.currentPrice<d.reservePrice&&o.jsx("p",{className:"mt-2 text-sm text-orange-600",children:"Reserve not met"}),wt&&d.status==="active"&&o.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded",children:[o.jsx("p",{className:"text-green-700 text-sm font-medium",children:"You're winning this auction!"}),z?o.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded",children:[o.jsx("p",{className:"text-red-700 text-xs mb-2",children:"Are you sure? Your bid will be removed and the next highest bidder will take the lead."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:_e,disabled:A,className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:A?"Withdrawing...":"Yes, Withdraw"}),o.jsx("button",{onClick:()=>G(!1),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 dark:text-hf-text rounded text-xs hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"})]})]}):o.jsx("button",{onClick:()=>G(!0),className:"mt-2 text-xs text-red-600 hover:underline",children:"Withdraw my bid"})]}),d.status==="ended"&&d.winnerId===(r==null?void 0:r.id)&&o.jsx("div",{className:"mt-3 p-2 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Congratulations! You won this auction!"}),d.status==="ended"&&!d.winnerId&&d.totalBids>0&&o.jsx("div",{className:"mt-3 p-2 bg-orange-100 text-orange-700 rounded text-sm font-medium",children:"Auction ended - Reserve price was not met"}),d.status==="ended"&&d.totalBids===0&&o.jsx("div",{className:"mt-3 p-2 bg-gray-100 text-gray-700 dark:text-hf-text rounded text-sm font-medium",children:"Auction ended with no bids"})]}),rr&&(()=>{const me=(r.balance||0)-(r.heldAmount||0);return o.jsxs("form",{onSubmit:$,className:"mt-6 p-4 border dark:border-gray-700 rounded-lg bg-blue-50 dark:bg-blue-900/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold dark:text-hf-text",children:"Place Your Bid"}),o.jsxs("div",{className:"text-sm text-right",children:[o.jsxs("div",{className:"text-gray-600 dark:text-hf-muted",children:["Available: ",o.jsxs("span",{className:"font-medium text-green-600",children:["$",me.toFixed(2)]})]}),(r.heldAmount||0)>0&&o.jsxs("div",{className:"text-xs text-orange-600",children:["($",(r.heldAmount||0).toFixed(2)," held in bids)"]})]})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>H(1),disabled:d.currentPrice+d.minBidIncrement>me,className:"px-3 py-1 text-sm border dark:border-gray-700 rounded hover:bg-white dark:bg-hf-card dark:text-hf-text disabled:opacity-50 disabled:cursor-not-allowed",children:["+$",d.minBidIncrement]}),o.jsxs("button",{type:"button",onClick:()=>H(2),disabled:d.currentPrice+d.minBidIncrement*2>me,className:"px-3 py-1 text-sm border dark:border-gray-700 rounded hover:bg-white dark:bg-hf-card dark:text-hf-text disabled:opacity-50 disabled:cursor-not-allowed",children:["+$",d.minBidIncrement*2]}),o.jsxs("button",{type:"button",onClick:()=>H(5),disabled:d.currentPrice+d.minBidIncrement*5>me,className:"px-3 py-1 text-sm border dark:border-gray-700 rounded hover:bg-white dark:bg-hf-card dark:text-hf-text disabled:opacity-50 disabled:cursor-not-allowed",children:["+$",d.minBidIncrement*5]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-hf-muted",children:"$"}),o.jsx("input",{type:"number",value:_,onChange:Ue=>R(Ue.target.value),min:d.currentPrice+d.minBidIncrement,max:me,step:d.minBidIncrement,className:"w-full pl-7 pr-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-hf-text",disabled:T})]}),o.jsx("button",{type:"submit",disabled:T||parseFloat(_)>me,className:"px-6 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:opacity-50",children:T?"Placing...":"Place Bid"})]}),o.jsxs("p",{className:"text-xs text-gray-600 dark:text-hf-muted mt-2",children:["Minimum bid: $",d.currentPrice+d.minBidIncrement," (increment: $",d.minBidIncrement,") | Max bid: $",me.toFixed(2)]}),parseFloat(_)>me&&o.jsxs("p",{className:"text-orange-600 text-sm mt-2",children:["Bid exceeds your available balance. ",o.jsx(ie,{to:"/wallet",className:"underline",children:"Add funds"})]}),w&&o.jsx("p",{className:"text-red-600 text-sm mt-2",children:w})]})})(),!r&&d.status==="active"&&o.jsx("div",{className:"mt-6 p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card text-center",children:o.jsxs("p",{className:"text-gray-600 dark:text-hf-muted",children:[o.jsx(ie,{to:"/login",className:"text-blue-600 hover:underline",children:"Sign in"})," ","to place a bid"]})}),Ae&&o.jsx("div",{className:"mt-6 p-4 border dark:border-gray-700 rounded-lg bg-yellow-50 dark:bg-yellow-900/10",children:o.jsx("p",{className:"text-yellow-700 text-sm",children:"This is your auction. You cannot bid on your own items."})}),(Ae||(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="csr")&&(d.status==="active"||d.status==="scheduled")&&o.jsxs("div",{className:`mt-6 p-4 border rounded-lg ${Ae?"bg-yellow-50 dark:bg-yellow-900/10 dark:border-yellow-900/30":"bg-red-50 dark:bg-red-900/10 dark:border-red-900/30"}`,children:[!Ae&&o.jsx("p",{className:"text-red-700 text-sm mb-3 font-medium",children:"Admin Control: You can cancel this auction."}),C?o.jsxs("div",{className:"p-3 bg-red-100 rounded",children:[o.jsxs("p",{className:"text-red-700 text-sm font-medium mb-2",children:["Are you sure you want to cancel this auction?",d.totalBids>0&&" All bidders will be notified."]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:se,disabled:v,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 disabled:opacity-50",children:v?"Cancelling...":"Yes, Cancel Auction"}),o.jsx("button",{onClick:()=>P(!1),className:"px-3 py-1 bg-gray-200 rounded text-sm hover:bg-gray-300",children:"No, Keep It"})]})]}):o.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Pull Auction"})]}),d.status==="cancelled"&&o.jsxs("div",{className:"mt-6 p-4 border border-red-200 dark:border-red-900/30 rounded-lg bg-red-50 dark:bg-red-900/10",children:[o.jsx("p",{className:"text-red-700 font-medium",children:"This auction has been cancelled"}),o.jsx("p",{className:"text-red-600 text-sm mt-1",children:"The artist pulled this auction. No transactions will be processed."})]}),o.jsxs("div",{className:"mt-6 border dark:border-gray-700 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold dark:text-hf-text mb-3",children:"Auction Details"}),o.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"Starting Price"}),o.jsxs("dd",{className:"font-medium",children:["$",d.startingPrice]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"Min Increment"}),o.jsxs("dd",{className:"font-medium",children:["$",d.minBidIncrement]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"Start Time"}),o.jsx("dd",{className:"font-medium",children:new Date(d.startTime).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"End Time"}),o.jsx("dd",{className:"font-medium",children:new Date(d.endTime).toLocaleString()})]}),d.reservePrice&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"Reserve Price"}),o.jsx("dd",{className:"font-medium",children:d.currentPrice>=d.reservePrice?"Met":"Not met"})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-gray-600 dark:text-hf-muted",children:"Watchers"}),o.jsx("dd",{className:"font-medium",children:((Vt=d.watchers)==null?void 0:Vt.length)||0})]})]})]})]})]}),o.jsxs("div",{className:"mt-8 border dark:border-gray-700 rounded-lg p-6",children:[o.jsxs("h3",{className:"font-semibold dark:text-hf-text text-lg mb-4",children:["Bid History (",f.length,")"]}),f.length===0?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"No bids yet. Be the first to bid!"}):o.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:f.map((me,Ue)=>o.jsxs("div",{className:`flex items-center justify-between p-3 rounded ${Ue===0?"bg-green-50 border border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-gray-50 dark:bg-hf-card"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[Ue===0&&o.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Leading"}),o.jsx("span",{className:"font-medium",children:me.bidderName}),me.bidderId===(r==null?void 0:r.id)&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:"You"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold",children:["$",me.amount]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:new Date(me.timestamp).toLocaleString()})]})]},me.id))})]})]})}function nj({priceHistory:t}){const[e,r]=O.useState(null);if(t.length<2)return null;const n=t.map(w=>w.price),s=Math.min(...n),i=Math.max(...n),a=i-s||1,c=300,u=120,d=20,m=15,f=c-d*2,p=u-m*2,I=w=>t.length===1?d+f/2:d+w/(t.length-1)*f,j=w=>a===0?m+p/2:m+p-(w-s)/a*p,_=t.map((w,S)=>`${I(S)},${j(w.price)}`).join(" "),R=`M ${I(0)},${u-m} L ${_} L ${I(t.length-1)},${u-m} Z`,T=w=>new Date(w).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=((i-s)/s*100).toFixed(1);return o.jsxs("div",{className:"relative w-full",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-green-600 font-semibold",children:["$",i]}),o.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-1.5 py-0.5 rounded",children:["+",y,"%"]})]}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-hf-muted",children:[t.length," bids"]})]}),o.jsxs("svg",{viewBox:`0 0 ${c} ${u}`,className:"w-full",style:{height:"120px"},preserveAspectRatio:"xMidYMid meet",children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.05"})]}),o.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"#059669"}),o.jsx("stop",{offset:"100%",stopColor:"#10b981"})]})]}),[.25,.5,.75].map(w=>{const S=m+p*(1-w);return o.jsx("line",{x1:d,y1:S,x2:c-d,y2:S,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},w)}),o.jsx("path",{d:R,fill:"url(#areaGradient)"}),o.jsx("polyline",{fill:"none",stroke:"url(#lineGradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",points:_}),t.map((w,S)=>{const D=I(S),N=j(w.price),E=e===S,x=S===t.length-1;return o.jsxs("g",{children:[o.jsx("circle",{cx:D,cy:N,r:"12",fill:"transparent",onMouseEnter:()=>r(S),onMouseLeave:()=>r(null),style:{cursor:"pointer"}}),o.jsx("circle",{cx:D,cy:N,r:E||x?5:3,fill:x?"#059669":"#10b981",stroke:"white",strokeWidth:"2"}),x&&o.jsxs("circle",{cx:D,cy:N,r:"8",fill:"none",stroke:"#10b981",strokeWidth:"1.5",opacity:"0.5",children:[o.jsx("animate",{attributeName:"r",from:"5",to:"15",dur:"1.5s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"opacity",from:"0.6",to:"0",dur:"1.5s",repeatCount:"indefinite"})]})]},S)}),o.jsxs("text",{x:d-5,y:m+4,fontSize:"10",fill:"#9ca3af",textAnchor:"end",children:["$",i]}),o.jsxs("text",{x:d-5,y:u-m+4,fontSize:"10",fill:"#9ca3af",textAnchor:"end",children:["$",s]})]}),e!==null&&o.jsxs("div",{className:"absolute bg-gray-900 text-white text-xs rounded-lg px-3 py-2 pointer-events-none shadow-lg z-10",style:{left:`${I(e)/c*100}%`,top:"30px",transform:"translateX(-50%)"},children:[o.jsxs("div",{className:"font-bold text-sm",children:["$",t[e].price]}),o.jsx("div",{className:"text-gray-300 text-xs",children:T(t[e].timestamp)}),e>0&&o.jsxs("div",{className:"text-green-400 text-xs mt-1",children:["+$",t[e].price-t[e-1].price]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[o.jsx("span",{children:T(t[0].timestamp)}),o.jsx("span",{children:T(t[t.length-1].timestamp)})]})]})}function sj(){const t=Ps(),{user:e}=Me(),{createAuction:r}=Tu(),[n,s]=O.useState([]),[i,a]=O.useState(!0),[c,u]=O.useState(!1),[d,m]=O.useState(""),[f,p]=O.useState(null),[I,j]=O.useState(""),[_,R]=O.useState(""),[T,y]=O.useState("100"),[w,S]=O.useState(""),[D,N]=O.useState("10"),[E,x]=O.useState(""),[v,b]=O.useState(""),[C,P]=O.useState("");O.useEffect(()=>{if(!e||e.role!=="artist"){t("/auctions");return}(async()=>{try{const H=lt(te(M,"artworks"),vt("artistId","==",e.id)),se=await Xe(H),_e=[];se.forEach(At=>{const Ae=At.data(),rr=Ae.forSale===!0,wt=Ae.sold===!0,Vt=Ae.inAuction===!0;!rr&&!wt&&!Vt&&_e.push({id:At.id,...Ae})}),s(_e)}catch(H){console.error("Error fetching artworks:",H)}finally{a(!1)}})();const le=new Date,$=new Date(le.getTime()+60*60*1e3),K=new Date(le.getTime()+7*24*60*60*1e3);x(A($)),b(A(K))},[e,t]);const A=G=>G.toISOString().slice(0,16),Z=G=>{p(G),j(G.title),R(G.description||""),P(G.imageUrl)},z=async G=>{if(G.preventDefault(),!!e){m(""),u(!0);try{const le=parseFloat(T),$=parseFloat(w),K=parseFloat(D);if(isNaN(le)||le<=0)throw new Error("Starting price must be a positive number");if(isNaN($)||$<=0)throw new Error("Reserve price must be a positive number");if(isNaN(K)||K<=0)throw new Error("Minimum bid increment must be a positive number");if($<le)throw new Error("Reserve price must be greater than or equal to starting price");const H=new Date(E),se=new Date(v);if(se<=H)throw new Error("End time must be after start time");const _e={artworkId:(f==null?void 0:f.id)||"",title:I,description:_,imageUrl:C,artistId:e.id,artistName:e.name,startingPrice:le,reservePrice:$,minBidIncrement:K,startTime:H.toISOString(),endTime:se.toISOString()},At=await r(_e);t(`/auctions/${At}`)}catch(le){m(le.message||"Failed to create auction")}finally{u(!1)}}};return!e||e.role!=="artist"?null:o.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text mb-6",children:"Create New Auction"}),o.jsxs("form",{onSubmit:z,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select from your artworks (optional)"}),i?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"Loading your artworks..."}):n.length>0?o.jsx("div",{className:"grid grid-cols-4 gap-3",children:n.map(G=>o.jsx("button",{type:"button",onClick:()=>Z(G),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${(f==null?void 0:f.id)===G.id?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}`,children:o.jsx("img",{src:G.imageUrl,alt:G.title,className:"w-full h-full object-cover"})},G.id))}):o.jsx("p",{className:"text-gray-500 dark:text-hf-muted text-sm",children:"No artworks available. Upload artwork first or your artworks may already be sold/in auction."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auction Title *"}),o.jsx("input",{type:"text",value:I,onChange:G=>j(G.target.value),required:!0,className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter auction title"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),o.jsx("textarea",{value:_,onChange:G=>R(G.target.value),rows:4,className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the artwork being auctioned"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Image URL *"}),o.jsx("input",{type:"url",value:C,onChange:G=>P(G.target.value),required:!0,className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"}),C&&o.jsx("div",{className:"mt-2 w-32 h-32 bg-gray-100 rounded overflow-hidden",children:o.jsx("img",{src:C,alt:"Preview",className:"w-full h-full object-cover"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Starting Price ($) *"}),o.jsx("input",{type:"number",value:T,onChange:G=>y(G.target.value),required:!0,min:"1",step:"0.01",className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reserve Price ($) *"}),o.jsx("input",{type:"number",value:w,onChange:G=>S(G.target.value),required:!0,min:"1",step:"0.01",className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-1",children:"Minimum price to sell"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Bid Increment ($) *"}),o.jsx("input",{type:"number",value:D,onChange:G=>N(G.target.value),required:!0,min:"1",step:"0.01",className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Time *"}),o.jsx("input",{type:"datetime-local",value:E,onChange:G=>x(G.target.value),required:!0,className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Time *"}),o.jsx("input",{type:"datetime-local",value:v,onChange:G=>b(G.target.value),required:!0,className:"w-full px-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d&&o.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded text-sm",children:d}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>t("/auctions"),className:"px-4 py-2 border dark:border-gray-700 rounded hover:bg-gray-50 dark:bg-hf-card",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:c?"Creating...":"Create Auction"})]})]})]})}const ij="modulepreload",aj=function(t){return"/"+t},G0={},oj=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=aj(u),u in G0)return;G0[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":ij,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((p,I)=>{f.addEventListener("load",p),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};function lj(){const{user:t,addFunds:e}=Me(),[r,n]=O.useState([]),[s,i]=O.useState(!0),[a,c]=O.useState(""),[u,d]=O.useState(!1),[m,f]=O.useState(""),[p,I]=O.useState("");O.useEffect(()=>{if(!(t!=null&&t.id))return;(async()=>{try{const w=lt(te(M,"transactions"),vt("userId","==",t.id)),S=await Xe(w),D=[];S.forEach(N=>{D.push({id:N.id,...N.data()})}),n(D.sort((N,E)=>new Date(E.createdAt).getTime()-new Date(N.createdAt).getTime()))}catch(w){console.error("Error fetching transactions:",w)}finally{i(!1)}})()},[t==null?void 0:t.id]);const j=async y=>{y.preventDefault(),f(""),I("");const w=parseFloat(a);if(isNaN(w)||w<=0){f("Please enter a valid amount");return}d(!0);try{await e(w);const{addDoc:S}=await oj(async()=>{const{addDoc:x}=await Promise.resolve().then(()=>n2);return{addDoc:x}},void 0);await S(te(M,"transactions"),{userId:t==null?void 0:t.id,type:"deposit",amount:w,description:"Funds deposited to wallet",createdAt:new Date().toISOString()}),I(`Successfully added $${w.toFixed(2)} to your wallet!`),c("");const D=lt(te(M,"transactions"),vt("userId","==",t==null?void 0:t.id)),N=await Xe(D),E=[];N.forEach(x=>{E.push({id:x.id,...x.data()})}),n(E.sort((x,v)=>new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime()))}catch(S){f(S.message||"Failed to add funds")}finally{d(!1)}},_=y=>{c(String(y))},R=y=>"$",T=(y,w)=>w>0?"text-green-600":"text-red-600";return t?o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text mb-6",children:"My Wallet"}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white mb-6",children:[o.jsx("p",{className:"text-sm opacity-80",children:"Total Balance"}),o.jsxs("p",{className:"text-4xl font-bold mt-1",children:["$",(t.balance||0).toFixed(2)]}),(t.heldAmount||0)>0&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-white/30",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"opacity-80",children:"Held in auction bids:"}),o.jsxs("span",{className:"font-medium",children:["-$",(t.heldAmount||0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[o.jsx("span",{className:"opacity-80",children:"Available to spend:"}),o.jsxs("span",{className:"font-medium",children:["$",((t.balance||0)-(t.heldAmount||0)).toFixed(2)]})]})]}),o.jsxs("p",{className:"text-sm opacity-80 mt-2",children:[t.name,"  ",t.role]})]}),o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-6 mb-6 bg-white dark:bg-hf-card",children:[o.jsx("h2",{className:"text-lg font-semibold dark:text-hf-text mb-4",children:"Add Funds"}),o.jsx("div",{className:"flex gap-2 mb-4",children:[25,50,100,250,500].map(y=>o.jsxs("button",{onClick:()=>_(y),className:"px-4 py-2 border dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-700 dark:bg-gray-800 dark:text-hf-text text-sm transition-colors",children:["$",y]},y))}),o.jsxs("form",{onSubmit:j,className:"flex gap-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-hf-muted",children:"$"}),o.jsx("input",{type:"number",value:a,onChange:y=>c(y.target.value),placeholder:"Enter amount",min:"1",step:"0.01",className:"w-full pl-7 pr-3 py-2 border dark:border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-hf-text",disabled:u})]}),o.jsx("button",{type:"submit",disabled:u||!a,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:u?"Processing...":"Add Funds"})]}),m&&o.jsx("p",{className:"text-red-600 text-sm mt-2",children:m}),p&&o.jsx("p",{className:"text-green-600 text-sm mt-2",children:p}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-3",children:"Note: This is a demo. No real payment processing occurs."})]}),o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-6 mb-6 bg-gray-50 dark:bg-hf-card",children:[o.jsx("h2",{className:"text-lg font-semibold dark:text-hf-text mb-3",children:"Fee Structure"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-hf-muted",children:"Auction Hosting Fee:"}),o.jsx("span",{className:"font-medium",children:"$10.00"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-hf-muted",children:"Sales Commission:"}),o.jsx("span",{className:"font-medium",children:"15%"})]})]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted mt-3",children:"A $10 fee is charged when creating an auction. 15% commission is deducted from all artwork and auction sales."})]}),o.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-6 bg-white dark:bg-hf-card",children:[o.jsx("h2",{className:"text-lg font-semibold dark:text-hf-text mb-4",children:"Transaction History"}),s?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"Loading transactions..."}):r.length===0?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"No transactions yet."}):o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded border border-transparent hover:border-gray-200 dark:hover:border-gray-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl dark:text-hf-text",children:R(y.type)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium dark:text-hf-text",children:y.description}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-hf-muted",children:new Date(y.createdAt).toLocaleString()})]})]}),o.jsxs("span",{className:`font-bold ${T(y.type,y.amount)}`,children:[y.amount>0?"+":"","$",Math.abs(y.amount).toFixed(2)]})]},y.id))})]})]}):o.jsx("div",{className:"max-w-4xl mx-auto p-6",children:o.jsx("p",{className:"text-center text-gray-600 dark:text-hf-muted",children:"Please log in to view your wallet."})})}function cj(){const[t,e]=O.useState([]),[r,n]=O.useState(!0),[s,i]=O.useState("all");O.useEffect(()=>{(async()=>{try{const u=lt(te(M,"users"),vt("role","==","artist")),d=await Xe(u),m=[];d.forEach(f=>{m.push({id:f.id,...f.data()})}),e(m)}catch(u){console.error("Error fetching artists:",u)}finally{n(!1)}})()},[]);const a=s==="commissions"?t.filter(c=>c.commissionsOpen):t;return o.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold dark:text-hf-text mb-2",children:"Artists"}),o.jsx("p",{className:"text-gray-600 dark:text-hf-muted mb-6",children:"Discover talented artists and commission custom artwork"}),o.jsxs("div",{className:"flex gap-2 mb-6",children:[o.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded ${s==="all"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 dark:text-hf-text"}`,children:"All Artists"}),o.jsx("button",{onClick:()=>i("commissions"),className:`px-4 py-2 rounded ${s==="commissions"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 dark:text-hf-text"}`,children:"Open for Commissions"})]}),r?o.jsx("p",{className:"text-gray-500 dark:text-hf-muted",children:"Loading artists..."}):a.length===0?o.jsx("div",{className:"text-center py-12 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-hf-card",children:o.jsx("p",{className:"text-gray-600 dark:text-hf-muted",children:s==="commissions"?"No artists are currently open for commissions.":"No artists found."})}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(c=>{var u;return o.jsxs(ie,{to:`/artist/${c.id}`,className:"border dark:border-gray-700 rounded-lg p-4 hover:shadow-lg transition-shadow bg-white dark:bg-hf-card",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-200 rounded-full flex items-center justify-center text-2xl font-bold text-gray-600 dark:text-hf-muted mb-3",children:c.name.charAt(0).toUpperCase()}),o.jsx("h3",{className:"font-medium dark:text-hf-text text-center",children:c.name}),c.location&&o.jsx("p",{className:"text-sm text-gray-500 dark:text-hf-muted text-center",children:c.location}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-hf-muted text-center mt-1",children:[((u=c.followers)==null?void 0:u.length)||0," followers"]}),c.commissionsOpen&&o.jsx("div",{className:"mt-2 text-center",children:o.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:"Open for Commissions"})}),c.bio&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-hf-muted mt-2 line-clamp-2",children:c.bio})]},c.id)})})]})}const K0=({children:t})=>{const{user:e,loading:r}=Me();return r?o.jsx("div",{className:"p-6",children:"Loading..."}):e?t:o.jsx(mr,{to:"/login",replace:!0})},uj=({children:t})=>{const{user:e,loading:r}=Me();return r?o.jsx("div",{className:"p-6",children:"Loading..."}):e?e.role!=="csr"&&e.role!=="admin"?o.jsx(mr,{to:"/",replace:!0}):t:o.jsx(mr,{to:"/login",replace:!0})},dj=({children:t})=>{const{user:e,loading:r}=Me();return r?o.jsx("div",{className:"p-6",children:"Loading..."}):e?e.role!=="admin"?o.jsx(mr,{to:"/",replace:!0}):t:o.jsx(mr,{to:"/login",replace:!0})},hj=({children:t})=>{const{user:e,loading:r}=Me();return r?o.jsx("div",{className:"p-6",children:"Loading..."}):e?e.role!=="artist"?o.jsx(mr,{to:"/auctions",replace:!0}):t:o.jsx(mr,{to:"/login",replace:!0})};function fj(){return o.jsx(M2,{children:o.jsx(U2,{children:o.jsx($2,{children:o.jsxs(KT,{children:[o.jsx(Qe,{path:"/",element:o.jsx(B2,{})}),o.jsx(Qe,{path:"/login",element:o.jsx(z2,{})}),o.jsx(Qe,{path:"/register",element:o.jsx(q2,{})}),o.jsx(Qe,{path:"/marketplace",element:o.jsx(W2,{})}),o.jsx(Qe,{path:"/marketplace/:id",element:o.jsx(H2,{})}),o.jsx(Qe,{path:"/artists",element:o.jsx(cj,{})}),o.jsx(Qe,{path:"/artist/:id",element:o.jsx(G2,{})}),o.jsx(Qe,{path:"/dashboard/*",element:o.jsx(K0,{children:o.jsx(K2,{})})}),o.jsx(Qe,{path:"/upload",element:o.jsx(Q2,{})}),o.jsx(Qe,{path:"/artist-settings",element:o.jsx(ej,{})}),o.jsx(Qe,{path:"/commissions",element:o.jsx(Y2,{})}),o.jsx(Qe,{path:"/support",element:o.jsx(X2,{})}),o.jsx(Qe,{path:"/csr",element:o.jsx(uj,{children:o.jsx(Z2,{})})}),o.jsx(Qe,{path:"/admin",element:o.jsx(dj,{children:o.jsx(J2,{})})}),o.jsx(Qe,{path:"/auctions",element:o.jsx(tj,{})}),o.jsx(Qe,{path:"/auctions/:id",element:o.jsx(rj,{})}),o.jsx(Qe,{path:"/auctions/create",element:o.jsx(hj,{children:o.jsx(sj,{})})}),o.jsx(Qe,{path:"/wallet",element:o.jsx(K0,{children:o.jsx(lj,{})})})]})})})})}l_(document.getElementById("root")).render(o.jsx(iv.StrictMode,{children:o.jsx(t1,{children:o.jsx(fj,{})})}));
